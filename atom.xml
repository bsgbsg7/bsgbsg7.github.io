<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Bsgbsg7&#39;s World</title>
  
  <subtitle>[object Object]</subtitle>
  <link href="http://example.com/atom.xml" rel="self"/>
  
  <link href="http://example.com/"/>
  <updated>2023-06-09T14:27:36.652Z</updated>
  <id>http://example.com/</id>
  
  <author>
    <name>Bsgbsg7</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>ROS</title>
    <link href="http://example.com/2023/06/05/ros/"/>
    <id>http://example.com/2023/06/05/ros/</id>
    <published>2023-06-05T06:37:45.907Z</published>
    <updated>2023-06-09T14:27:36.652Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ROS"><a href="#ROS" class="headerlink" title="ROS"></a>ROS</h2><p><strong>å‚è€ƒèµ„æ–™</strong></p><p><a href="http://wiki.ros.org/roslaunch/XML/rosparam">roslaunch&#x2F;XML&#x2F;rosparam - ROS Wiki</a></p><p><a href="http://www.autolabor.com.cn/book/ROSTutorials/5/45-rosjie-dianguan-li-launch-wen-jian/416-launchwen-jian-biao-qian-zhi-rosparam.html">4.2.6 launchæ–‡ä»¶æ ‡ç­¾ä¹‹rosparam Â· Autolabor-ROSæœºå™¨äººå…¥é—¨è¯¾ç¨‹ã€ŠROSç†è®ºä¸å®è·µã€‹é›¶åŸºç¡€æ•™ç¨‹</a></p><h3 id="group"><a href="#group" class="headerlink" title="group"></a>group</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">launch</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å¯åŠ¨ä¸¤å¯¹ä¹Œé¾ŸGUI --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">group</span> <span class="attr">ns</span>=<span class="string">&quot;first&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">node</span> <span class="attr">pkg</span>=<span class="string">&quot;turtlesim&quot;</span> <span class="attr">type</span>=<span class="string">&quot;turtlesim_node&quot;</span> <span class="attr">name</span>=<span class="string">&quot;my_turtle&quot;</span> <span class="attr">output</span>=<span class="string">&quot;screen&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">node</span> <span class="attr">pkg</span>=<span class="string">&quot;turtlesim&quot;</span> <span class="attr">type</span>=<span class="string">&quot;turtle_teleop_key&quot;</span> <span class="attr">name</span>=<span class="string">&quot;my_key&quot;</span> <span class="attr">output</span>=<span class="string">&quot;screen&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">group</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">group</span> <span class="attr">ns</span>=<span class="string">&quot;second&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">node</span> <span class="attr">pkg</span>=<span class="string">&quot;turtlesim&quot;</span> <span class="attr">type</span>=<span class="string">&quot;turtlesim_node&quot;</span> <span class="attr">name</span>=<span class="string">&quot;my_turtle&quot;</span> <span class="attr">output</span>=<span class="string">&quot;screen&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">node</span> <span class="attr">pkg</span>=<span class="string">&quot;turtlesim&quot;</span> <span class="attr">type</span>=<span class="string">&quot;turtle_teleop_key&quot;</span> <span class="attr">name</span>=<span class="string">&quot;my_key&quot;</span> <span class="attr">output</span>=<span class="string">&quot;screen&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">group</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">launch</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="arg"><a href="#arg" class="headerlink" title="arg"></a>arg</h3><p><a href="http://wiki.ros.org/roslaunch/XML/arg">roslaunch&#x2F;XML&#x2F;arg - ROS Wiki</a></p><p><img src="/2023/06/05/ros/image-20230605150215637.png" alt="image-20230605150215637"></p><p><img src="/2023/06/05/ros/image-20230605150243779.png" alt="image-20230605150243779"></p><p><strong>å¯ä»¥é€šè¿‡ include ä»¥åŠ å‘½ä»¤è¡Œ ä¼ é€’å‚æ•°</strong></p><p><img src="/2023/06/05/ros/image-20230605150409582.png" alt="image-20230605150409582"></p><p><img src="/2023/06/05/ros/image-20230605151741944.png" alt="image-20230605151741944"></p><p>å…ˆè¿è¡Œ included.launch å¯ä»¥çœ‹åˆ°æ˜¯é»˜è®¤å€¼ â€œdoneâ€ï¼Œå†è¿è¡Œ args.launchï¼Œå¯ä»¥çœ‹åˆ°å‚æ•° â€œweaweaweâ€ ä¼ é€’ç»™äº† A å’Œ B</p><p><img src="/2023/06/05/ros/image-20230605152443028.png" alt="image-20230605152443028"></p><h3 id="Timer"><a href="#Timer" class="headerlink" title="Timer"></a>Timer</h3><p><a href="https://blog.csdn.net/jiu_liu/article/details/119044571">(56æ¡æ¶ˆæ¯) ros timer(å®šæ—¶å™¨ï¼‰_ä¹æŸ³çš„åšå®¢-CSDNåšå®¢</a></p><p><img src="/2023/06/05/ros/image-20230605211216749.png" alt="image-20230605211216749"></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">timer_ = nh_private.<span class="built_in">createTimer</span>(ros::<span class="built_in">Duration</span>(<span class="number">1.0</span>/<span class="built_in">max</span>(freq,<span class="number">1.0</span>)),&amp;OdomEstimationNode::spin, <span class="keyword">this</span>);</span><br></pre></td></tr></table></figure><p>&amp;OdomEstimationNode::spin è·å–å¯¹è±¡çš„å‡½æ•°æŒ‡é’ˆï¼Œè°ƒç”¨å…¥å£ï¼ŒthisæŒ‡é’ˆè¯´æ˜è¿™æ˜¯å“ªä¸ªå¯¹è±¡<br>å› ä¸ºcppç±»ä¸­æ‰€æœ‰æˆå‘˜å…±äº«å…¨éƒ¨å‡½æ•°ï¼Œæ‰€ä»¥å…¥å£åªæœ‰ä¸€ä¸ªï¼Œé€šè¿‡ç±»å::å‡½æ•°åè·å–ï¼ŒåŒºåˆ†å¯¹è±¡ç”¨thisæŒ‡é’ˆï¼ˆæ„é€ å™¨ä¸­æ„é€ æ—¶ä½¿ç”¨ï¼‰ï¼Œæˆ–è€…å¯¹è±¡å</p><h3 id="subscribeå‡½æ•°ç”¨äºè®¢é˜…topicå¹¶æ·»åŠ å›è°ƒå‡½æ•°"><a href="#subscribeå‡½æ•°ç”¨äºè®¢é˜…topicå¹¶æ·»åŠ å›è°ƒå‡½æ•°" class="headerlink" title="subscribeå‡½æ•°ç”¨äºè®¢é˜…topicå¹¶æ·»åŠ å›è°ƒå‡½æ•°"></a><code>subscribe</code>å‡½æ•°ç”¨äºè®¢é˜…<code>topic</code>å¹¶æ·»åŠ <a href="https://so.csdn.net/so/search?q=%E5%9B%9E%E8%B0%83%E5%87%BD%E6%95%B0&spm=1001.2101.3001.7020">å›è°ƒå‡½æ•°</a></h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cloud_subs_= nh_.<span class="built_in">subscribe</span>&lt;sensor_msgs::PointCloud2&gt;(<span class="string">&quot;segmentation_result&quot;</span>, <span class="number">1</span>,&amp;RecognitionClass::cloudCallBack, <span class="keyword">this</span>);</span><br></pre></td></tr></table></figure><ul><li><code>PointCloud2</code>ä¸ºè®¢é˜…çš„æ¶ˆæ¯ç±»å‹</li><li><code>&quot;segmentation_result&quot;</code>ä¸º<code>topic</code>åï¼Œä¹‹åä¼šé‡æ˜ å°„ä¸ºçœŸå®çš„åç§°</li><li><code>1</code>ä¸ºå¤„ç†é˜Ÿåˆ—å¤§å°</li><li><code>&amp;RecognitionClass::cloudCallBack</code>æ˜¯å›è°ƒå‡½æ•°åœ°å€</li><li><code>this</code>ä¸ºå›è°ƒå‡½æ•°æ‰€å¤„çš„ç±»ï¼Œå³å½“å‰ç±»</li></ul><p><img src="/2023/06/05/ros/image-20230605213906693.png" alt="image-20230605213906693"></p><h3 id="advertise"><a href="#advertise" class="headerlink" title="advertise"></a>advertise</h3><p>å°±æ˜¯æ­£å¸¸çš„å‘å¸ƒè¯é¢˜</p><p>[roscpp&#x2F;Overview&#x2F;Publishers and Subscribers - ROS Wiki](<a href="https://wiki.ros.org/roscpp/Overview/Publishers">https://wiki.ros.org/roscpp/Overview/Publishers</a> and Subscribers)</p><p><a href="https://blog.csdn.net/xzs520xzs/article/details/120878681">(58æ¡æ¶ˆæ¯) åœ¨rosä¸­å‡½æ•°advertise()çš„ä½œç”¨_n.advertise_@æ™“å‡¡çš„åšå®¢-CSDNåšå®¢</a></p><p><a href="https://blog.csdn.net/Fourier_Legend/article/details/82109817">(58æ¡æ¶ˆæ¯) ROS ä¹‹ advertise è¯¦è§£_rosä¸­advertise_Dr. Qingçš„åšå®¢-CSDNåšå®¢</a></p><p><img src="/2023/06/05/ros/image-20230605215922473.png" alt="image-20230605215922473"></p><p><img src="/2023/06/05/ros/image-20230605215907910.png" alt="image-20230605215907910"></p><h3 id="push-back-å‡½æ•°"><a href="#push-back-å‡½æ•°" class="headerlink" title="push_back å‡½æ•°"></a>push_back å‡½æ•°</h3><p>å‡½æ•°å°†ä¸€ä¸ªæ–°çš„å…ƒç´ åŠ åˆ°<a href="https://so.csdn.net/so/search?q=vector&spm=1001.2101.3001.7020">vector</a>çš„æœ€åé¢ï¼Œä½ç½®ä¸ºå½“å‰æœ€åä¸€ä¸ªå…ƒç´ çš„ä¸‹ä¸€ä¸ªå…ƒç´ </p><h3 id="Quaternion-å››å…ƒæ•°"><a href="#Quaternion-å››å…ƒæ•°" class="headerlink" title="Quaternion å››å…ƒæ•°"></a>Quaternion å››å…ƒæ•°</h3><p>[tf2&#x2F;Tutorials&#x2F;Quaternions - ROS Wiki](<a href="http://wiki.ros.org/tf2/Tutorials/Quaternions#:~:text=ROS">http://wiki.ros.org/tf2/Tutorials/Quaternions#:~:text=ROS</a> uses quaternions to track and apply rotations.,like Eigen put w as the first number!).)</p><p><a href="https://zhuanlan.zhihu.com/p/27541307">å››å…ƒæ•°â€”â€”æ—‹è½¬ - çŸ¥ä¹ (zhihu.com)</a></p><p><a href="https://blog.csdn.net/s12k39/article/details/110200406">(57æ¡æ¶ˆæ¯) ROS å››å…ƒæ•°å’ŒRPYæ¬§æ‹‰è§’è½¬æ¢_c++å››å…ƒæ•°è½¬æ¬§æ‹‰è§’_ZiTian_Shiçš„åšå®¢-CSDNåšå®¢</a></p><p><img src="/2023/06/05/ros/image-20230607204138476.png" alt="image-20230607204138476"></p><h3 id="cmd-vel"><a href="#cmd-vel" class="headerlink" title="cmd_vel"></a>cmd_vel</h3><p><img src="/2023/06/05/ros/image-20230607205248458.png" alt="image-20230607205248458"></p><h3 id="srcæ–‡ä»¶å†…å¤šä¸ªmainå‡½æ•°ç¼–è¯‘æŠ¥é”™"><a href="#srcæ–‡ä»¶å†…å¤šä¸ªmainå‡½æ•°ç¼–è¯‘æŠ¥é”™" class="headerlink" title="srcæ–‡ä»¶å†…å¤šä¸ªmainå‡½æ•°ç¼–è¯‘æŠ¥é”™"></a>srcæ–‡ä»¶å†…å¤šä¸ªmainå‡½æ•°ç¼–è¯‘æŠ¥é”™</h3><p>å•ç‹¬æ·»åŠ </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">add_excutable;</span><br><span class="line">add_depenpencies;</span><br><span class="line">target_link_libraries;</span><br></pre></td></tr></table></figure><h3 id="é›·è¾¾æ•°æ®å¤„ç†"><a href="#é›·è¾¾æ•°æ®å¤„ç†" class="headerlink" title="é›·è¾¾æ•°æ®å¤„ç†"></a>é›·è¾¾æ•°æ®å¤„ç†</h3><p><a href="https://blog.csdn.net/wang073081/article/details/105945218">(58æ¡æ¶ˆæ¯) ROSä¸­æ¿€å…‰é›·è¾¾æ•°æ®ç±»å‹ä¼ é€’è½¬æ¢åŠè‡ªå®šä¹‰ç‚¹äº‘æ•°æ®ç±»å‹ä»‹ç»_ros è‡ªå®šä¹‰é›·è¾¾æ¶ˆæ¯_å››æµ·äº”æ¹–ç™¾å¤œæœˆçš„åšå®¢-CSDNåšå®¢</a></p><p><a href="https://blog.csdn.net/weixin_45947476/article/details/127527339">(58æ¡æ¶ˆæ¯) ROSå°è½¦â€”â€”é›·è¾¾çš„ä½¿ç”¨ä¸SLAMå»ºå›¾ï¼ˆ4ï¼‰_robot_navigation_running snail szjçš„åšå®¢-CSDNåšå®¢</a></p><p><a href="https://blog.csdn.net/ultimate1212/article/details/80995545">(58æ¡æ¶ˆæ¯) rosä¸­æ¿€å…‰é›·è¾¾çš„æ¶ˆæ¯ç±»å‹ï¼ˆsensor_msgs&#x2F;LaserScan Messageï¼‰è¯´æ˜_ultimate1212çš„åšå®¢-CSDNåšå®¢</a></p><p><a href="https://docs.ros.org/en/noetic/api/sensor_msgs/html/msg/LaserScan.html">sensor_msgs&#x2F;LaserScan Documentation (ros.org)</a></p><p><a href="http://www.autolabor.com.cn/book/ROSTutorials/chapter1/13-rosji-cheng-kai-fa-huan-jing-da-jian/131-helloworldc724829.html">1.3.2 HelloWorldå®ç°A(C++) Â· Autolabor-ROSæœºå™¨äººå…¥é—¨è¯¾ç¨‹ã€ŠROSç†è®ºä¸å®è·µã€‹é›¶åŸºç¡€æ•™ç¨‹</a></p><h3 id="rosä¸‹pythonæ–‡ä»¶çš„ä½¿ç”¨"><a href="#rosä¸‹pythonæ–‡ä»¶çš„ä½¿ç”¨" class="headerlink" title="rosä¸‹pythonæ–‡ä»¶çš„ä½¿ç”¨"></a>rosä¸‹pythonæ–‡ä»¶çš„ä½¿ç”¨</h3><p><a href="http://wiki.ros.org/ROS/Tutorials/WritingPublisherSubscriber(python)">ROS&#x2F;Tutorials&#x2F;WritingPublisherSubscriber(python) - ROS Wiki</a></p><p><a href="http://www.autolabor.com.cn/book/ROSTutorials/chapter1/13-rosji-cheng-kai-fa-huan-jing-da-jian/132-helloworldpython724829.html">1.3.3 HelloWorldå®ç°B(Python) Â· Autolabor-ROSæœºå™¨äººå…¥é—¨è¯¾ç¨‹ã€ŠROSç†è®ºä¸å®è·µã€‹é›¶åŸºç¡€æ•™ç¨‹</a></p><p><a href="https://blog.csdn.net/qq_58011370/article/details/122319514">(58æ¡æ¶ˆæ¯) ROSä½¿ç”¨Pythonç¼–å†™çš„æ­¥éª¤_rosç¼–è¯‘pythonæ–‡ä»¶_Believe yourself!!!çš„åšå®¢-CSDNåšå®¢</a></p><h3 id="é›·è¾¾æ»¤æ³¢"><a href="#é›·è¾¾æ»¤æ³¢" class="headerlink" title="é›·è¾¾æ»¤æ³¢"></a>é›·è¾¾æ»¤æ³¢</h3><p><a href="https://blog.csdn.net/asdli/article/details/91128367">(58æ¡æ¶ˆæ¯) ä¹ã€ROSå°è½¦é—­ç¯æ§åˆ¶ï¼šä½¿ç”¨laser_filtersåœ¨ROSå†…å¯¹äºŒç»´ï¼ˆ2Dï¼‰æ¿€å…‰é›·è¾¾æ•°æ®è¿›è¡ŒåŸºæœ¬æ»¤æ³¢_orcasdliçš„åšå®¢-CSDNåšå®¢</a></p><p><a href="https://blog.csdn.net/qq_37082966/article/details/93098721">(58æ¡æ¶ˆæ¯) ROSç®€å•å®ç°è®¢é˜…&#x2F;scanæ¿€å…‰é›·è¾¾çš„è·ç¦»ä¿¡æ¯_ros scan_å¤šå¹´ä»¥ålsçš„åšå®¢-CSDNåšå®¢</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;ROS&quot;&gt;&lt;a href=&quot;#ROS&quot; class=&quot;headerlink&quot; title=&quot;ROS&quot;&gt;&lt;/a&gt;ROS&lt;/h2&gt;&lt;p&gt;&lt;strong&gt;å‚è€ƒèµ„æ–™&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://wiki.ros.org/roslaunc</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>ESP32 LVGLï¼ˆ6ï¼‰</title>
    <link href="http://example.com/2023/06/04/cx-lvgl-6/"/>
    <id>http://example.com/2023/06/04/cx-lvgl-6/</id>
    <published>2023-06-04T15:39:18.292Z</published>
    <updated>2023-06-04T16:55:31.328Z</updated>
    
    <content type="html"><![CDATA[<h2 id="åŠŸèƒ½"><a href="#åŠŸèƒ½" class="headerlink" title="åŠŸèƒ½"></a>åŠŸèƒ½</h2><blockquote><p>ä¸»ç•Œé¢ UI è®¾è®¡ä»¥åŠç§»æ¤</p></blockquote><h2 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h2><p>éƒé—·æ­»æˆ‘äº†</p><h3 id="éœ¸å“¥"><a href="#éœ¸å“¥" class="headerlink" title="éœ¸å“¥"></a>éœ¸å“¥</h3><ol><li><p>å³ä½¿å¦‚æ­¤ä¸¥æ ¼åœ°åˆ†å¼€ client æ‰§è¡Œä¹Ÿä¼šæŠ¥é”™ï¼Œäººéº»äº†ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­ï¼Œè¿™ä¸ª bug æ”¹æ¥æ”¹å»æ”¹äº†ä¸‰å°æ—¶ï¼Œä¸ºä»€ä¹ˆä»–ç¨‹åºæŠ¥é”™ä½†ä¹Ÿå¯ä»¥æ‰§è¡Œå•ŠğŸ˜­ğŸ˜­ğŸ˜­ã€‚</p><p>23:44äº†ï¼Œæˆ‘ä¸ç®¡äº†ï¼Œç­‰å®ƒä»€ä¹ˆæ—¶å€™å½±å“è¿è¡Œäº†å†æ”¹å§ã€‚</p></li></ol><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (weather_client.<span class="built_in">connect</span>(<span class="string">&quot;api.seniverse.com&quot;</span>, <span class="number">80</span>))</span><br><span class="line">&#123;</span><br><span class="line">    weather_client.<span class="built_in">print</span>(high_low_https); <span class="comment">// å‘æœåŠ¡å™¨å‘é€HTTPè¯·æ±‚</span></span><br><span class="line">    <span class="keyword">while</span> (weather_client.<span class="built_in">connected</span>() || weather_client.<span class="built_in">available</span>())</span><br><span class="line">    &#123; <span class="comment">// æœåŠ¡å™¨ä¿æŒè¿æ¥</span></span><br><span class="line">        <span class="keyword">if</span> (weather_client.<span class="built_in">available</span>())</span><br><span class="line">        &#123;</span><br><span class="line">            String line = weather_client.<span class="built_in">readStringUntil</span>(<span class="string">&#x27;\n&#x27;</span>); <span class="comment">// ç­‰å¾…å“åº”å¹¶ä¸”è¯»å–å“åº”ä¿¡æ¯</span></span><br><span class="line">            Serial.<span class="built_in">println</span>(line);</span><br><span class="line">            <span class="function">DynamicJsonDocument <span class="title">doc</span><span class="params">(capacity)</span></span>;</span><br><span class="line">            <span class="built_in">deserializeJson</span>(doc, line);</span><br><span class="line">            JsonObject results_0_daily_0 = doc[<span class="string">&quot;results&quot;</span>][<span class="number">0</span>][<span class="string">&quot;daily&quot;</span>][<span class="number">0</span>];</span><br><span class="line">            tem_high = results_0_daily_0[<span class="string">&quot;high&quot;</span>].<span class="built_in">as</span>&lt;<span class="type">int</span>&gt;(); <span class="comment">// &quot;33&quot;</span></span><br><span class="line">            tem_low = results_0_daily_0[<span class="string">&quot;low&quot;</span>].<span class="built_in">as</span>&lt;<span class="type">int</span>&gt;();   <span class="comment">// &quot;21&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    weather_client.<span class="built_in">stop</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (weather_client.<span class="built_in">connect</span>(<span class="string">&quot;api.seniverse.com&quot;</span>, <span class="number">80</span>))</span><br><span class="line">&#123;</span><br><span class="line">    weather_client.<span class="built_in">print</span>(now_https); <span class="comment">// å‘æœåŠ¡å™¨å‘é€HTTPè¯·æ±‚</span></span><br><span class="line">    <span class="keyword">while</span> (weather_client.<span class="built_in">connected</span>() || weather_client.<span class="built_in">available</span>())</span><br><span class="line">    &#123; <span class="comment">// æœåŠ¡å™¨ä¿æŒè¿æ¥</span></span><br><span class="line">        <span class="keyword">if</span> (weather_client.<span class="built_in">available</span>())</span><br><span class="line">        &#123;</span><br><span class="line">            String line = weather_client.<span class="built_in">readStringUntil</span>(<span class="string">&#x27;\n&#x27;</span>); <span class="comment">// ç­‰å¾…å“åº”å¹¶ä¸”è¯»å–å“åº”ä¿¡æ¯</span></span><br><span class="line">            Serial.<span class="built_in">println</span>(line);</span><br><span class="line">            <span class="function">DynamicJsonDocument <span class="title">doc</span><span class="params">(capacity)</span></span>;</span><br><span class="line">            <span class="built_in">deserializeJson</span>(doc, line);</span><br><span class="line">            JsonObject now = doc[<span class="string">&quot;results&quot;</span>][<span class="number">0</span>][<span class="string">&quot;now&quot;</span>];</span><br><span class="line">            tem_now = now[<span class="string">&quot;temperature&quot;</span>].<span class="built_in">as</span>&lt;<span class="type">int</span>&gt;(); <span class="comment">// &quot;33&quot;</span></span><br><span class="line">            update_time = doc[<span class="string">&quot;results&quot;</span>][<span class="number">0</span>][<span class="string">&quot;last_update&quot;</span>].<span class="built_in">as</span>&lt;String&gt;();</span><br><span class="line">            position = doc[<span class="string">&quot;results&quot;</span>][<span class="number">0</span>][<span class="string">&quot;location&quot;</span>][<span class="string">&quot;name&quot;</span>].<span class="built_in">as</span>&lt;String&gt;();</span><br><span class="line">            weather_condition = now[<span class="string">&quot;text&quot;</span>].<span class="built_in">as</span>&lt;String&gt;();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    weather_client.<span class="built_in">stop</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (weather_client.<span class="built_in">connect</span>(<span class="string">&quot;api.seniverse.com&quot;</span>, <span class="number">80</span>))</span><br><span class="line">&#123;</span><br><span class="line">    weather_client.<span class="built_in">print</span>(air_https); <span class="comment">// å‘æœåŠ¡å™¨å‘é€HTTPè¯·æ±‚</span></span><br><span class="line">    <span class="keyword">while</span> (weather_client.<span class="built_in">connected</span>() || weather_client.<span class="built_in">available</span>())</span><br><span class="line">    &#123; <span class="comment">// æœåŠ¡å™¨ä¿æŒè¿æ¥</span></span><br><span class="line">        <span class="keyword">if</span> (weather_client.<span class="built_in">available</span>())</span><br><span class="line">        &#123;</span><br><span class="line">            String line = weather_client.<span class="built_in">readStringUntil</span>(<span class="string">&#x27;\n&#x27;</span>); <span class="comment">// ç­‰å¾…å“åº”å¹¶ä¸”è¯»å–å“åº”ä¿¡æ¯</span></span><br><span class="line">            Serial.<span class="built_in">println</span>(line);</span><br><span class="line">            <span class="function">DynamicJsonDocument <span class="title">doc</span><span class="params">(capacity)</span></span>;</span><br><span class="line">            <span class="built_in">deserializeJson</span>(doc, line);</span><br><span class="line">            JsonObject now = doc[<span class="string">&quot;results&quot;</span>][<span class="number">0</span>][<span class="string">&quot;air&quot;</span>];</span><br><span class="line">            air = now[<span class="string">&quot;city&quot;</span>][<span class="string">&quot;quality&quot;</span>].<span class="built_in">as</span>&lt;String&gt;();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    weather_client.<span class="built_in">stop</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">111494</span>][D][WiFiClient.cpp:<span class="number">546</span>] <span class="built_in">connected</span>(): Disconnected: RES: <span class="number">0</span>, ERR: <span class="number">128</span></span><br><span class="line">Date: Sun, <span class="number">04</span> Jun <span class="number">2023</span> <span class="number">15</span>:<span class="number">29</span>:<span class="number">54</span> GMT</span><br><span class="line">Content-Type: application/json; charset=utf<span class="number">-8</span></span><br><span class="line">Content-Length: <span class="number">388</span></span><br><span class="line">Connection: close</span><br><span class="line">access-control-allow-origin: *</span><br><span class="line">etag: W/<span class="string">&quot;184-c/w+MpyRWp/b7jh48Urdlg39RDs&quot;</span></span><br><span class="line">x-powered-by: Express</span><br><span class="line">x-ratelimit-limit: <span class="number">50</span>;w=<span class="number">60</span></span><br><span class="line">x-ratelimit-remaining: <span class="number">46</span></span><br><span class="line">x-ratelimit-reset: <span class="number">36.851</span></span><br><span class="line">x-request-id: F2V+YfUeIdME4uu51sLD</span><br><span class="line">x-tenant-id: <span class="number">1</span>db8c05a<span class="number">-9790</span><span class="number">-4035</span><span class="number">-83b</span>a-d63344b95702</span><br></pre></td></tr></table></figure><h2 id="æœ€ç»ˆæ•ˆæœ"><a href="#æœ€ç»ˆæ•ˆæœ" class="headerlink" title="æœ€ç»ˆæ•ˆæœ"></a>æœ€ç»ˆæ•ˆæœ</h2><p><img src="/2023/06/04/cx-lvgl-6/IMG_20230605_004558.jpg" alt="IMG_20230605_004558"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;åŠŸèƒ½&quot;&gt;&lt;a href=&quot;#åŠŸèƒ½&quot; class=&quot;headerlink&quot; title=&quot;åŠŸèƒ½&quot;&gt;&lt;/a&gt;åŠŸèƒ½&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;ä¸»ç•Œé¢ UI è®¾è®¡ä»¥åŠç§»æ¤&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;ä»£ç &quot;&gt;&lt;a href=&quot;#ä»£ç &quot;</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>ESP32 LVGLï¼ˆ5ï¼‰</title>
    <link href="http://example.com/2023/06/01/cx-lvgl-5/"/>
    <id>http://example.com/2023/06/01/cx-lvgl-5/</id>
    <published>2023-06-01T14:46:56.002Z</published>
    <updated>2023-06-01T15:46:35.683Z</updated>
    
    <content type="html"><![CDATA[<h2 id="åŠŸèƒ½"><a href="#åŠŸèƒ½" class="headerlink" title="åŠŸèƒ½"></a>åŠŸèƒ½</h2><blockquote><ol><li>sk6812 å½©ç¯æµ‹è¯•ã€‚</li><li>jq8900 æµ‹è¯•ã€‚</li></ol></blockquote><h2 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h2><p>å‚è€ƒäº†<a href="https://blog.csdn.net/qq_53092944?type=blog">æ£‰èŠ±ç³–æ°¸è¿œæ»´ç¥</a>åšä¸»çš„æ–‡ç« <a href="https://blog.csdn.net/qq_53092944/article/details/130182708">ESP32é©±åŠ¨JQ8900è¯­éŸ³æ¨¡å—</a>ã€‚</p><p>åˆšå¼€å§‹æµ‹è¯• JQ8900 ç”±å•ç‰‡æœºå•çº¿é€šä¿¡çš„æ—¶å€™å…¨æ˜¯å™ªéŸ³ï¼Œå£°éŸ³å‡ ä¹å¬ä¸è§â€¦â€¦ç¡äº†ä¸€è§‰èµ·æ¥å°±ä»€ä¹ˆéƒ½æ­£å¸¸äº†ğŸ˜¢ğŸ˜¢ğŸ˜¢â€¦â€¦</p><h3 id="SK6812"><a href="#SK6812" class="headerlink" title="SK6812"></a>SK6812</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;Arduino.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;FastLED.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> LED_PIN     13</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> NUM_LEDS    1</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> BRIGHTNESS  50</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> LED_TYPE    SK6812</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> COLOR_ORDER GRB</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> UPDATES_PER_SECOND 100</span></span><br><span class="line"></span><br><span class="line">CRGB leds[NUM_LEDS];<span class="comment">// å»ºç«‹å…‰å¸¦leds</span></span><br><span class="line">CRGBPalette16 currentPalette;</span><br><span class="line">TBlendType    currentBlending;</span><br><span class="line"></span><br><span class="line"><span class="keyword">extern</span> CRGBPalette16 myRedWhiteBluePalette;</span><br><span class="line"><span class="keyword">extern</span> <span class="type">const</span> TProgmemPalette16 myRedWhiteBluePalette_p PROGMEM;</span><br><span class="line"></span><br><span class="line"><span class="comment">// This function fills the palette with totally random colors.</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">SetupTotallyRandomPalette</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>( <span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">16</span>; i++) &#123;</span><br><span class="line">        currentPalette[i] = <span class="built_in">CHSV</span>( <span class="built_in">random8</span>(), <span class="number">255</span>, <span class="built_in">random8</span>());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// This function sets up a palette of black and white stripes,</span></span><br><span class="line"><span class="comment">// using code.  Since the palette is effectively an array of</span></span><br><span class="line"><span class="comment">// sixteen CRGB colors, the various fill_* functions can be used</span></span><br><span class="line"><span class="comment">// to set them up.</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">SetupBlackAndWhiteStripedPalette</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// &#x27;black out&#x27; all 16 palette entries...</span></span><br><span class="line">    <span class="built_in">fill_solid</span>( currentPalette, <span class="number">16</span>, CRGB::Black);</span><br><span class="line">    <span class="comment">// and set every fourth one to white.</span></span><br><span class="line">    currentPalette[<span class="number">0</span>] = CRGB::White;</span><br><span class="line">    currentPalette[<span class="number">4</span>] = CRGB::White;</span><br><span class="line">    currentPalette[<span class="number">8</span>] = CRGB::White;</span><br><span class="line">    currentPalette[<span class="number">12</span>] = CRGB::White;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// This function sets up a palette of purple and green stripes.</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">SetupPurpleAndGreenPalette</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    CRGB purple = <span class="built_in">CHSV</span>( HUE_PURPLE, <span class="number">255</span>, <span class="number">255</span>);</span><br><span class="line">    CRGB green  = <span class="built_in">CHSV</span>( HUE_GREEN, <span class="number">255</span>, <span class="number">255</span>);</span><br><span class="line">    CRGB black  = CRGB::Black;</span><br><span class="line">    </span><br><span class="line">    currentPalette = <span class="built_in">CRGBPalette16</span>(</span><br><span class="line">                                   green,  green,  black,  black,</span><br><span class="line">                                   purple, purple, black,  black,</span><br><span class="line">                                   green,  green,  black,  black,</span><br><span class="line">                                   purple, purple, black,  black );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// This example shows how to set up a static color palette</span></span><br><span class="line"><span class="comment">// which is stored in PROGMEM (flash), which is almost always more</span></span><br><span class="line"><span class="comment">// plentiful than RAM.  A static PROGMEM palette like this</span></span><br><span class="line"><span class="comment">// takes up 64 bytes of flash.</span></span><br><span class="line"><span class="type">const</span> TProgmemPalette16 myRedWhiteBluePalette_p PROGMEM =</span><br><span class="line">&#123;</span><br><span class="line">    CRGB::Red,</span><br><span class="line">    CRGB::Gray, <span class="comment">// &#x27;white&#x27; is too bright compared to red and blue</span></span><br><span class="line">    CRGB::Blue,</span><br><span class="line">    CRGB::Black,</span><br><span class="line">    </span><br><span class="line">    CRGB::Red,</span><br><span class="line">    CRGB::Gray,</span><br><span class="line">    CRGB::Blue,</span><br><span class="line">    CRGB::Black,</span><br><span class="line">    </span><br><span class="line">    CRGB::Red,</span><br><span class="line">    CRGB::Red,</span><br><span class="line">    CRGB::Gray,</span><br><span class="line">    CRGB::Gray,</span><br><span class="line">    CRGB::Blue,</span><br><span class="line">    CRGB::Blue,</span><br><span class="line">    CRGB::Black,</span><br><span class="line">    CRGB::Black</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">FillLEDsFromPaletteColors</span><span class="params">( <span class="type">uint8_t</span> colorIndex)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">uint8_t</span> brightness = <span class="number">255</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span>( <span class="type">int</span> i = <span class="number">0</span>; i &lt; NUM_LEDS; i++) &#123;</span><br><span class="line">        leds[i] = <span class="built_in">ColorFromPalette</span>( currentPalette, colorIndex, brightness, currentBlending);</span><br><span class="line">        colorIndex += <span class="number">3</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// There are several different palettes of colors demonstrated here.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// FastLED provides several &#x27;preset&#x27; palettes: RainbowColors_p, RainbowStripeColors_p,</span></span><br><span class="line"><span class="comment">// OceanColors_p, CloudColors_p, LavaColors_p, ForestColors_p, and PartyColors_p.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// Additionally, you can manually define your own color palettes, or you can write</span></span><br><span class="line"><span class="comment">// code that creates color palettes on the fly.  All are shown here.</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">ChangePalettePeriodically</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">uint8_t</span> secondHand = (<span class="built_in">millis</span>() / <span class="number">1000</span>) % <span class="number">60</span>;</span><br><span class="line">    <span class="type">static</span> <span class="type">uint8_t</span> lastSecond = <span class="number">99</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span>( lastSecond != secondHand) &#123;</span><br><span class="line">        lastSecond = secondHand;</span><br><span class="line">        <span class="keyword">if</span>( secondHand ==  <span class="number">0</span>)  &#123; currentPalette = RainbowColors_p;         currentBlending = LINEARBLEND; &#125;</span><br><span class="line">        <span class="keyword">if</span>( secondHand == <span class="number">10</span>)  &#123; currentPalette = RainbowStripeColors_p;   currentBlending = NOBLEND;  &#125;</span><br><span class="line">        <span class="keyword">if</span>( secondHand == <span class="number">15</span>)  &#123; currentPalette = RainbowStripeColors_p;   currentBlending = LINEARBLEND; &#125;</span><br><span class="line">        <span class="keyword">if</span>( secondHand == <span class="number">20</span>)  &#123; <span class="built_in">SetupPurpleAndGreenPalette</span>();             currentBlending = LINEARBLEND; &#125;</span><br><span class="line">        <span class="keyword">if</span>( secondHand == <span class="number">25</span>)  &#123; <span class="built_in">SetupTotallyRandomPalette</span>();              currentBlending = LINEARBLEND; &#125;</span><br><span class="line">        <span class="keyword">if</span>( secondHand == <span class="number">30</span>)  &#123; <span class="built_in">SetupBlackAndWhiteStripedPalette</span>();       currentBlending = NOBLEND; &#125;</span><br><span class="line">        <span class="keyword">if</span>( secondHand == <span class="number">35</span>)  &#123; <span class="built_in">SetupBlackAndWhiteStripedPalette</span>();       currentBlending = LINEARBLEND; &#125;</span><br><span class="line">        <span class="keyword">if</span>( secondHand == <span class="number">40</span>)  &#123; currentPalette = CloudColors_p;           currentBlending = LINEARBLEND; &#125;</span><br><span class="line">        <span class="keyword">if</span>( secondHand == <span class="number">45</span>)  &#123; currentPalette = PartyColors_p;           currentBlending = LINEARBLEND; &#125;</span><br><span class="line">        <span class="keyword">if</span>( secondHand == <span class="number">50</span>)  &#123; currentPalette = myRedWhiteBluePalette_p; currentBlending = NOBLEND;  &#125;</span><br><span class="line">        <span class="keyword">if</span>( secondHand == <span class="number">55</span>)  &#123; currentPalette = myRedWhiteBluePalette_p; currentBlending = LINEARBLEND; &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">setup</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">delay</span>( <span class="number">1000</span> ); <span class="comment">// power-up safety delay</span></span><br><span class="line">    <span class="comment">// Serial.begin(115200);</span></span><br><span class="line">    FastLED.<span class="built_in">addLeds</span>&lt;LED_TYPE, LED_PIN, COLOR_ORDER&gt;(leds, NUM_LEDS).<span class="built_in">setCorrection</span>( TypicalLEDStrip );</span><br><span class="line">    FastLED.<span class="built_in">setBrightness</span>(  BRIGHTNESS );</span><br><span class="line">    </span><br><span class="line">    currentPalette = RainbowColors_p;</span><br><span class="line">    currentBlending = LINEARBLEND;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">loop</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">ChangePalettePeriodically</span>();</span><br><span class="line">    Serial.<span class="built_in">println</span>(<span class="number">123</span>);</span><br><span class="line">    <span class="type">static</span> <span class="type">uint8_t</span> startIndex = <span class="number">0</span>;</span><br><span class="line">    startIndex = startIndex + <span class="number">1</span>; <span class="comment">/* motion speed */</span></span><br><span class="line">    </span><br><span class="line">    <span class="built_in">FillLEDsFromPaletteColors</span>( startIndex);</span><br><span class="line">    </span><br><span class="line">    FastLED.<span class="built_in">show</span>();</span><br><span class="line">    FastLED.<span class="built_in">delay</span>(<span class="number">1000</span> / UPDATES_PER_SECOND);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="JQ8900"><a href="#JQ8900" class="headerlink" title="JQ8900"></a>JQ8900</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">demo10_my_timer</span><span class="params">(<span class="type">lv_timer_t</span> *timer)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    I2C_BM8563_TimeTypeDef timeStruct;</span><br><span class="line">    I2C_BM8563_DateTypeDef dateStruct;</span><br><span class="line">    rtc.<span class="built_in">getTime</span>(&amp;timeStruct);</span><br><span class="line">    rtc.<span class="built_in">getDate</span>(&amp;dateStruct);</span><br><span class="line"> </span><br><span class="line">    <span class="type">static</span> <span class="type">const</span> <span class="type">char</span> *week_day[<span class="number">7</span>] = &#123;<span class="string">&quot;Sunday&quot;</span>, <span class="string">&quot;Monday&quot;</span>, <span class="string">&quot;Tuesday&quot;</span>, <span class="string">&quot;Wednesday&quot;</span>, <span class="string">&quot;Thursday&quot;</span>, <span class="string">&quot;Friday&quot;</span>, <span class="string">&quot;Saturday&quot;</span>&#125;;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> year = dateStruct.year;</span><br><span class="line">    <span class="type">int</span> month = dateStruct.month;</span><br><span class="line">    <span class="type">int</span> day = dateStruct.date;</span><br><span class="line">    <span class="type">int</span> weekday = dateStruct.weekDay;</span><br><span class="line">    <span class="type">int</span> hour = timeStruct.hours;</span><br><span class="line">    <span class="type">int</span> minutes = timeStruct.minutes;</span><br><span class="line">    <span class="type">int</span> second = timeStruct.seconds;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (timer != <span class="literal">NULL</span> &amp;&amp; timer-&gt;user_data != <span class="literal">NULL</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">lv_clock_t</span> *clock = (<span class="type">lv_clock_t</span> *)(timer-&gt;user_data);</span><br><span class="line">        <span class="keyword">if</span> (clock-&gt;time_label != <span class="literal">NULL</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">lv_label_set_text_fmt</span>(clock-&gt;time_label, <span class="string">&quot;%02d:%02d:%02d&quot;</span>, hour, minutes, second);</span><br><span class="line">            <span class="built_in">lv_obj_align_to</span>(clock-&gt;time_label, <span class="built_in">lv_obj_get_parent</span>(clock-&gt;time_label), LV_ALIGN_CENTER, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (clock-&gt;date_label != <span class="literal">NULL</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">lv_label_set_text_fmt</span>(clock-&gt;date_label, <span class="string">&quot;%d-%02d-%02d&quot;</span>, year, month, day);</span><br><span class="line">            <span class="built_in">lv_obj_align_to</span>(clock-&gt;date_label, <span class="built_in">lv_obj_get_parent</span>(clock-&gt;date_label), LV_ALIGN_TOP_MID, <span class="number">2</span>, <span class="number">0</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (clock-&gt;weekday_label != <span class="literal">NULL</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">lv_label_set_text_fmt</span>(clock-&gt;weekday_label, <span class="string">&quot;%s&quot;</span>, week_day[weekday]);</span><br><span class="line">            <span class="built_in">lv_obj_align_to</span>(clock-&gt;weekday_label, <span class="built_in">lv_obj_get_parent</span>(clock-&gt;weekday_label), LV_ALIGN_BOTTOM_MID, <span class="number">-2</span>, <span class="number">0</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æœ€ç»ˆæ•ˆæœ"><a href="#æœ€ç»ˆæ•ˆæœ" class="headerlink" title="æœ€ç»ˆæ•ˆæœ"></a>æœ€ç»ˆæ•ˆæœ</h2><p><img src="/2023/06/01/cx-lvgl-5/image-20230601234606013.png" alt="image-20230601234606013"></p><p><img src="/2023/06/01/cx-lvgl-5/image-20230601234614757.png" alt="image-20230601234614757"></p><p><img src="/2023/06/01/cx-lvgl-5/image-20230601234625808.png" alt="image-20230601234625808"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;åŠŸèƒ½&quot;&gt;&lt;a href=&quot;#åŠŸèƒ½&quot; class=&quot;headerlink&quot; title=&quot;åŠŸèƒ½&quot;&gt;&lt;/a&gt;åŠŸèƒ½&lt;/h2&gt;&lt;blockquote&gt;
&lt;ol&gt;
&lt;li&gt;sk6812 å½©ç¯æµ‹è¯•ã€‚&lt;/li&gt;
&lt;li&gt;jq8900 æµ‹è¯•ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;/block</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>ESP32 LVGLï¼ˆ0ï¼‰</title>
    <link href="http://example.com/2023/06/01/cx-lvgl-0/"/>
    <id>http://example.com/2023/06/01/cx-lvgl-0/</id>
    <published>2023-06-01T14:43:20.768Z</published>
    <updated>2023-06-01T15:21:17.753Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å†…å®¹"><a href="#å†…å®¹" class="headerlink" title="å†…å®¹"></a>å†…å®¹</h2><blockquote><p>ä¸‡å¹´å†ç¡¬ä»¶éƒ¨åˆ†ã€‚</p></blockquote><p>è·¯é€”åå·ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­</p><h2 id="åˆç‰ˆ"><a href="#åˆç‰ˆ" class="headerlink" title="åˆç‰ˆ"></a>åˆç‰ˆ</h2><p><img src="/2023/06/01/cx-lvgl-0/image-20230601231421226.png" alt="image-20230601231421226"></p><p><strong>ä¹‹å‰æœªè€ƒè™‘åˆ°çš„é—®é¢˜</strong></p><blockquote><ol><li>FPCæ’åº§å¤ªéš¾ç„Šäº†ğŸ¥²ğŸ¥²ğŸ¥²ï¼Œç¨å¾®å¤šä¸€ç‚¹é”¡å°±ä¼šè¿é”¡ï¼Œå¹¶ä¸”<strong>æ€ä¹ˆåˆ®ä¸ä¸‹æ¥å•Š</strong>ğŸ˜­ğŸ˜­ğŸ˜­ï¼Œæ€ä¹ˆåˆ®éƒ½åˆ®ä¸ä¸‹æ¥</li><li>LVGL æ¡†æ¶ç¡®å®ä¸éš¾å­¦ï¼Œä½†æ˜¯ä¸ºä»€ä¹ˆç°æœ‰ç§»æ¤å¥½çš„é©±åŠ¨æ˜¯<strong>åŸºäº IDF</strong> çš„å•ŠğŸ˜­ğŸ˜­ğŸ˜­ï¼Œå¯¹äºåªä¼š Arduino æ¡†æ¶çš„èœğŸ¶ä»£ç å®Œå…¨çœ‹ä¸æ‡‚å•ŠğŸ˜­ğŸ˜­ğŸ˜­</li><li>ä»é›¶å¼€å§‹ç§»æ¤è¿™ä¸ªè€é©±åŠ¨åˆ° Arduino æ¡†æ¶éš¾åº¦å¤ªå¤§äº†å“‡ğŸ˜­ğŸ˜­ğŸ˜­</li></ol></blockquote><p>æœ€ç»ˆé€‰æ‹©å»æ‰å±å¹•éƒ¨åˆ†ï¼Œé€‰æ‹©ä½¿ç”¨ç°æœ‰çš„å±å¹•æ¨¡å—ï¼Œå¹¶ä¸”ä¹Ÿæœ‰é…ç½®å¥½çš„åŸºäº Arduino æ¡†æ¶çš„ LVGL ä»£ç </p><h2 id="V3-0ç‰ˆæœ¬"><a href="#V3-0ç‰ˆæœ¬" class="headerlink" title="V3.0ç‰ˆæœ¬"></a>V3.0ç‰ˆæœ¬</h2><p><img src="/2023/06/01/cx-lvgl-0/IMG_20230601_225105.jpg" alt="IMG_20230601_225105"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;å†…å®¹&quot;&gt;&lt;a href=&quot;#å†…å®¹&quot; class=&quot;headerlink&quot; title=&quot;å†…å®¹&quot;&gt;&lt;/a&gt;å†…å®¹&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;ä¸‡å¹´å†ç¡¬ä»¶éƒ¨åˆ†ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;è·¯é€”åå·ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­ï¿½</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>ESP32 LVGLï¼ˆ4ï¼‰</title>
    <link href="http://example.com/2023/05/31/cx-lvgl-4/"/>
    <id>http://example.com/2023/05/31/cx-lvgl-4/</id>
    <published>2023-05-31T07:49:07.109Z</published>
    <updated>2023-06-03T04:37:12.397Z</updated>
    
    <content type="html"><![CDATA[<h2 id="åŠŸèƒ½"><a href="#åŠŸèƒ½" class="headerlink" title="åŠŸèƒ½"></a>åŠŸèƒ½</h2><blockquote><ol><li>æ©æ™ºæµ¦ Gui Guider + Platformio + ESP32S3 ç§»æ¤æµ‹è¯•</li><li>ä»¥åŠ LVGL ä¼˜åŒ–</li></ol></blockquote><h2 id="UI-ç§»æ¤"><a href="#UI-ç§»æ¤" class="headerlink" title="UI ç§»æ¤"></a>UI ç§»æ¤</h2><h3 id="1-è®¾è®¡-UI-å¹¶å¯¼å‡ºä»£ç "><a href="#1-è®¾è®¡-UI-å¹¶å¯¼å‡ºä»£ç " class="headerlink" title="1.è®¾è®¡ UI å¹¶å¯¼å‡ºä»£ç "></a>1.è®¾è®¡ UI å¹¶å¯¼å‡ºä»£ç </h3><p><img src="/2023/05/31/cx-lvgl-4/image-20230531155148205.png" alt="image-20230531155148205"></p><p><img src="/2023/05/31/cx-lvgl-4/image-20230531155421144.png" alt="image-20230531155421144"></p><p><img src="/2023/05/31/cx-lvgl-4/image-20230531155508332.png" alt="image-20230531155508332"></p><h3 id="2-ç§»æ¤"><a href="#2-ç§»æ¤" class="headerlink" title="2.ç§»æ¤"></a>2.ç§»æ¤</h3><p>1.åœ¨jsonæ–‡ä»¶é‡Œæ·»åŠ å¤´æ–‡ä»¶è·¯å¾„ï¼Œæ³¨æ„ path å’Œ includePath éƒ½è¦æ·»åŠ </p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;$&#123;workspaceFolder&#125;/**&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="string">&quot;E:/Files/Projects/CXCollege/hardware/Firmware/ESP32-S3-LVGL/ESP32-S3-LVGL-PIO-PROJECT-TFT3.5-ST7796U-CPT/lib/MyUI/custom&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="string">&quot;E:/Files/Projects/CXCollege/hardware/Firmware/ESP32-S3-LVGL/ESP32-S3-LVGL-PIO-PROJECT-TFT3.5-ST7796U-CPT/lib/MyUI/generated&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="string">&quot;E:/Files/Projects/CXCollege/hardware/Firmware/ESP32-S3-LVGL/ESP32-S3-LVGL-PIO-PROJECT-TFT3.5-ST7796U-CPT/lib/MyUI/generated/guider_fonts&quot;</span><span class="punctuation">,</span></span><br></pre></td></tr></table></figure><p>2.MYUI æ–‡ä»¶ä¸‹æ·»åŠ  library.json </p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;MYUI&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;keywords&quot;</span><span class="punctuation">:</span> <span class="string">&quot;myui&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;myui des&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;1.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;authors&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Bsgbsg7&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;licence&quot;</span><span class="punctuation">:</span> <span class="string">&quot;MIT&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;frameworks&quot;</span><span class="punctuation">:</span> <span class="string">&quot;arduino&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;platforms&quot;</span><span class="punctuation">:</span> <span class="string">&quot;espressif32&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;build&quot;</span> <span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;unflags&quot;</span><span class="punctuation">:</span> <span class="string">&quot;-std=gnu++11&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;flags&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">         <span class="string">&quot;-std=c99&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;-I custom&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;-I generated&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;-I generated/guider_customer_fonts&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;-I generated/guider_fonts&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;-I generated/images&quot;</span></span><br><span class="line">      <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;srcFilter&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="string">&quot;+&lt;*.c&gt;&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;+&lt;custom/*.c&gt;&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;+&lt;generated/*.c&gt;&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;+&lt;generated/guider_customer_fonts/*.c&gt;&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;+&lt;generated/guider_fonts/*.c&gt;&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;+&lt;generated/images/*.c&gt;&quot;</span></span><br><span class="line">      <span class="punctuation">]</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>3.å°† LV_VER_RES_MAX æ›¿æ¢ä¸º LV_VER_RESï¼ŒLV_HOR_RES_MAX æ›¿æ¢ä¸º LV_HOR_RES</p><h2 id="ä¼˜åŒ–"><a href="#ä¼˜åŒ–" class="headerlink" title="ä¼˜åŒ–"></a>ä¼˜åŒ–</h2><p>å‚è€ƒåšä¸»<a href="https://space.bilibili.com/8175771">é‡å›æ¡ƒèŠ±æº</a>çš„ã€Š<a href="https://www.bilibili.com/read/cv17894963/">LVGLæ˜¾ç¤ºä¼˜åŒ–â€”åŸºæœ¬ä¼˜åŒ–</a>ã€‹</p><h3 id="1-ä¿®æ”¹å¸§ç‡"><a href="#1-ä¿®æ”¹å¸§ç‡" class="headerlink" title="1.ä¿®æ”¹å¸§ç‡"></a>1.ä¿®æ”¹å¸§ç‡</h3><p>LVGLæ˜¯æœ‰ä¸€ä¸ªå¸§ç‡åˆ·æ–°å‘¨æœŸçš„å®å®šä¹‰ï¼Œåœ¨lv_conf.hé‡Œã€‚LVGLä¼šé€šè¿‡LVGLå†…éƒ¨çš„tickï¼Œå®šæ—¶å»åˆ·å±å¹•ï¼Œä¹Ÿå°±æ˜¯è¯´è¯¥å®å®šä¹‰é™å®šäº†LVGLåˆ·å±å¸§ç‡çš„ä¸Šé™ï¼Œé»˜è®¤æ»¡å¸§33å¸§ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> LV_DISP_DEF_REFR_PERIOD 30 /[ms]/</span></span><br></pre></td></tr></table></figure><p>æ”¹æˆ10msåˆ·æ–°ä¸€æ¬¡ï¼Œæ»¡å¸§100å¸§ã€‚é¡ºæ‰‹å†æŠŠè¾“å…¥è®¾å¤‡è¯»å–å‘¨æœŸä¹Ÿæ”¹æˆ10msã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*Default display refresh period. LVG will redraw changed areas with this period time*/</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> LV_DISP_DEF_REFR_PERIOD 10      <span class="comment">/*[ms]*/</span></span></span><br><span class="line"><span class="comment">/*Input device read period in milliseconds*/</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> LV_INDEV_DEF_READ_PERIOD 10     <span class="comment">/*[ms]*/</span></span></span><br></pre></td></tr></table></figure><h2 id="æœ€ç»ˆæ•ˆæœ"><a href="#æœ€ç»ˆæ•ˆæœ" class="headerlink" title="æœ€ç»ˆæ•ˆæœ"></a>æœ€ç»ˆæ•ˆæœ</h2><p><img src="/2023/05/31/cx-lvgl-4/image-20230603123110696.png" alt="image-20230603123110696"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;åŠŸèƒ½&quot;&gt;&lt;a href=&quot;#åŠŸèƒ½&quot; class=&quot;headerlink&quot; title=&quot;åŠŸèƒ½&quot;&gt;&lt;/a&gt;åŠŸèƒ½&lt;/h2&gt;&lt;blockquote&gt;
&lt;ol&gt;
&lt;li&gt;æ©æ™ºæµ¦ Gui Guider + Platformio + ESP32S3 ç§»æ¤æµ‹è¯•&lt;/li&gt;
&lt;li</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>ESP32 LVGLï¼ˆ3ï¼‰</title>
    <link href="http://example.com/2023/05/31/cx-lvgl-3/"/>
    <id>http://example.com/2023/05/31/cx-lvgl-3/</id>
    <published>2023-05-30T16:19:13.579Z</published>
    <updated>2023-06-01T14:43:54.701Z</updated>
    
    <content type="html"><![CDATA[<h2 id="åŠŸèƒ½"><a href="#åŠŸèƒ½" class="headerlink" title="åŠŸèƒ½"></a>åŠŸèƒ½</h2><blockquote><ol><li>mq2 æ¨¡å—æµ‹è¯•</li><li>esp32s3 è·å– mq2 æ¨¡å—æ•°æ®ï¼Œå¹¶ä¸”ä½¿ç”¨ LVGLæ˜¾ç¤ºã€‚</li></ol></blockquote><h2 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h2><p>ä½¿ç”¨æœ€åŸºç¡€çš„ digitalRead() ä»¥åŠ analogRead() å°±å¯ä»¥è¯»å–æ•°æ®ã€‚</p><h3 id="å˜é‡å®šä¹‰"><a href="#å˜é‡å®šä¹‰" class="headerlink" title="å˜é‡å®šä¹‰"></a>å˜é‡å®šä¹‰</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> smokePin 5</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> analogPin 12</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">struct</span> <span class="title class_">_lv_mq2</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">lv_obj_t</span> *digitalNum; <span class="comment">// æ—¶é—´æ ‡ç­¾</span></span><br><span class="line">    <span class="type">lv_obj_t</span> *analogNum;    <span class="comment">// æ—¥æœŸæ ‡ç­¾</span></span><br><span class="line">&#125; <span class="type">lv_mq2_t</span>;</span><br></pre></td></tr></table></figure><h3 id="UIè®¾è®¡"><a href="#UIè®¾è®¡" class="headerlink" title="UIè®¾è®¡"></a>UIè®¾è®¡</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">demo12</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">static</span> <span class="type">lv_style_t</span> date_time_clock_style;                         <span class="comment">// æœ€å¤–å±‚å¯¹è±¡çš„æ ·å¼</span></span><br><span class="line">    <span class="built_in">lv_style_reset</span>(&amp;date_time_clock_style);                          <span class="comment">// é‡ç½®æ ·å¼</span></span><br><span class="line">    <span class="built_in">lv_style_init</span>(&amp;date_time_clock_style);                           <span class="comment">// åˆå§‹åŒ–æ ·å¼</span></span><br><span class="line">    <span class="built_in">lv_style_set_radius</span>(&amp;date_time_clock_style, <span class="number">5</span>);                  <span class="comment">// è®¾ç½®æ ·å¼åœ†è§’</span></span><br><span class="line">    <span class="built_in">lv_style_set_bg_opa</span>(&amp;date_time_clock_style, LV_OPA_20);          <span class="comment">// è®¾ç½®æ ·å¼èƒŒæ™¯é€æ˜åº¦</span></span><br><span class="line">    <span class="built_in">lv_style_set_border_width</span>(&amp;date_time_clock_style, <span class="number">0</span>);            <span class="comment">// è®¾ç½®æ ·å¼è¾¹æ¡†å®½åº¦</span></span><br><span class="line">    <span class="built_in">lv_style_set_bg_color</span>(&amp;date_time_clock_style, <span class="built_in">lv_color_white</span>()); <span class="comment">// è®¾ç½®æ ·å¼èƒŒæ™¯é¢œè‰²ï¼Œç™½è‰²</span></span><br><span class="line">    <span class="built_in">lv_style_set_pad_left</span>(&amp;date_time_clock_style, <span class="number">1</span>);                <span class="comment">// è®¾ç½®æ ·å¼å·¦è¾¹paddingå¡«å……å®½åº¦</span></span><br><span class="line">    <span class="built_in">lv_style_set_pad_right</span>(&amp;date_time_clock_style, <span class="number">1</span>);               <span class="comment">// è®¾ç½®æ ·å¼å³è¾¹paddingå¡«å……å®½åº¦</span></span><br><span class="line">    <span class="built_in">lv_style_set_pad_top</span>(&amp;date_time_clock_style, <span class="number">0</span>);                 <span class="comment">// è®¾ç½®æ ·å¼é¡¶éƒ¨paddingå¡«å……å®½åº¦</span></span><br><span class="line">    <span class="built_in">lv_style_set_pad_bottom</span>(&amp;date_time_clock_style, <span class="number">0</span>);              <span class="comment">// è®¾ç½®æ ·å¼åº•éƒ¨paddingå¡«å……å®½åº¦</span></span><br><span class="line"></span><br><span class="line">    <span class="type">static</span> <span class="type">lv_style_t</span> time_style; <span class="comment">// æ—¶é—´å¯¹è±¡æ ·å¼</span></span><br><span class="line">    <span class="built_in">lv_style_reset</span>(&amp;time_style);</span><br><span class="line">    <span class="built_in">lv_style_init</span>(&amp;time_style);</span><br><span class="line">    <span class="built_in">lv_style_set_bg_opa</span>(&amp;time_style, LV_OPA_COVER);</span><br><span class="line">    <span class="built_in">lv_style_set_border_width</span>(&amp;time_style, <span class="number">0</span>);</span><br><span class="line">    <span class="built_in">lv_style_set_radius</span>(&amp;time_style, <span class="number">5</span>);</span><br><span class="line">    <span class="built_in">lv_style_set_bg_color</span>(&amp;time_style, <span class="built_in">lv_palette_main</span>(LV_PALETTE_BLUE));</span><br><span class="line">    <span class="built_in">lv_style_set_pad_left</span>(&amp;time_style, <span class="number">0</span>);</span><br><span class="line">    <span class="built_in">lv_style_set_pad_right</span>(&amp;time_style, <span class="number">0</span>);</span><br><span class="line">    <span class="built_in">lv_style_set_pad_top</span>(&amp;time_style, <span class="number">0</span>);</span><br><span class="line">    <span class="built_in">lv_style_set_pad_bottom</span>(&amp;time_style, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    <span class="type">static</span> <span class="type">lv_style_t</span> time_label_style;                                <span class="comment">// æ—¶é—´æ ‡ç­¾æ ·å¼</span></span><br><span class="line">    <span class="built_in">lv_style_reset</span>(&amp;time_label_style);                                 <span class="comment">// é‡ç½®æ ·å¼</span></span><br><span class="line">    <span class="built_in">lv_style_init</span>(&amp;time_label_style);                                  <span class="comment">// åˆå§‹åŒ–æ ·å¼</span></span><br><span class="line">    <span class="built_in">lv_style_set_text_color</span>(&amp;time_label_style, <span class="built_in">lv_color_white</span>());      <span class="comment">// è®¾ç½®æ ‡ç­¾æ ·å¼æ–‡æœ¬é¢œè‰²</span></span><br><span class="line">    <span class="built_in">lv_style_set_text_font</span>(&amp;time_label_style, &amp;lv_font_montserrat_32); <span class="comment">// è®¾ç½®å­—ä½“é£æ ¼</span></span><br><span class="line">    <span class="built_in">lv_style_set_text_opa</span>(&amp;time_label_style, LV_OPA_COVER);            <span class="comment">// è®¾ç½®å­—ä½“é€æ˜åº¦</span></span><br><span class="line">    <span class="built_in">lv_style_set_bg_opa</span>(&amp;time_label_style, LV_OPA_0);                  <span class="comment">// è®¾ç½®æ ·å¼èƒŒæ™¯é€æ˜åº¦</span></span><br><span class="line"></span><br><span class="line">    <span class="type">lv_obj_t</span> *src = <span class="built_in">lv_obj_create</span>(<span class="built_in">lv_scr_act</span>()); <span class="comment">// åŸºäºå±å¹•åˆ›å»ºæ—¶é—´æ—¥æœŸå¯¹è±¡</span></span><br><span class="line">    <span class="built_in">lv_obj_set_size</span>(src, <span class="number">320</span>, <span class="number">150</span>);</span><br><span class="line">    <span class="built_in">lv_obj_center</span>(src);</span><br><span class="line">    <span class="built_in">lv_obj_add_style</span>(src, &amp;time_style, LV_STATE_DEFAULT);</span><br><span class="line"></span><br><span class="line">    <span class="type">static</span> <span class="type">lv_obj_t</span> *lv_mq2_label = <span class="built_in">lv_label_create</span>(src);                         </span><br><span class="line">    <span class="built_in">lv_obj_add_style</span>(lv_mq2_label, &amp;time_label_style, LV_STATE_DEFAULT); <span class="comment">// ç»™date_objå¯¹è±¡æ·»åŠ æ ·å¼</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">lv_obj_align_to</span>(lv_mq2_label, <span class="built_in">lv_obj_get_parent</span>(lv_mq2_label), LV_ALIGN_CENTER, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    <span class="type">lv_timer_t</span> *task_timer = <span class="built_in">lv_timer_create</span>(demo12_my_timer, <span class="number">2000</span>, (<span class="type">void</span> *)&amp;lv_mq2_label);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å®šæ—¶æ›´æ–°"><a href="#å®šæ—¶æ›´æ–°" class="headerlink" title="å®šæ—¶æ›´æ–°"></a>å®šæ—¶æ›´æ–°</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">demo12_my_timer</span><span class="params">(<span class="type">lv_timer_t</span> *timer)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> mq2Value = <span class="built_in">digitalRead</span>(smokePin);</span><br><span class="line">    <span class="type">int</span> anaValue = <span class="built_in">analogRead</span>(analogPin);</span><br><span class="line">    Serial.<span class="built_in">println</span>(<span class="string">&quot;D0&quot;</span>);</span><br><span class="line">    Serial.<span class="built_in">println</span>(mq2Value);</span><br><span class="line">    Serial.<span class="built_in">println</span>(<span class="string">&quot;ANA&quot;</span>);</span><br><span class="line">    Serial.<span class="built_in">println</span>(anaValue);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (timer != <span class="literal">NULL</span> &amp;&amp; timer-&gt;user_data != <span class="literal">NULL</span>)</span><br><span class="line">    &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">lv_obj_t</span> *mq2_label = (<span class="type">lv_obj_t</span> *)(timer-&gt;user_data);</span><br><span class="line">        <span class="keyword">if</span> (mq2_label != <span class="literal">NULL</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">lv_label_set_text_fmt</span>(mq2_label, <span class="string">&quot;digitalRead: %01d&quot;</span>, mq2Value);</span><br><span class="line">            <span class="built_in">lv_obj_align_to</span>(mq2_label, <span class="built_in">lv_obj_get_parent</span>(mq2_label), LV_ALIGN_CENTER, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ä¿®bug"><a href="#ä¿®bug" class="headerlink" title="ä¿®bug"></a>ä¿®bug</h2><h3 id="1-ä¸»æ§ä¸æ–­é‡å¯"><a href="#1-ä¸»æ§ä¸æ–­é‡å¯" class="headerlink" title="1.ä¸»æ§ä¸æ–­é‡å¯"></a>1.ä¸»æ§ä¸æ–­é‡å¯</h3><p>è®¾è®¡ UI æ—¶å‘ç°å±å¹•é—ªçƒï¼ŒæŸ¥çœ‹ä¸²å£è¾“å‡ºå‘ç°æ˜¯è§¦å‘çœ‹é—¨ç‹—ä¸æ–­é‡å¯ã€‚</p><p>æ­¤ç§é”™è¯¯åŸºæœ¬ä¸Šéƒ½æ˜¯<strong>æŒ‡é’ˆä½¿ç”¨é”™è¯¯</strong>ã€‚</p><p>ä»¥ä¸‹ä¸ºé”™è¯¯ç¤ºä¾‹âŒâŒâŒï¼Œlv_mq2_label å·²ç»æ˜¯ä¸€ä¸ª obj åŸºæœ¬å¯¹è±¡çš„<strong>æŒ‡é’ˆ</strong>ï¼Œä¼ é€’æ—¶ä¸éœ€è¦å†å–åœ°å€ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">static</span> <span class="type">lv_obj_t</span> *lv_mq2_label = <span class="built_in">lv_label_create</span>(src);</span><br><span class="line"><span class="type">lv_timer_t</span> *task_timer = <span class="built_in">lv_timer_create</span>(demo12_my_timer, <span class="number">2000</span>, &amp;lv_mq2_label);</span><br></pre></td></tr></table></figure><p>å»æ‰å–åœ°å€å³å¯æ­£ç¡®è¿è¡Œã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">static</span> <span class="type">lv_obj_t</span> *lv_mq2_label = <span class="built_in">lv_label_create</span>(src);</span><br><span class="line"><span class="type">lv_timer_t</span> *task_timer = <span class="built_in">lv_timer_create</span>(demo12_my_timer, <span class="number">2000</span>, lv_mq2_label);</span><br></pre></td></tr></table></figure><p><strong>å¯¹æ¯”</strong></p><p>æ­¤å¤„å–åœ°å€æ˜¯å› ä¸º lv_dht11 åœ¨å®šä¹‰çš„æ—¶å€™å°±æ˜¯ä¸€ä¸ª<strong>ç»“æ„ä½“</strong>ï¼Œä¸ºäº†æ–¹ä¾¿å®šæ—¶å™¨ä¿®æ”¹æ•°æ®ï¼Œé¿å…å ç”¨è¿‡å¤šå†…å­˜ï¼Œå› æ­¤ä¼ é€’ç”¨æˆ·æ•°æ®æ—¶åº”è¯¥<strong>ä¼ é€’æŒ‡é’ˆ</strong> (void *)&amp;lv_dht11 ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">static</span> <span class="type">lv_dht11_t</span> lv_dht11 = &#123;<span class="number">0</span>&#125;;</span><br><span class="line"><span class="type">lv_timer_t</span> *task_timer = <span class="built_in">lv_timer_create</span>(demo11_my_timer, <span class="number">2000</span>, (<span class="type">void</span> *)&amp;lv_dht11);</span><br></pre></td></tr></table></figure><h2 id="æœ€ç»ˆæ•ˆæœ"><a href="#æœ€ç»ˆæ•ˆæœ" class="headerlink" title="æœ€ç»ˆæ•ˆæœ"></a>æœ€ç»ˆæ•ˆæœ</h2><p><img src="/2023/05/31/cx-lvgl-3/image-20230531005443438.png" alt="image-20230531005443438"></p><p><img src="/2023/05/31/cx-lvgl-3/image-20230531005453640.png" alt="image-20230531005453640"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;åŠŸèƒ½&quot;&gt;&lt;a href=&quot;#åŠŸèƒ½&quot; class=&quot;headerlink&quot; title=&quot;åŠŸèƒ½&quot;&gt;&lt;/a&gt;åŠŸèƒ½&lt;/h2&gt;&lt;blockquote&gt;
&lt;ol&gt;
&lt;li&gt;mq2 æ¨¡å—æµ‹è¯•&lt;/li&gt;
&lt;li&gt;esp32s3 è·å– mq2 æ¨¡å—æ•°æ®ï¼Œå¹¶ä¸”ä½¿ç”¨ LVGLæ˜¾ç¤ºã€‚&lt;</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>ESP32 LVGLï¼ˆ2ï¼‰</title>
    <link href="http://example.com/2023/05/30/cx-lvgl-2/"/>
    <id>http://example.com/2023/05/30/cx-lvgl-2/</id>
    <published>2023-05-30T12:31:58.356Z</published>
    <updated>2023-06-01T14:44:00.913Z</updated>
    
    <content type="html"><![CDATA[<h2 id="åŠŸèƒ½"><a href="#åŠŸèƒ½" class="headerlink" title="åŠŸèƒ½"></a>åŠŸèƒ½</h2><blockquote><ol><li>dht11 æ¨¡å—æµ‹è¯•</li><li>esp32s3 è·å– dht11æ¨¡å—æ•°æ®ï¼Œå¹¶ä¸”ä½¿ç”¨ LVGLæ˜¾ç¤ºã€‚</li></ol></blockquote><h2 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h2><p>è·å–æ•°æ®å‚è€ƒäº†<a href="https://blog.csdn.net/m0_52152690">è«è·–</a>åšä¸»çš„æ–‡ç« ã€Š<a href="https://blog.csdn.net/m0_52152690/article/details/126125455">ESP32+dht11&#x2F;sht30æµ‹æ¸©æ¹¿åº¦(arduinoç¼–ç¨‹)</a>ã€‹ã€‚</p><p>æ”¹bugå‚è€ƒäº†<a href="https://blog.csdn.net/weixin_44684950">ç”°å›­ç‰§å¸ˆ</a>åšä¸»çš„æ–‡ç« ã€Š<a href="https://blog.csdn.net/weixin_44684950/article/details/124426341">LVGL lv_label_set_text_fmt æ˜¾ç¤ºåªæœ‰f</a>ã€‹ã€‚</p><p>æ€»ä½“æ¥è¯´æ€è·¯ç®€å•æ¸…æ™°ï¼Œä½†æ˜¯æ”¹ bug å°è¯•äº†å¾ˆä¹…ğŸ˜­ğŸ˜­ğŸ˜­ã€‚</p><p>UIç•Œé¢åç»­ä»ç„¶éœ€è¦ä¼˜åŒ–ã€‚</p><h3 id="å˜é‡å®šä¹‰"><a href="#å˜é‡å®šä¹‰" class="headerlink" title="å˜é‡å®šä¹‰"></a>å˜é‡å®šä¹‰</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;DHT.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;DHT_U.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> DHTPIN 11</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> DHTTYPE DHT11</span></span><br><span class="line"><span class="function">DHT <span class="title">dht</span><span class="params">(DHTPIN, DHTTYPE)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">struct</span> <span class="title class_">_lv_dht11</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">lv_obj_t</span> *temperature_label; <span class="comment">// æ—¶é—´æ ‡ç­¾</span></span><br><span class="line">    <span class="type">lv_obj_t</span> *humidity_label;    <span class="comment">// æ—¥æœŸæ ‡ç­¾</span></span><br><span class="line">&#125; <span class="type">lv_dht11_t</span>;</span><br></pre></td></tr></table></figure><h3 id="UIè®¾è®¡"><a href="#UIè®¾è®¡" class="headerlink" title="UIè®¾è®¡"></a>UIè®¾è®¡</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">demo11</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    dht.<span class="built_in">begin</span>();</span><br><span class="line"></span><br><span class="line">    <span class="type">static</span> <span class="type">lv_style_t</span> date_time_clock_style;                         <span class="comment">// æœ€å¤–å±‚å¯¹è±¡çš„æ ·å¼</span></span><br><span class="line">    <span class="built_in">lv_style_reset</span>(&amp;date_time_clock_style);                          <span class="comment">// é‡ç½®æ ·å¼</span></span><br><span class="line">    <span class="built_in">lv_style_init</span>(&amp;date_time_clock_style);                           <span class="comment">// åˆå§‹åŒ–æ ·å¼</span></span><br><span class="line">    <span class="built_in">lv_style_set_radius</span>(&amp;date_time_clock_style, <span class="number">5</span>);                  <span class="comment">// è®¾ç½®æ ·å¼åœ†è§’</span></span><br><span class="line">    <span class="built_in">lv_style_set_bg_opa</span>(&amp;date_time_clock_style, LV_OPA_20);          <span class="comment">// è®¾ç½®æ ·å¼èƒŒæ™¯é€æ˜åº¦</span></span><br><span class="line">    <span class="built_in">lv_style_set_border_width</span>(&amp;date_time_clock_style, <span class="number">0</span>);            <span class="comment">// è®¾ç½®æ ·å¼è¾¹æ¡†å®½åº¦</span></span><br><span class="line">    <span class="built_in">lv_style_set_bg_color</span>(&amp;date_time_clock_style, <span class="built_in">lv_color_white</span>()); <span class="comment">// è®¾ç½®æ ·å¼èƒŒæ™¯é¢œè‰²ï¼Œç™½è‰²</span></span><br><span class="line">    <span class="built_in">lv_style_set_pad_left</span>(&amp;date_time_clock_style, <span class="number">1</span>);                <span class="comment">// è®¾ç½®æ ·å¼å·¦è¾¹paddingå¡«å……å®½åº¦</span></span><br><span class="line">    <span class="built_in">lv_style_set_pad_right</span>(&amp;date_time_clock_style, <span class="number">1</span>);               <span class="comment">// è®¾ç½®æ ·å¼å³è¾¹paddingå¡«å……å®½åº¦</span></span><br><span class="line">    <span class="built_in">lv_style_set_pad_top</span>(&amp;date_time_clock_style, <span class="number">0</span>);                 <span class="comment">// è®¾ç½®æ ·å¼é¡¶éƒ¨paddingå¡«å……å®½åº¦</span></span><br><span class="line">    <span class="built_in">lv_style_set_pad_bottom</span>(&amp;date_time_clock_style, <span class="number">0</span>);              <span class="comment">// è®¾ç½®æ ·å¼åº•éƒ¨paddingå¡«å……å®½åº¦</span></span><br><span class="line"></span><br><span class="line">    <span class="type">static</span> <span class="type">lv_style_t</span> time_style; <span class="comment">// æ—¶é—´å¯¹è±¡æ ·å¼</span></span><br><span class="line">    <span class="built_in">lv_style_reset</span>(&amp;time_style);</span><br><span class="line">    <span class="built_in">lv_style_init</span>(&amp;time_style);</span><br><span class="line">    <span class="built_in">lv_style_set_bg_opa</span>(&amp;time_style, LV_OPA_COVER);</span><br><span class="line">    <span class="built_in">lv_style_set_border_width</span>(&amp;time_style, <span class="number">0</span>);</span><br><span class="line">    <span class="built_in">lv_style_set_radius</span>(&amp;time_style, <span class="number">5</span>);</span><br><span class="line">    <span class="built_in">lv_style_set_bg_color</span>(&amp;time_style, <span class="built_in">lv_palette_main</span>(LV_PALETTE_BLUE));</span><br><span class="line">    <span class="built_in">lv_style_set_pad_left</span>(&amp;time_style, <span class="number">0</span>);</span><br><span class="line">    <span class="built_in">lv_style_set_pad_right</span>(&amp;time_style, <span class="number">0</span>);</span><br><span class="line">    <span class="built_in">lv_style_set_pad_top</span>(&amp;time_style, <span class="number">0</span>);</span><br><span class="line">    <span class="built_in">lv_style_set_pad_bottom</span>(&amp;time_style, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    <span class="type">static</span> <span class="type">lv_style_t</span> time_label_style;                                <span class="comment">// æ—¶é—´æ ‡ç­¾æ ·å¼</span></span><br><span class="line">    <span class="built_in">lv_style_reset</span>(&amp;time_label_style);                                 <span class="comment">// é‡ç½®æ ·å¼</span></span><br><span class="line">    <span class="built_in">lv_style_init</span>(&amp;time_label_style);                                  <span class="comment">// åˆå§‹åŒ–æ ·å¼</span></span><br><span class="line">    <span class="built_in">lv_style_set_text_color</span>(&amp;time_label_style, <span class="built_in">lv_color_white</span>());      <span class="comment">// è®¾ç½®æ ‡ç­¾æ ·å¼æ–‡æœ¬é¢œè‰²</span></span><br><span class="line">    <span class="built_in">lv_style_set_text_font</span>(&amp;time_label_style, &amp;lv_font_montserrat_32); <span class="comment">// è®¾ç½®å­—ä½“é£æ ¼</span></span><br><span class="line">    <span class="built_in">lv_style_set_text_opa</span>(&amp;time_label_style, LV_OPA_COVER);            <span class="comment">// è®¾ç½®å­—ä½“é€æ˜åº¦</span></span><br><span class="line">    <span class="built_in">lv_style_set_bg_opa</span>(&amp;time_label_style, LV_OPA_0);                  <span class="comment">// è®¾ç½®æ ·å¼èƒŒæ™¯é€æ˜åº¦</span></span><br><span class="line"></span><br><span class="line">    <span class="type">lv_obj_t</span> *dht11_obj = <span class="built_in">lv_obj_create</span>(<span class="built_in">lv_scr_act</span>()); <span class="comment">// åŸºäºå±å¹•åˆ›å»ºæ—¶é—´æ—¥æœŸå¯¹è±¡</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">lv_obj_set_size</span>(dht11_obj, <span class="number">320</span>, <span class="number">150</span>);</span><br><span class="line">    <span class="built_in">lv_obj_center</span>(dht11_obj);</span><br><span class="line">    <span class="built_in">lv_obj_add_style</span>(dht11_obj, &amp;time_style, LV_STATE_DEFAULT);</span><br><span class="line"></span><br><span class="line">    <span class="type">static</span> <span class="type">lv_dht11_t</span> lv_dht11 = &#123;<span class="number">0</span>&#125;;</span><br><span class="line"></span><br><span class="line">    lv_dht11.temperature_label = <span class="built_in">lv_label_create</span>(dht11_obj);                           <span class="comment">// åŸºäºtime_objå¯¹è±¡åˆ›å»ºæ—¶é—´æ˜¾ç¤ºæ ‡ç­¾å¯¹è±¡ lv_clock.time_label</span></span><br><span class="line">    <span class="built_in">lv_obj_add_style</span>(lv_dht11.temperature_label, &amp;time_label_style, LV_STATE_DEFAULT); <span class="comment">// ç»™å¯¹è±¡ lv_clock.time_labelæ·»åŠ æ ·å¼</span></span><br><span class="line"></span><br><span class="line">    lv_dht11.humidity_label = <span class="built_in">lv_label_create</span>(dht11_obj);                            </span><br><span class="line">    <span class="built_in">lv_obj_add_style</span>(lv_dht11.humidity_label, &amp;time_label_style, LV_STATE_DEFAULT); <span class="comment">// ç»™date_objå¯¹è±¡æ·»åŠ æ ·å¼</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">lv_obj_align_to</span>(lv_dht11.temperature_label, <span class="built_in">lv_obj_get_parent</span>(lv_dht11.temperature_label), LV_ALIGN_TOP_MID, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="built_in">lv_obj_align_to</span>(lv_dht11.humidity_label, <span class="built_in">lv_obj_get_parent</span>(lv_dht11.humidity_label), LV_ALIGN_BOTTOM_MID, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    <span class="type">lv_timer_t</span> *task_timer = <span class="built_in">lv_timer_create</span>(demo11_my_timer, <span class="number">2000</span>, (<span class="type">void</span> *)&amp;lv_dht11);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å®šæ—¶æ›´æ–°"><a href="#å®šæ—¶æ›´æ–°" class="headerlink" title="å®šæ—¶æ›´æ–°"></a>å®šæ—¶æ›´æ–°</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">demo11_my_timer</span><span class="params">(<span class="type">lv_timer_t</span> *timer)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">float</span> humidity = dht.<span class="built_in">readHumidity</span>();</span><br><span class="line">    <span class="type">float</span> temperature = dht.<span class="built_in">readTemperature</span>();</span><br><span class="line">    Serial.<span class="built_in">println</span>(<span class="string">&quot;humidity&quot;</span>);</span><br><span class="line">    Serial.<span class="built_in">println</span>(humidity);</span><br><span class="line">    Serial.<span class="built_in">println</span>(<span class="string">&quot;temperature&quot;</span>);</span><br><span class="line">    Serial.<span class="built_in">println</span>(temperature);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (timer != <span class="literal">NULL</span> &amp;&amp; timer-&gt;user_data != <span class="literal">NULL</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">lv_dht11_t</span> *dht11 = (<span class="type">lv_dht11_t</span> *)(timer-&gt;user_data);</span><br><span class="line">        <span class="keyword">if</span> (dht11-&gt;temperature_label != <span class="literal">NULL</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">lv_label_set_text_fmt</span>(dht11-&gt;temperature_label, <span class="string">&quot;%.2f %RH&quot;</span>, humidity);</span><br><span class="line">            <span class="built_in">lv_obj_align_to</span>(dht11-&gt;temperature_label, <span class="built_in">lv_obj_get_parent</span>(dht11-&gt;temperature_label), LV_ALIGN_CENTER, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (dht11-&gt;humidity_label != <span class="literal">NULL</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">lv_label_set_text_fmt</span>(dht11-&gt;humidity_label, <span class="string">&quot;%.2f Â°C&quot;</span>, temperature);</span><br><span class="line">            <span class="built_in">lv_obj_align_to</span>(dht11-&gt;humidity_label, <span class="built_in">lv_obj_get_parent</span>(dht11-&gt;humidity_label), LV_ALIGN_TOP_MID, <span class="number">2</span>, <span class="number">0</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ä¿®bug"><a href="#ä¿®bug" class="headerlink" title="ä¿®bug"></a>ä¿®bug</h2><h3 id="1-ä¸»æ§ä¸æ–­é‡å¯"><a href="#1-ä¸»æ§ä¸æ–­é‡å¯" class="headerlink" title="1.ä¸»æ§ä¸æ–­é‡å¯"></a>1.ä¸»æ§ä¸æ–­é‡å¯</h3><p>è®¾è®¡ UI æ—¶å‘ç°å±å¹•é—ªçƒï¼ŒæŸ¥çœ‹ä¸²å£è¾“å‡ºå‘ç°æ˜¯è§¦å‘çœ‹é—¨ç‹—ä¸æ–­é‡å¯ã€‚å‘ç°æ˜¯é”™ç”¨äº† lv_obj_create() ã€‚æ­¤å¤„æ˜¯ label æ ‡ç­¾ï¼Œä¿®æ”¹ä¸º lv_label_create() ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//lv_dht11.humidity_label = lv_obj_create(dht11_obj); </span></span><br><span class="line">lv_dht11.humidity_label = <span class="built_in">lv_label_create</span>(dht11_obj); </span><br></pre></td></tr></table></figure><p><img src="/2023/05/30/cx-lvgl-2/image-20230530213215032.png" alt="image-20230530213215032"></p><h3 id="2-LVGL-lv-label-set-text-fmt-æ˜¾ç¤ºåªæœ‰f"><a href="#2-LVGL-lv-label-set-text-fmt-æ˜¾ç¤ºåªæœ‰f" class="headerlink" title="2.LVGL lv_label_set_text_fmt æ˜¾ç¤ºåªæœ‰f"></a>2.LVGL lv_label_set_text_fmt æ˜¾ç¤ºåªæœ‰f</h3><p>ç”¨ LVGL æ˜¾ç¤ºå¸¦æµ®ç‚¹æ•°çš„å¥å­ï¼Œç»“æœå‡ºç°åªæ˜¾ç¤º f ä½†æ˜¯æ²¡æœ‰æ•°å­—çš„ç°è±¡ã€‚éœ€è¦åœ¨ lv_conf.h ä¸­å¯ç”¨ LV_SPRINTF_CUSTOMã€‚</p><p><img src="/2023/05/30/cx-lvgl-2/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA55Sw5Zut54mn5biI,size_20,color_FFFFFF,t_70,g_se,x_16.png" alt="img"></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> LV_SPRINTF_CUSTOM 1</span></span><br></pre></td></tr></table></figure><h2 id="æœ€ç»ˆæ•ˆæœ"><a href="#æœ€ç»ˆæ•ˆæœ" class="headerlink" title="æœ€ç»ˆæ•ˆæœ"></a>æœ€ç»ˆæ•ˆæœ</h2><p><img src="/2023/05/30/cx-lvgl-2/image-20230530213424374.png" alt="image-20230530213424374"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;åŠŸèƒ½&quot;&gt;&lt;a href=&quot;#åŠŸèƒ½&quot; class=&quot;headerlink&quot; title=&quot;åŠŸèƒ½&quot;&gt;&lt;/a&gt;åŠŸèƒ½&lt;/h2&gt;&lt;blockquote&gt;
&lt;ol&gt;
&lt;li&gt;dht11 æ¨¡å—æµ‹è¯•&lt;/li&gt;
&lt;li&gt;esp32s3 è·å– dht11æ¨¡å—æ•°æ®ï¼Œå¹¶ä¸”ä½¿ç”¨ LVGLæ˜¾</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>ESP32 LVGLï¼ˆ1ï¼‰</title>
    <link href="http://example.com/2023/05/30/cx-lvgl-1/"/>
    <id>http://example.com/2023/05/30/cx-lvgl-1/</id>
    <published>2023-05-30T04:47:38.704Z</published>
    <updated>2023-06-01T14:43:42.693Z</updated>
    
    <content type="html"><![CDATA[<h2 id="åŠŸèƒ½"><a href="#åŠŸèƒ½" class="headerlink" title="åŠŸèƒ½"></a>åŠŸèƒ½</h2><blockquote><ol><li>pcf8563æ¨¡å—æµ‹è¯•ã€‚</li><li>esp32s3è”ç½‘æˆæ—¶ï¼Œè‡ªåŠ¨æ ¡å‡†pcf8563æ—¶é’Ÿæ¨¡å—ï¼Œå¹¶ä½¿ç”¨LVGLæ˜¾ç¤ºã€‚</li></ol></blockquote><h2 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h2><p>å‚è€ƒäº†<a href="https://blog.csdn.net/qq981378640">Bob_1993</a>åšä¸»çš„æ–‡ç« <a href="https://blog.csdn.net/qq981378640/article/details/119950998">LVGL8åˆ¶ä½œç®€æ˜“æ—¶é’Ÿ</a>ã€‚</p><p>æ€»ä½“æ¥è¯´æ¯”è¾ƒé¡ºåˆ©ï¼Œé™¤äº†é‡åˆ°å‡ ä¸ªå°bugä¹‹å¤–ğŸ¤£ğŸ¤£ğŸ¤£ã€‚</p><h3 id="å˜é‡å®šä¹‰"><a href="#å˜é‡å®šä¹‰" class="headerlink" title="å˜é‡å®šä¹‰"></a>å˜é‡å®šä¹‰</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;I2C_BM8563.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;WiFi.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// RTC BM8563 I2C port</span></span><br><span class="line"><span class="comment">// I2C pin definition for M5Stick &amp; M5Stick Plus &amp; M5Stack Core2</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> BM8563_I2C_SDA 47</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> BM8563_I2C_SCL 48</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">struct</span> <span class="title class_">_lv_clock</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">lv_obj_t</span> *time_label;    <span class="comment">// æ—¶é—´æ ‡ç­¾</span></span><br><span class="line">    <span class="type">lv_obj_t</span> *date_label;    <span class="comment">// æ—¥æœŸæ ‡ç­¾</span></span><br><span class="line">    <span class="type">lv_obj_t</span> *weekday_label; <span class="comment">// æ˜ŸæœŸæ ‡ç­¾</span></span><br><span class="line">&#125; <span class="type">lv_clock_t</span>;</span><br><span class="line"></span><br><span class="line"><span class="function">I2C_BM8563 <span class="title">rtc</span><span class="params">(I2C_BM8563_DEFAULT_ADDRESS, Wire1)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">char</span> *ntpServer = <span class="string">&quot;ntp.aliyun.com&quot;</span>;</span><br></pre></td></tr></table></figure><h3 id="UIè®¾è®¡"><a href="#UIè®¾è®¡" class="headerlink" title="UIè®¾è®¡"></a>UIè®¾è®¡</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">demo10</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    WiFi.<span class="built_in">begin</span>(<span class="string">&quot;vivoS12&quot;</span>, <span class="string">&quot;7bsgbsg7&quot;</span>); <span class="comment">// Or, Connect to the specified access point</span></span><br><span class="line"></span><br><span class="line">    Serial.<span class="built_in">print</span>(<span class="string">&quot;Connecting to Wi-Fi &quot;</span>);</span><br><span class="line">    <span class="keyword">while</span> (WiFi.<span class="built_in">status</span>() != WL_CONNECTED)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">delay</span>(<span class="number">500</span>);</span><br><span class="line">        Serial.<span class="built_in">print</span>(<span class="string">&quot;.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    Serial.<span class="built_in">println</span>(<span class="string">&quot; CONNECTED&quot;</span>);</span><br><span class="line"></span><br><span class="line">    I2C_BM8563_DateTypeDef dateStruct;</span><br><span class="line">    I2C_BM8563_TimeTypeDef timeStruct;</span><br><span class="line"></span><br><span class="line">    Wire1.<span class="built_in">begin</span>(BM8563_I2C_SDA, BM8563_I2C_SCL);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Init RTC</span></span><br><span class="line">    rtc.<span class="built_in">begin</span>();</span><br><span class="line"></span><br><span class="line">    <span class="built_in">configTime</span>(<span class="number">8</span> * <span class="number">3600</span>, <span class="number">0</span>, ntpServer);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Init I2C</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// Get local time</span></span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">tm</span> timeInfo;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">getLocalTime</span>(&amp;timeInfo))</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// Set RTC time</span></span><br><span class="line">        I2C_BM8563_TimeTypeDef timeStruct;</span><br><span class="line">        timeStruct.hours = timeInfo.tm_hour;</span><br><span class="line">        timeStruct.minutes = timeInfo.tm_min;</span><br><span class="line">        timeStruct.seconds = timeInfo.tm_sec;</span><br><span class="line">        rtc.<span class="built_in">setTime</span>(&amp;timeStruct);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Set RTC Date</span></span><br><span class="line">        I2C_BM8563_DateTypeDef dateStruct;</span><br><span class="line">        dateStruct.weekDay = timeInfo.tm_wday;</span><br><span class="line">        dateStruct.month = timeInfo.tm_mon + <span class="number">1</span>;</span><br><span class="line">        dateStruct.date = timeInfo.tm_mday;</span><br><span class="line">        dateStruct.year = timeInfo.tm_year + <span class="number">1900</span>;</span><br><span class="line">        rtc.<span class="built_in">setDate</span>(&amp;dateStruct);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="type">static</span> <span class="type">lv_style_t</span> date_time_clock_style;                         <span class="comment">// æœ€å¤–å±‚å¯¹è±¡çš„æ ·å¼</span></span><br><span class="line">    <span class="built_in">lv_style_reset</span>(&amp;date_time_clock_style);                          <span class="comment">// é‡ç½®æ ·å¼</span></span><br><span class="line">    <span class="built_in">lv_style_init</span>(&amp;date_time_clock_style);                           <span class="comment">// åˆå§‹åŒ–æ ·å¼</span></span><br><span class="line">    <span class="built_in">lv_style_set_radius</span>(&amp;date_time_clock_style, <span class="number">5</span>);                  <span class="comment">// è®¾ç½®æ ·å¼åœ†è§’</span></span><br><span class="line">    <span class="built_in">lv_style_set_bg_opa</span>(&amp;date_time_clock_style, LV_OPA_20);          <span class="comment">// è®¾ç½®æ ·å¼èƒŒæ™¯é€æ˜åº¦</span></span><br><span class="line">    <span class="built_in">lv_style_set_border_width</span>(&amp;date_time_clock_style, <span class="number">0</span>);            <span class="comment">// è®¾ç½®æ ·å¼è¾¹æ¡†å®½åº¦</span></span><br><span class="line">    <span class="built_in">lv_style_set_bg_color</span>(&amp;date_time_clock_style, <span class="built_in">lv_color_white</span>()); <span class="comment">// è®¾ç½®æ ·å¼èƒŒæ™¯é¢œè‰²ï¼Œç™½è‰²</span></span><br><span class="line">    <span class="built_in">lv_style_set_pad_left</span>(&amp;date_time_clock_style, <span class="number">1</span>);                <span class="comment">// è®¾ç½®æ ·å¼å·¦è¾¹paddingå¡«å……å®½åº¦</span></span><br><span class="line">    <span class="built_in">lv_style_set_pad_right</span>(&amp;date_time_clock_style, <span class="number">1</span>);               <span class="comment">// è®¾ç½®æ ·å¼å³è¾¹paddingå¡«å……å®½åº¦</span></span><br><span class="line">    <span class="built_in">lv_style_set_pad_top</span>(&amp;date_time_clock_style, <span class="number">0</span>);                 <span class="comment">// è®¾ç½®æ ·å¼é¡¶éƒ¨paddingå¡«å……å®½åº¦</span></span><br><span class="line">    <span class="built_in">lv_style_set_pad_bottom</span>(&amp;date_time_clock_style, <span class="number">0</span>);              <span class="comment">// è®¾ç½®æ ·å¼åº•éƒ¨paddingå¡«å……å®½åº¦</span></span><br><span class="line"></span><br><span class="line">    <span class="type">static</span> <span class="type">lv_style_t</span> time_style; <span class="comment">// æ—¶é—´å¯¹è±¡æ ·å¼</span></span><br><span class="line">    <span class="built_in">lv_style_reset</span>(&amp;time_style);</span><br><span class="line">    <span class="built_in">lv_style_init</span>(&amp;time_style);</span><br><span class="line">    <span class="built_in">lv_style_set_bg_opa</span>(&amp;time_style, LV_OPA_COVER);</span><br><span class="line">    <span class="built_in">lv_style_set_border_width</span>(&amp;time_style, <span class="number">0</span>);</span><br><span class="line">    <span class="built_in">lv_style_set_radius</span>(&amp;time_style, <span class="number">5</span>);</span><br><span class="line">    <span class="built_in">lv_style_set_bg_color</span>(&amp;time_style, <span class="built_in">lv_palette_main</span>(LV_PALETTE_BLUE));</span><br><span class="line">    <span class="built_in">lv_style_set_pad_left</span>(&amp;time_style, <span class="number">0</span>);</span><br><span class="line">    <span class="built_in">lv_style_set_pad_right</span>(&amp;time_style, <span class="number">0</span>);</span><br><span class="line">    <span class="built_in">lv_style_set_pad_top</span>(&amp;time_style, <span class="number">0</span>);</span><br><span class="line">    <span class="built_in">lv_style_set_pad_bottom</span>(&amp;time_style, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    <span class="type">static</span> <span class="type">lv_style_t</span> date_style; <span class="comment">// æ—¥æœŸå¯¹è±¡æ ·å¼</span></span><br><span class="line">    <span class="built_in">lv_style_reset</span>(&amp;date_style);</span><br><span class="line">    <span class="built_in">lv_style_init</span>(&amp;date_style);</span><br><span class="line">    <span class="built_in">lv_style_set_bg_opa</span>(&amp;date_style, LV_OPA_COVER);</span><br><span class="line">    <span class="built_in">lv_style_set_border_width</span>(&amp;date_style, <span class="number">0</span>);</span><br><span class="line">    <span class="built_in">lv_style_set_radius</span>(&amp;date_style, <span class="number">5</span>);</span><br><span class="line">    <span class="built_in">lv_style_set_bg_color</span>(&amp;date_style, <span class="built_in">lv_palette_main</span>(LV_PALETTE_BLUE));</span><br><span class="line">    <span class="built_in">lv_style_set_pad_left</span>(&amp;date_style, <span class="number">0</span>);</span><br><span class="line">    <span class="built_in">lv_style_set_pad_right</span>(&amp;date_style, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Time font */</span></span><br><span class="line">    <span class="type">static</span> <span class="type">lv_style_t</span> time_label_style;                                <span class="comment">// æ—¶é—´æ ‡ç­¾æ ·å¼</span></span><br><span class="line">    <span class="built_in">lv_style_reset</span>(&amp;time_label_style);                                 <span class="comment">// é‡ç½®æ ·å¼</span></span><br><span class="line">    <span class="built_in">lv_style_init</span>(&amp;time_label_style);                                  <span class="comment">// åˆå§‹åŒ–æ ·å¼</span></span><br><span class="line">    <span class="built_in">lv_style_set_text_color</span>(&amp;time_label_style, <span class="built_in">lv_color_white</span>());      <span class="comment">// è®¾ç½®æ ‡ç­¾æ ·å¼æ–‡æœ¬é¢œè‰²</span></span><br><span class="line">    <span class="built_in">lv_style_set_text_font</span>(&amp;time_label_style, &amp;lv_font_montserrat_32); <span class="comment">// è®¾ç½®å­—ä½“é£æ ¼</span></span><br><span class="line">    <span class="built_in">lv_style_set_text_opa</span>(&amp;time_label_style, LV_OPA_COVER);            <span class="comment">// è®¾ç½®å­—ä½“é€æ˜åº¦</span></span><br><span class="line">    <span class="built_in">lv_style_set_bg_opa</span>(&amp;time_label_style, LV_OPA_0);                  <span class="comment">// è®¾ç½®æ ·å¼èƒŒæ™¯é€æ˜åº¦</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Date font */</span></span><br><span class="line">    <span class="type">static</span> <span class="type">lv_style_t</span> date_label_style; <span class="comment">// æ—¥æœŸæ ‡ç­¾æ ·å¼</span></span><br><span class="line">    <span class="built_in">lv_style_reset</span>(&amp;date_label_style);</span><br><span class="line">    <span class="built_in">lv_style_init</span>(&amp;date_label_style);</span><br><span class="line">    <span class="built_in">lv_style_set_text_opa</span>(&amp;date_label_style, LV_OPA_COVER);</span><br><span class="line">    <span class="built_in">lv_style_set_bg_opa</span>(&amp;date_label_style, LV_OPA_0);</span><br><span class="line">    <span class="built_in">lv_style_set_text_color</span>(&amp;date_label_style, <span class="built_in">lv_color_white</span>());</span><br><span class="line">    <span class="built_in">lv_style_set_text_font</span>(&amp;date_label_style, &amp;lv_font_montserrat_16);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Week font */</span></span><br><span class="line">    <span class="type">static</span> <span class="type">lv_style_t</span> week_lable_style; <span class="comment">// æ—¥æœŸæ ‡ç­¾æ ·å¼</span></span><br><span class="line">    <span class="built_in">lv_style_reset</span>(&amp;week_lable_style);</span><br><span class="line">    <span class="built_in">lv_style_init</span>(&amp;week_lable_style);</span><br><span class="line">    <span class="built_in">lv_style_set_text_opa</span>(&amp;week_lable_style, LV_OPA_COVER);</span><br><span class="line">    <span class="built_in">lv_style_set_bg_opa</span>(&amp;week_lable_style, LV_OPA_0);</span><br><span class="line">    <span class="built_in">lv_style_set_text_color</span>(&amp;week_lable_style, <span class="built_in">lv_color_white</span>());</span><br><span class="line">    <span class="built_in">lv_style_set_text_font</span>(&amp;week_lable_style, &amp;lv_font_montserrat_16);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Time &amp; Date */</span></span><br><span class="line">    <span class="type">lv_obj_t</span> *time_date_obj = <span class="built_in">lv_obj_create</span>(<span class="built_in">lv_scr_act</span>()); <span class="comment">// åŸºäºå±å¹•åˆ›å»ºæ—¶é—´æ—¥æœŸå¯¹è±¡</span></span><br><span class="line">    <span class="keyword">if</span> (time_date_obj == <span class="literal">NULL</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;[%s:%d] time_date_obj create failed\n&quot;</span>, __FUNCTION__, __LINE__);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">lv_obj_set_size</span>(time_date_obj, <span class="number">320</span>, <span class="number">100</span>);                                  <span class="comment">// è®¾ç½®å¯¹è±¡å¤§å°</span></span><br><span class="line">    <span class="built_in">lv_obj_center</span>(time_date_obj);                                              <span class="comment">// å¯¹è±¡å±…å±å¹•ä¸­é—´æ˜¾ç¤º</span></span><br><span class="line">    <span class="built_in">lv_obj_add_style</span>(time_date_obj, &amp;date_time_clock_style, LV_STATE_DEFAULT); <span class="comment">// ç»™time_date_objå¯¹è±¡æ·»åŠ æ ·å¼</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/*Time display*/</span></span><br><span class="line">    <span class="type">lv_obj_t</span> *time_obj = <span class="built_in">lv_obj_create</span>(time_date_obj); <span class="comment">// åŸºäºtime_date_objå¯¹è±¡åˆ›å»ºæ—¶é—´å¯¹è±¡</span></span><br><span class="line">    <span class="keyword">if</span> (time_obj == <span class="literal">NULL</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;[%s:%d] time_obj create failed\n&quot;</span>, __FUNCTION__, __LINE__);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">lv_obj_set_size</span>(time_obj, <span class="number">158</span>, <span class="number">100</span>);                               <span class="comment">// è®¾ç½®å¯¹è±¡å¤§å°</span></span><br><span class="line">    <span class="built_in">lv_obj_align_to</span>(time_obj, time_date_obj, LV_ALIGN_LEFT_MID, <span class="number">0</span>, <span class="number">0</span>); <span class="comment">// è®¾ç½®time_objå¯¹è±¡åŸºäºtime_date_objå¯¹è±¡å·¦è¾¹ä¸­é—´å¯¹é½</span></span><br><span class="line">    <span class="built_in">lv_obj_add_style</span>(time_obj, &amp;time_style, LV_STATE_DEFAULT);         <span class="comment">// ç»™time_objå¯¹è±¡æ·»åŠ æ ·å¼</span></span><br><span class="line"></span><br><span class="line">    <span class="type">static</span> <span class="type">lv_clock_t</span> lv_clock = &#123;<span class="number">0</span>&#125;;</span><br><span class="line"></span><br><span class="line">    lv_clock.time_label = <span class="built_in">lv_label_create</span>(time_obj); <span class="comment">// åŸºäºtime_objå¯¹è±¡åˆ›å»ºæ—¶é—´æ˜¾ç¤ºæ ‡ç­¾å¯¹è±¡ lv_clock.time_label</span></span><br><span class="line">    <span class="keyword">if</span> (lv_clock.time_label == <span class="literal">NULL</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;[%s:%d] time_label create failed\n&quot;</span>, __FUNCTION__, __LINE__);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">lv_obj_add_style</span>(lv_clock.time_label, &amp;time_label_style, LV_STATE_DEFAULT); <span class="comment">// ç»™å¯¹è±¡ lv_clock.time_labelæ·»åŠ æ ·å¼</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/*Date display*/</span></span><br><span class="line">    <span class="type">lv_obj_t</span> *date_obj = <span class="built_in">lv_obj_create</span>(time_date_obj); <span class="comment">// åŸºäºtime_date_objå¯¹è±¡åˆ›å»ºdate_objå¯¹è±¡</span></span><br><span class="line">    <span class="keyword">if</span> (date_obj == <span class="literal">NULL</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;[%s:%d] date_obj create failed\n&quot;</span>, __FUNCTION__, __LINE__);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">lv_obj_set_size</span>(date_obj, <span class="number">158</span>, <span class="number">100</span>);                                <span class="comment">// è®¾ç½®å¯¹è±¡å¤§å°</span></span><br><span class="line">    <span class="built_in">lv_obj_align_to</span>(date_obj, time_date_obj, LV_ALIGN_RIGHT_MID, <span class="number">0</span>, <span class="number">0</span>); <span class="comment">// è®¾ç½®date_objå¯¹è±¡åŸºäºtime_date_objå¯¹è±¡å³è¾¹ä¸­éƒ¨å¯¹é½</span></span><br><span class="line">    <span class="built_in">lv_obj_add_style</span>(date_obj, &amp;date_style, LV_STATE_DEFAULT);          <span class="comment">// ç»™date_objå¯¹è±¡æ·»åŠ æ ·å¼</span></span><br><span class="line"></span><br><span class="line">    lv_clock.date_label = <span class="built_in">lv_label_create</span>(date_obj); <span class="comment">// åŸºäºdate_objå¯¹è±¡åˆ›å»ºlv_clock.date_labelæ—¥æœŸæ˜¾ç¤ºå¯¹è±¡</span></span><br><span class="line">    <span class="keyword">if</span> (lv_clock.date_label == <span class="literal">NULL</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;[%s:%d] date_label create failed\n&quot;</span>, __FUNCTION__, __LINE__);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">lv_obj_add_style</span>(lv_clock.date_label, &amp;date_label_style, LV_STATE_DEFAULT); <span class="comment">// ç»™lv_clock.date_labelå¯¹è±¡æ·»åŠ æ ·å¼</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/*Week display*/</span></span><br><span class="line">    lv_clock.weekday_label = <span class="built_in">lv_label_create</span>(date_obj); <span class="comment">// åŸºäºdate_objå¯¹è±¡åˆ›å»ºæ˜ŸæœŸæ˜¾ç¤ºlv_clock.weekday_labelå¯¹è±¡</span></span><br><span class="line">    <span class="keyword">if</span> (lv_clock.weekday_label == <span class="literal">NULL</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;[%s:%d] weekday_label create failed\n&quot;</span>, __FUNCTION__, __LINE__);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">lv_obj_add_style</span>(lv_clock.weekday_label, &amp;week_lable_style, LV_STATE_DEFAULT); <span class="comment">// ç»™å¯¹è±¡lv_clock.weekday_labelæ·»åŠ æ ·å¼</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// è®¾ç½®æ—¶é—´æ ‡ç­¾lv_clock.time_labelå¯¹è±¡åŸºäºçˆ¶å¯¹è±¡å±…ä¸­å¯¹é½</span></span><br><span class="line">    <span class="built_in">lv_obj_align_to</span>(lv_clock.time_label, <span class="built_in">lv_obj_get_parent</span>(lv_clock.time_label), LV_ALIGN_CENTER, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="comment">// è®¾ç½®æ—¶é—´æ ‡ç­¾lv_clock.date_labelå¯¹è±¡åŸºäºçˆ¶å¯¹è±¡é¡¶éƒ¨ä¸­é—´å¯¹é½</span></span><br><span class="line">    <span class="built_in">lv_obj_align_to</span>(lv_clock.date_label, <span class="built_in">lv_obj_get_parent</span>(lv_clock.date_label), LV_ALIGN_TOP_MID, <span class="number">2</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="comment">// è®¾ç½®æ—¶é—´æ ‡ç­¾lv_clock.weekday_labelå¯¹è±¡åŸºäºçˆ¶å¯¹è±¡åº•éƒ¨ä¸­é—´å¯¹é½</span></span><br><span class="line">    <span class="built_in">lv_obj_align_to</span>(lv_clock.weekday_label, <span class="built_in">lv_obj_get_parent</span>(lv_clock.weekday_label), LV_ALIGN_BOTTOM_MID, <span class="number">-2</span>, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    <span class="type">lv_timer_t</span> *task_timer = <span class="built_in">lv_timer_create</span>(demo10_my_timer, <span class="number">200</span>, (<span class="type">void</span> *)&amp;lv_clock);</span><br><span class="line">    <span class="keyword">if</span> (task_timer == <span class="literal">NULL</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;[%s:%d] lv_timer_create failed\n&quot;</span>, __FUNCTION__, __LINE__);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å®šæ—¶æ›´æ–°"><a href="#å®šæ—¶æ›´æ–°" class="headerlink" title="å®šæ—¶æ›´æ–°"></a>å®šæ—¶æ›´æ–°</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">demo10_my_timer</span><span class="params">(<span class="type">lv_timer_t</span> *timer)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    I2C_BM8563_TimeTypeDef timeStruct;</span><br><span class="line">    I2C_BM8563_DateTypeDef dateStruct;</span><br><span class="line">    rtc.<span class="built_in">getTime</span>(&amp;timeStruct);</span><br><span class="line">    rtc.<span class="built_in">getDate</span>(&amp;dateStruct);</span><br><span class="line"> </span><br><span class="line">    <span class="type">static</span> <span class="type">const</span> <span class="type">char</span> *week_day[<span class="number">7</span>] = &#123;<span class="string">&quot;Sunday&quot;</span>, <span class="string">&quot;Monday&quot;</span>, <span class="string">&quot;Tuesday&quot;</span>, <span class="string">&quot;Wednesday&quot;</span>, <span class="string">&quot;Thursday&quot;</span>, <span class="string">&quot;Friday&quot;</span>, <span class="string">&quot;Saturday&quot;</span>&#125;;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> year = dateStruct.year;</span><br><span class="line">    <span class="type">int</span> month = dateStruct.month;</span><br><span class="line">    <span class="type">int</span> day = dateStruct.date;</span><br><span class="line">    <span class="type">int</span> weekday = dateStruct.weekDay;</span><br><span class="line">    <span class="type">int</span> hour = timeStruct.hours;</span><br><span class="line">    <span class="type">int</span> minutes = timeStruct.minutes;</span><br><span class="line">    <span class="type">int</span> second = timeStruct.seconds;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (timer != <span class="literal">NULL</span> &amp;&amp; timer-&gt;user_data != <span class="literal">NULL</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">lv_clock_t</span> *clock = (<span class="type">lv_clock_t</span> *)(timer-&gt;user_data);</span><br><span class="line">        <span class="keyword">if</span> (clock-&gt;time_label != <span class="literal">NULL</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">lv_label_set_text_fmt</span>(clock-&gt;time_label, <span class="string">&quot;%02d:%02d:%02d&quot;</span>, hour, minutes, second);</span><br><span class="line">            <span class="built_in">lv_obj_align_to</span>(clock-&gt;time_label, <span class="built_in">lv_obj_get_parent</span>(clock-&gt;time_label), LV_ALIGN_CENTER, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (clock-&gt;date_label != <span class="literal">NULL</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">lv_label_set_text_fmt</span>(clock-&gt;date_label, <span class="string">&quot;%d-%02d-%02d&quot;</span>, year, month, day);</span><br><span class="line">            <span class="built_in">lv_obj_align_to</span>(clock-&gt;date_label, <span class="built_in">lv_obj_get_parent</span>(clock-&gt;date_label), LV_ALIGN_TOP_MID, <span class="number">2</span>, <span class="number">0</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (clock-&gt;weekday_label != <span class="literal">NULL</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">lv_label_set_text_fmt</span>(clock-&gt;weekday_label, <span class="string">&quot;%s&quot;</span>, week_day[weekday]);</span><br><span class="line">            <span class="built_in">lv_obj_align_to</span>(clock-&gt;weekday_label, <span class="built_in">lv_obj_get_parent</span>(clock-&gt;weekday_label), LV_ALIGN_BOTTOM_MID, <span class="number">-2</span>, <span class="number">0</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ä¿®bug"><a href="#ä¿®bug" class="headerlink" title="ä¿®bug"></a>ä¿®bug</h2><h3 id="1-å­—ä½“"><a href="#1-å­—ä½“" class="headerlink" title="1.å­—ä½“"></a>1.å­—ä½“</h3><p>LV_FONT_MONTSERRAT_32 ç­‰å­—ä½“æ— æ³•ä½¿ç”¨ï¼Œéœ€è¦åœ¨ lv_conf.h ä¸­æ‰“å¼€å¼€å…³</p><p><img src="/2023/05/30/cx-lvgl-1/image-20230530173528736.png" alt="image-20230530173528736"></p><h3 id="2-å›è°ƒå‡½æ•°çš„ä¼ é€’å‚æ•°"><a href="#2-å›è°ƒå‡½æ•°çš„ä¼ é€’å‚æ•°" class="headerlink" title="2.å›è°ƒå‡½æ•°çš„ä¼ é€’å‚æ•°"></a>2.å›è°ƒå‡½æ•°çš„ä¼ é€’å‚æ•°</h3><p>ç”¨ int ç­‰ç±»å‹å®šä¹‰çš„ç»“æ„ä½“åœ¨å®šæ—¶å™¨ä¸­æ— æ³•å–å‡ºæˆå‘˜ï¼Œæ”¹ä¸ºä½¿ç”¨ lv_obj_t ç»“æ„ä½“ä¼ é€’æ‰€æœ‰éœ€è¦ä¿®æ”¹çš„æ ‡ç­¾</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="keyword">struct</span> <span class="title class_">_lv_clock</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">lv_obj_t</span> *time_label;    <span class="comment">// æ—¶é—´æ ‡ç­¾</span></span><br><span class="line">    <span class="type">lv_obj_t</span> *date_label;    <span class="comment">// æ—¥æœŸæ ‡ç­¾</span></span><br><span class="line">    <span class="type">lv_obj_t</span> *weekday_label; <span class="comment">// æ˜ŸæœŸæ ‡ç­¾</span></span><br><span class="line">&#125; <span class="type">lv_clock_t</span>;</span><br></pre></td></tr></table></figure><h2 id="æœ€ç»ˆæ•ˆæœ"><a href="#æœ€ç»ˆæ•ˆæœ" class="headerlink" title="æœ€ç»ˆæ•ˆæœ"></a>æœ€ç»ˆæ•ˆæœ</h2><p><img src="/2023/05/30/cx-lvgl-1/image-20230530130041919.png" alt="image-20230530130041919"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;åŠŸèƒ½&quot;&gt;&lt;a href=&quot;#åŠŸèƒ½&quot; class=&quot;headerlink&quot; title=&quot;åŠŸèƒ½&quot;&gt;&lt;/a&gt;åŠŸèƒ½&lt;/h2&gt;&lt;blockquote&gt;
&lt;ol&gt;
&lt;li&gt;pcf8563æ¨¡å—æµ‹è¯•ã€‚&lt;/li&gt;
&lt;li&gt;esp32s3è”ç½‘æˆæ—¶ï¼Œè‡ªåŠ¨æ ¡å‡†pcf8563æ—¶é’Ÿæ¨¡å—ï¼Œå¹¶</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>Blog æŠ˜è…¾è®°å½•</title>
    <link href="http://example.com/2023/05/23/blog-building/"/>
    <id>http://example.com/2023/05/23/blog-building/</id>
    <published>2023-05-23T10:42:12.173Z</published>
    <updated>2023-05-23T12:51:08.916Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Memoså¨å¨éƒ¨ç½²"><a href="#Memoså¨å¨éƒ¨ç½²" class="headerlink" title="Memoså¨å¨éƒ¨ç½²"></a>Memoså¨å¨éƒ¨ç½²</h2><h3 id=""><a href="#" class="headerlink" title=""></a></h3>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;Memoså¨å¨éƒ¨ç½²&quot;&gt;&lt;a href=&quot;#Memoså¨å¨éƒ¨ç½²&quot; class=&quot;headerlink&quot; title=&quot;Memoså¨å¨éƒ¨ç½²&quot;&gt;&lt;/a&gt;Memoså¨å¨éƒ¨ç½²&lt;/h2&gt;&lt;h3 id=&quot;&quot;&gt;&lt;a href=&quot;#&quot; class=&quot;headerlink&quot; titl</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>LVGLç¬”è®°ï¼ˆä¸€ï¼‰</title>
    <link href="http://example.com/2023/05/12/lvgl-learning/"/>
    <id>http://example.com/2023/05/12/lvgl-learning/</id>
    <published>2023-05-12T15:05:20.633Z</published>
    <updated>2023-05-14T16:03:11.768Z</updated>
    
    <content type="html"><![CDATA[<h2 id="LVGLå­¦ä¹ ç¬”è®°"><a href="#LVGLå­¦ä¹ ç¬”è®°" class="headerlink" title="LVGLå­¦ä¹ ç¬”è®°"></a>LVGLå­¦ä¹ ç¬”è®°</h2><h3 id="1-å¯¹è±¡"><a href="#1-å¯¹è±¡" class="headerlink" title="1.å¯¹è±¡"></a>1.å¯¹è±¡</h3><h4 id="å±å¹•"><a href="#å±å¹•" class="headerlink" title="å±å¹•"></a>å±å¹•</h4><blockquote><p>å±å¹•æ˜¯æ²¡æœ‰çˆ¶ç±»çš„åŸºç¡€å¯¹è±¡</p><p>LVGLçš„ä¸‰å±‚å±å¹•:</p><ol><li><p>lv_scr_act(void);  &#x2F;&#x2F; æ´»åŠ¨å±å¹•  <strong>disp</strong>-&gt;<strong>act_scr</strong></p></li><li><p>lv_layer_top (void);  &#x2F;&#x2F; é¡¶å±‚  <strong>disp</strong>-&gt;<strong>top_layer</strong></p></li><li><p>lv_layer_sys (void); &#x2F;&#x2F; ç³»ç»Ÿå±‚  <strong>disp</strong>-&gt;<strong>sys_layer</strong></p></li></ol></blockquote><h4 id="è®¾ç½®ç›¸å¯¹äºçˆ¶çº§çš„ä½ç½®-Position"><a href="#è®¾ç½®ç›¸å¯¹äºçˆ¶çº§çš„ä½ç½®-Position" class="headerlink" title="è®¾ç½®ç›¸å¯¹äºçˆ¶çº§çš„ä½ç½®(Position)"></a>è®¾ç½®ç›¸å¯¹äºçˆ¶çº§çš„ä½ç½®(Position)</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">è®¾ç½®xè½´æ–¹å‘çš„åæ ‡ä½ç½®ï¼š</span><br><span class="line"><span class="built_in">lv_obj_set_x</span>(obj, new_x);</span><br><span class="line">è®¾ç½®yè½´æ–¹å‘çš„åæ ‡ä½ç½®ï¼š</span><br><span class="line"><span class="built_in">lv_obj_set_y</span>(obj, new_y);</span><br><span class="line">åŒæ—¶è®¾ç½®xã€yåæ ‡ä½ç½®ï¼š</span><br><span class="line"><span class="built_in">lv_obj_set_pos</span>(obj, new_x, new_y);  <span class="comment">//position</span></span><br></pre></td></tr></table></figure><h4 id="å¯¹é½-Alignment"><a href="#å¯¹é½-Alignment" class="headerlink" title="å¯¹é½(Alignment)"></a>å¯¹é½(Alignment)</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">å‚ç…§çˆ¶å¯¹è±¡å¯¹é½ï¼š</span><br><span class="line"><span class="built_in">lv_obj_set_align</span>(obj, LV_ALIGN_...);</span><br><span class="line">å‚ç…§çˆ¶å¯¹è±¡å¯¹é½åå†è®¾ç½®åæ ‡ä½ç½®ï¼š</span><br><span class="line"><span class="built_in">lv_obj_align</span>(obj, LV_ALIGN_..., x, y);</span><br><span class="line">å‚ç…§å¦ä¸€ä¸ªå¯¹è±¡(æ— çˆ¶å­å…³ç³»)å¯¹é½åè®¾ç½®åæ ‡ä½ç½®ï¼š</span><br><span class="line"><span class="built_in">lv_obj_align_to</span>(obj_to_align, obj_referece, LV_ALIGN_..., x, y)</span><br><span class="line">è®©å›¾ç‰‡ä¸‹æ–¹çš„æ–‡æœ¬å‚ç…§å›¾ç‰‡å¯¹é½ï¼š</span><br><span class="line"><span class="built_in">lv_obj_align_to</span>(text, image, LV_ALIGN_OUT_BOTTOM_MID, <span class="number">0</span>, <span class="number">10</span>);</span><br></pre></td></tr></table></figure><h4 id="å¯¹é½ç±»å‹-LV-ALIGN-â€¦"><a href="#å¯¹é½ç±»å‹-LV-ALIGN-â€¦" class="headerlink" title="å¯¹é½ç±»å‹(LV_ALIGN_â€¦)"></a>å¯¹é½ç±»å‹(LV_ALIGN_â€¦)</h4><p><img src="/lvgl-learning/1.png" alt="1"></p><h4 id="è·å–ä½ç½®-Get-position"><a href="#è·å–ä½ç½®-Get-position" class="headerlink" title="è·å–ä½ç½®(Get position)"></a>è·å–ä½ç½®(Get position)</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">è·å–xè½´åæ ‡ä½ç½®ï¼š</span><br><span class="line"><span class="built_in">lv_obj_get_x</span>(obj);</span><br><span class="line">è·å–yè½´åæ ‡ä½ç½®ï¼š</span><br><span class="line"><span class="built_in">lv_obj_get_y</span>(obj);</span><br></pre></td></tr></table></figure><h4 id="çˆ¶å­å…³ç³»"><a href="#çˆ¶å­å…³ç³»" class="headerlink" title="çˆ¶å­å…³ç³»"></a>çˆ¶å­å…³ç³»</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">ä¸ºå¯¹è±¡è®¾ç½®æ–°çš„çˆ¶çº§</span><br><span class="line"><span class="built_in">lv_obj_set_parent</span>(obj, new_parent);</span><br><span class="line">è·å–å½“å‰çˆ¶çº§</span><br><span class="line"><span class="built_in">lv_obj_get_parent</span>(obj);</span><br><span class="line">è·å–çˆ¶æ¯çš„ç‰¹å®šå­©å­</span><br><span class="line"><span class="built_in">lv_obj_get_child</span>(parent, idx);</span><br><span class="line">    <span class="number">0</span> è·å–åˆ›å»ºçš„ç¬¬ä¸€ä¸ªå­é¡¹</span><br><span class="line">    <span class="number">1</span> è·å–åˆ›å»ºçš„ç¬¬äºŒä¸ªå­é¡¹</span><br><span class="line">   <span class="number">-1</span> è·å–æœ€ååˆ›å»ºçš„å­é¡¹</span><br><span class="line">è¿”å›å¯¹è±¡åœ¨å…¶çˆ¶å¯¹è±¡ä¸­çš„ç´¢å¼•</span><br><span class="line"><span class="built_in">lv_obj_get_index</span>(obj);</span><br></pre></td></tr></table></figure><h4 id="LVGLå¯¹è±¡çš„ç›’å­æ¨¡å‹"><a href="#LVGLå¯¹è±¡çš„ç›’å­æ¨¡å‹" class="headerlink" title="LVGLå¯¹è±¡çš„ç›’å­æ¨¡å‹"></a>LVGLå¯¹è±¡çš„ç›’å­æ¨¡å‹</h4><p><img src="/2023/05/12/lvgl-learning/2.jpg" alt="2"></p><blockquote><p>LVGL éµå¾ª CSS çš„ border-box æ¨¡å‹ã€‚ å¯¹è±¡çš„â€œç›’å­â€ç”±ä»¥ä¸‹éƒ¨åˆ†æ„æˆï¼š<br>è¾¹ç•Œ(bounding)ï¼šå…ƒç´ çš„å®½åº¦&#x2F;é«˜åº¦å›´èµ·æ¥çš„åŒºåŸŸ(æ•´ä¸ªç›’å­)ã€‚<br>è¾¹æ¡†(border)ï¼šè¾¹æ¡†æœ‰å¤§å°å’Œé¢œè‰²ç­‰å±æ€§(ç›¸å½“äºç›’å­çš„åšåº¦å’Œå®ƒçš„é¢œè‰²)ã€‚<br>å¡«å……(padding)ï¼šå¯¹è±¡ä¸¤ä¾§ä¸å…¶å­å¯¹è±¡ä¹‹é—´çš„ç©ºé—´(ç›’å­çš„å¡«å……ç‰©)ã€‚<br>å†…å®¹(content)ï¼šå¦‚æœè¾¹ç•Œæ¡†æŒ‰è¾¹æ¡†å®½åº¦å’Œå¡«å……çš„å¤§å°ç¼©å°ï¼Œåˆ™æ˜¾ç¤ºå…¶å¤§å°çš„å†…å®¹åŒºåŸŸ(ç›’å­å®é™…è£…ä¸œè¥¿çš„åŒºåŸŸ)ã€‚<br>è½®å»“(outline) ï¼šLVGLä¸­æ²¡æœ‰å¤–è¾¹è·(margin)çš„æ¦‚å¿µ(ç›’å­ä¹‹é—´çš„è·ç¦»)ï¼Œç¡®è®¤ä»£ä¹‹çš„æ˜¯è½®å»“(outline)ã€‚å®ƒæ˜¯ç»˜åˆ¶äºå…ƒç´ (ç›’å­)å‘¨å›´çš„ä¸€æ¡çº¿ï¼Œå®ƒä¸å æ®ç©ºé—´ï¼Œä½äºè¾¹æ¡†è¾¹ç¼˜çš„å¤–å›´ï¼Œå¯èµ·åˆ°çªå‡ºå…ƒç´ (ç›’å­)çš„ä½œç”¨ã€‚åœ¨æµè§ˆå™¨é‡Œï¼Œå½“é¼ æ ‡ç‚¹å‡»æˆ–ä½¿ç”¨Tabé”®è®©ä¸€ä¸ªé€‰é¡¹æˆ–è€…ä¸€ä¸ªå›¾ç‰‡è·å¾—ç„¦ç‚¹çš„æ—¶å€™ï¼Œè¿™ä¸ªå…ƒç´ å°±ä¼šå¤šäº†ä¸€ä¸ªè½®å»“æ¡†å›´ç»•ã€‚è½®å»“(outline) ã€‚<br>LVGLçš„ç›’å­æ¨¡å‹æ˜¯æˆ‘ä»¬ç†è§£å¯¹è±¡(éƒ¨ä»¶)çš„ç»„æˆï¼Œä¿®æ”¹å¯¹è±¡çš„æ ·å¼ï¼Œå®ç°å¯¹å¯¹è±¡çš„å¸ƒå±€ã€å¤„ç†å¯¹è±¡æ’åˆ—ç­‰ç­‰çš„å…³é”®ã€‚</p></blockquote><h4 id="æ ·å¼æ€»ç»“"><a href="#æ ·å¼æ€»ç»“" class="headerlink" title="æ ·å¼æ€»ç»“"></a>æ ·å¼æ€»ç»“</h4><blockquote><p>Styles ç”¨äºè®¾ç½®å¯¹è±¡çš„å¤–è§‚</p><p>æ ·å¼æ˜¯ lv_style_t å˜é‡ï¼Œå®ƒå¯ä»¥ä¿å­˜è¾¹æ¡†å®½åº¦ã€æ–‡æœ¬é¢œè‰²ç­‰å±æ€§</p><p>å°†æ ·å¼(å˜é‡)åˆ†é…ç»™å¯¹è±¡å°±å¯ä»¥æ”¹å˜å…¶å¤–è§‚ã€‚</p><p>åœ¨èµ‹å€¼è¿‡ç¨‹ä¸­ï¼Œå¯ä»¥æŒ‡å®šç›®æ ‡éƒ¨åˆ†å’Œç›®æ ‡çŠ¶æ€ã€‚</p><p>ä¸€ä¸ªæ ·å¼å¯ä»¥ç»™å¤šä¸ªå¯¹è±¡ä½¿ç”¨ï¼ˆæ­£å¸¸æ ·å¼ï¼‰ã€‚</p><p>æ ·å¼å¯ä»¥çº§è”ï¼Œä¹Ÿå°±æ˜¯å¯ä»¥å°†å¤šä¸ªæ ·å¼åˆ†é…ç»™ä¸€ä¸ªå¯¹è±¡ã€‚</p><p>LVGL ä¼šä¼˜å…ˆä½¿ç”¨æˆ‘ä»¬å®šä¹‰çš„æ ·å¼ï¼Œå¦‚æœæ²¡æœ‰å°±ä¼šä½¿ç”¨é»˜è®¤å€¼ã€‚</p><p>åæ¥æ·»åŠ çš„æ ·å¼å…·æœ‰æ›´é«˜çš„ä¼˜å…ˆçº§ã€‚</p><p>å¦‚æœå¯¹è±¡ä¸­æœªæŒ‡å®šæŸäº›å±æ€§ï¼ˆä¾‹å¦‚æ–‡æœ¬é¢œè‰²ï¼‰ï¼Œå°±ä¼šä»çˆ¶çº§ç»§æ‰¿ã€‚</p><p>ä¸Šé¢è¯´çš„æ˜¯ â€œæ­£å¸¸â€ æ ·å¼ï¼Œå¯¹è±¡è¿˜æœ‰æœ¬åœ°æ ·å¼ï¼Œå®ƒæ¯” â€œæ­£å¸¸â€ æ ·å¼å…·æœ‰æ›´é«˜çš„ä¼˜å…ˆçº§ã€‚</p><p>é»˜è®¤æœ‰ä¸€ä¸ªæ ·å¼ä¸»é¢˜ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥è‡ªå·±å®šä¹‰æ ·å¼ä¸»é¢˜ï¼Œä½œä¸ºé»˜è®¤çš„æ ·å¼ä¸»é¢˜ä½¿ç”¨ã€‚</p></blockquote><h4 id="åˆå§‹åŒ–æ ·å¼"><a href="#åˆå§‹åŒ–æ ·å¼" class="headerlink" title="åˆå§‹åŒ–æ ·å¼"></a>åˆå§‹åŒ–æ ·å¼</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">static</span> <span class="type">void</span> <span class="title">lv_example_slider_2</span><span class="params">(<span class="type">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">/*Create a transition*/</span></span><br><span class="line">    <span class="type">static</span> <span class="type">const</span> <span class="type">lv_style_prop_t</span> props[] = &#123;LV_STYLE_BG_COLOR, <span class="number">0</span>&#125;;</span><br><span class="line">    <span class="type">static</span> <span class="type">lv_style_transition_dsc_t</span> transition_dsc;</span><br><span class="line">    <span class="built_in">lv_style_transition_dsc_init</span>(&amp;transition_dsc, props, lv_anim_path_linear, <span class="number">300</span>, <span class="number">0</span>, <span class="literal">NULL</span>);</span><br><span class="line"></span><br><span class="line">    <span class="type">static</span> <span class="type">lv_style_t</span> style_main;           <span class="comment">// çŸ©å½¢èƒŒæ™¯éƒ¨åˆ†</span></span><br><span class="line">    <span class="type">static</span> <span class="type">lv_style_t</span> style_indicator;      <span class="comment">// æŒ‡é’ˆéƒ¨åˆ†</span></span><br><span class="line">    <span class="type">static</span> <span class="type">lv_style_t</span> style_knob;           <span class="comment">// æ—‹é’®éƒ¨åˆ†</span></span><br><span class="line">    <span class="type">static</span> <span class="type">lv_style_t</span> style_pressed_color;  <span class="comment">// å¯¹è±¡æŸéƒ¨åˆ†è¢«æŒ‰ä¸‹æ—¶ï¼Œè¯¥éƒ¨åˆ†æ ·å¼åº”ç”¨çš„é¢œè‰²</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// çŸ©å½¢èƒŒæ™¯éƒ¨åˆ†</span></span><br><span class="line">    <span class="built_in">lv_style_init</span>(&amp;style_main);</span><br><span class="line">    <span class="built_in">lv_style_set_bg_opa</span>(&amp;style_main, LV_OPA_COVER);</span><br><span class="line">    <span class="built_in">lv_style_set_bg_color</span>(&amp;style_main, <span class="built_in">lv_palette_main</span>(LV_PALETTE_PINK));</span><br><span class="line">    <span class="comment">//lv_style_set_outline_width(&amp;style_main, 5);</span></span><br><span class="line">    <span class="comment">//lv_style_set_border_width(&amp;style_main, 2);</span></span><br><span class="line">    <span class="built_in">lv_style_set_radius</span>(&amp;style_main, LV_RADIUS_CIRCLE);</span><br><span class="line">    <span class="built_in">lv_style_set_pad_ver</span>(&amp;style_main, <span class="number">-2</span>); <span class="comment">/*Makes the indicator larger*/</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// æŒ‡é’ˆéƒ¨åˆ†</span></span><br><span class="line">    <span class="built_in">lv_style_init</span>(&amp;style_indicator);</span><br><span class="line">    <span class="built_in">lv_style_set_bg_opa</span>(&amp;style_indicator, LV_OPA_COVER);</span><br><span class="line">    <span class="built_in">lv_style_set_bg_color</span>(&amp;style_indicator, <span class="built_in">lv_palette_main</span>(LV_PALETTE_LIGHT_BLUE));</span><br><span class="line">    <span class="built_in">lv_style_set_radius</span>(&amp;style_indicator, LV_RADIUS_CIRCLE);</span><br><span class="line">    <span class="built_in">lv_style_set_transition</span>(&amp;style_indicator, &amp;transition_dsc);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ—‹é’®éƒ¨åˆ†</span></span><br><span class="line">    <span class="built_in">lv_style_init</span>(&amp;style_knob);</span><br><span class="line">    <span class="built_in">lv_style_set_bg_opa</span>(&amp;style_knob, LV_OPA_COVER);</span><br><span class="line">    <span class="built_in">lv_style_set_bg_color</span>(&amp;style_knob, <span class="built_in">lv_palette_main</span>(LV_PALETTE_CYAN));</span><br><span class="line">    <span class="built_in">lv_style_set_border_color</span>(&amp;style_knob, <span class="built_in">lv_palette_darken</span>(LV_PALETTE_CYAN, <span class="number">3</span>));</span><br><span class="line">    <span class="built_in">lv_style_set_border_width</span>(&amp;style_knob, <span class="number">2</span>);</span><br><span class="line">    <span class="built_in">lv_style_set_radius</span>(&amp;style_knob, LV_RADIUS_CIRCLE);</span><br><span class="line">    <span class="built_in">lv_style_set_pad_all</span>(&amp;style_knob, <span class="number">8</span>); <span class="comment">/*Makes the knob larger*/</span></span><br><span class="line">    <span class="built_in">lv_style_set_transition</span>(&amp;style_knob, &amp;transition_dsc);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¯¹è±¡æŸéƒ¨åˆ†è¢«æŒ‰ä¸‹æ—¶ï¼Œè¯¥éƒ¨åˆ†æ ·å¼åº”ç”¨çš„é¢œè‰²</span></span><br><span class="line">    <span class="built_in">lv_style_init</span>(&amp;style_pressed_color);</span><br><span class="line">    <span class="built_in">lv_style_set_bg_color</span>(&amp;style_pressed_color, <span class="built_in">lv_palette_darken</span>(LV_PALETTE_BLUE, <span class="number">2</span>));</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*Create a slider and add the style*/</span></span><br><span class="line">    <span class="type">lv_obj_t</span> * slider = <span class="built_in">lv_slider_create</span>(<span class="built_in">lv_scr_act</span>());</span><br><span class="line"></span><br><span class="line">    <span class="comment">//lv_obj_remove_style_all(slider);                                                        // åˆ é™¤å¯¹è±¡çš„æ‰€æœ‰æ ·å¼</span></span><br><span class="line">    <span class="comment">//lv_obj_remove_style(obj, &amp;style_obj, selector);                                         // åˆ é™¤å¯¹è±¡ç‰¹å®šæ ·å¼</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">lv_obj_add_style</span>(slider, &amp;style_main, LV_PART_MAIN);                                    <span class="comment">// çŸ©å½¢èƒŒæ™¯éƒ¨åˆ†</span></span><br><span class="line">    <span class="built_in">lv_obj_add_style</span>(slider, &amp;style_indicator, LV_PART_INDICATOR);                          <span class="comment">// æŒ‡é’ˆéƒ¨åˆ†</span></span><br><span class="line">    <span class="built_in">lv_obj_add_style</span>(slider, &amp;style_pressed_color, LV_PART_INDICATOR | LV_STATE_FOCUSED);   <span class="comment">// å½“æŒ‡é’ˆéƒ¨åˆ†è¢«æŒ‰ä¸‹çš„æ—¶å€™ï¼ŒæŒ‡é’ˆéƒ¨åˆ†åº”ç”¨è¯¥æ ·å¼</span></span><br><span class="line">    <span class="built_in">lv_obj_add_style</span>(slider, &amp;style_knob, LV_PART_KNOB);                                    <span class="comment">// æ—‹é’®éƒ¨åˆ†ï¼ŒåƒæŒ‰é’®ä¸€æ ·å¯ä»¥æŠ“å–è°ƒæ•´å€¼</span></span><br><span class="line">    <span class="built_in">lv_obj_add_style</span>(slider, &amp;style_pressed_color, LV_PART_KNOB | LV_STATE_FOCUSED);        <span class="comment">// å½“æ—‹é’®éƒ¨åˆ†è¢«æŒ‰ä¸‹çš„æ—¶å€™ï¼Œæ—‹é’®éƒ¨åˆ†åº”ç”¨è¯¥æ ·å¼</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">lv_obj_center</span>(slider);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">lv_100ask_demo_course_2_2_5</span><span class="params">(<span class="type">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="meta">#<span class="keyword">if</span> 1</span></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">        æ ·å¼å­˜å‚¨åœ¨lv_style_tå˜é‡ä¸­ã€‚æ ·å¼å˜é‡åº”è¯¥æ˜¯é™æ€ã€å…¨å±€æˆ–åŠ¨æ€åˆ†é…çš„ã€‚</span></span><br><span class="line"><span class="comment">        ä¹Ÿå°±æ˜¯å®ƒä»¬ä¸èƒ½æ˜¯å‡½æ•°ä¸­çš„å±€éƒ¨å˜é‡,å› ä¸ºå½“å‡½æ•°ç»“æŸæ—¶å®ƒä»¬ä¼šè¢«é”€æ¯ã€‚</span></span><br><span class="line"><span class="comment">        æ ·å¼åˆå§‹åŒ–ç¤ºä¾‹ï¼š</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="type">static</span> <span class="type">lv_style_t</span> style_obj;</span><br><span class="line"><span class="built_in">lv_style_init</span>(&amp;style_obj);</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">        è®¾ç½®æ ·å¼å±æ€§:</span></span><br><span class="line"><span class="comment">        lv_style_set_&lt;property_name&gt;(&amp;style, &lt;value&gt;);</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="built_in">lv_style_set_bg_color</span>(&amp;style_obj, <span class="built_in">lv_palette_main</span>(LV_PALETTE_DEEP_ORANGE));      <span class="comment">// è®¾ç½®èƒŒæ™¯è‰²</span></span><br><span class="line">    <span class="built_in">lv_style_set_text_color</span>(&amp;style_obj, <span class="built_in">lv_palette_main</span>(LV_PALETTE_DEEP_ORANGE));    <span class="comment">// è®¾ç½®æ–‡å­—é¢œè‰²</span></span><br><span class="line">    <span class="built_in">lv_style_set_bg_opa</span>(&amp;style_obj, LV_OPA_COVER);                  <span class="comment">// è®¾ç½®é€æ˜åº¦</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ›å»ºå¯¹è±¡</span></span><br><span class="line">    <span class="type">lv_obj_t</span> * obj = <span class="built_in">lv_obj_create</span>(<span class="built_in">lv_scr_act</span>());</span><br><span class="line">    <span class="type">lv_obj_t</span> * obj2 = <span class="built_in">lv_obj_create</span>(<span class="built_in">lv_scr_act</span>());</span><br><span class="line">    <span class="built_in">lv_obj_align</span>(obj2, LV_ALIGN_CENTER, <span class="number">0</span> ,<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æœ¬åœ°æ ·å¼</span></span><br><span class="line">    <span class="built_in">lv_obj_set_style_bg_color</span>(obj,  <span class="built_in">lv_palette_main</span>(LV_PALETTE_YELLOW), LV_STATE_PRESSED);    <span class="comment">// è®¾ç½®èƒŒæ™¯è‰²</span></span><br><span class="line">    <span class="built_in">lv_obj_set_style_bg_color</span>(obj2,  <span class="built_in">lv_palette_main</span>(LV_PALETTE_AMBER), LV_STATE_PRESSED);   <span class="comment">// è®¾ç½®èƒŒæ™¯è‰²</span></span><br><span class="line">    <span class="built_in">lv_obj_set_style_bg_opa</span>(obj, LV_OPA_50, LV_STATE_PRESSED);                  <span class="comment">// è®¾ç½®èƒŒæ™¯é€æ˜åº¦</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">        æ·»åŠ æ ·å¼åˆ°å¯¹è±¡:</span></span><br><span class="line"><span class="comment">        lv_obj_add_style(obj, &amp;style, &lt;selector&gt;)</span></span><br><span class="line"><span class="comment">        å‚æ•°â€œobjâ€å°±æ˜¯è¦R-ed å€¼ (ä¸èƒ½æ˜¯äº’æ–¥ï¼Œå¦æ·»åŠ åˆ°çš„å¯¹è±¡ï¼Œ</span></span><br><span class="line"><span class="comment">        â€œstyleâ€æ˜¯æŒ‡å‘æ ·å¼å˜é‡çš„æŒ‡é’ˆï¼Œ</span></span><br><span class="line"><span class="comment">        &lt;selector&gt;æ˜¯åº”æ·»åŠ æ ·å¼çš„éƒ¨åˆ†å’ŒçŠ¶æ€çš„,Oåˆ™å°±æ˜¯æ¸…é™¤æ ‡å¿—ï¼Œæ²¡æ³•åˆå¹¶)ã€‚</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="built_in">lv_obj_add_style</span>(obj, &amp;style_obj, <span class="number">0</span>);                   <span class="comment">// é»˜è®¤çŠ¶æ€: LV_STATE_DEFAULT</span></span><br><span class="line">    <span class="built_in">lv_obj_add_style</span>(obj2, &amp;style_obj, <span class="number">0</span>);                  <span class="comment">// é»˜è®¤çŠ¶æ€: LV_STATE_DEFAULT</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">lv_obj_add_style</span>(obj, &amp;style_obj, LV_STATE_PRESSED);  <span class="comment">// æŒ‰ä¸‹çŠ¶æ€ï¼Œå½“å¯¹è±¡è¢«æŒ‰ä¸‹çš„æ—¶å€™åº”ç”¨è¯¥æ ·å¼</span></span><br><span class="line">    <span class="built_in">lv_obj_add_style</span>(obj2, &amp;style_obj, LV_STATE_PRESSED); <span class="comment">// æŒ‰ä¸‹çŠ¶æ€ï¼Œå½“å¯¹è±¡è¢«æŒ‰ä¸‹çš„æ—¶å€™åº”ç”¨è¯¥æ ·å¼</span></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ»‘æ†ç¤ºä¾‹(ä¸éœ€è¦æ·±å…¥ç ”ç©¶ï¼Œä½“ä¼šéƒ¨ä»¶æ ·å¼çš„éƒ¨åˆ†å’ŒçŠ¶æ€å³å¯)ï¼Œçœ‹é‡Œé¢çš„æ³¨é‡Šï¼šä½“éªŒæµç¨‹</span></span><br><span class="line">    <span class="comment">//lv_example_slider_2();</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="è·å–æ ·å¼å±æ€§"><a href="#è·å–æ ·å¼å±æ€§" class="headerlink" title="è·å–æ ·å¼å±æ€§"></a>è·å–æ ·å¼å±æ€§</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">è·å–å±æ€§çš„æœ€ç»ˆå€¼ï¼ˆè€ƒè™‘çº§è”ã€ç»§æ‰¿ã€æœ¬åœ°æ ·å¼å’Œè½¬æ¢ï¼‰ï¼š</span><br><span class="line"><span class="built_in">lv_obj_get_style_</span>&lt;property_name&gt;(obj, &lt;part&gt;);</span><br><span class="line">å‡½æ•°ä½¿ç”¨å¯¹è±¡çš„å½“å‰çŠ¶æ€ï¼Œå¦‚æœæ²¡æœ‰æ›´å¥½çš„å€™é€‰å¯¹è±¡ï¼Œåˆ™è¿”å›é»˜è®¤å€¼ã€‚ ä¾‹å¦‚</span><br><span class="line"><span class="type">lv_color_t</span> color=<span class="built_in">lv_obj_get_style_bg_color</span>(obj,LV_PART_MAIN);</span><br></pre></td></tr></table></figure><h4 id="åˆ é™¤æ ·å¼"><a href="#åˆ é™¤æ ·å¼" class="headerlink" title="åˆ é™¤æ ·å¼"></a>åˆ é™¤æ ·å¼</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">åˆ é™¤å¯¹è±¡çš„æ‰€æœ‰æ ·å¼ï¼š <span class="built_in">lv_obj_remove_style_all</span>(obj);</span><br><span class="line">åˆ é™¤å¯¹è±¡çš„ç‰¹å®šæ ·å¼ï¼š <span class="built_in">lv_obj_remove_style</span>(obj, &amp;style_obj, selector);</span><br><span class="line"></span><br><span class="line">åªæœ‰å½“ selector ä¸ lv_obj_add_style ä¸­ä½¿ç”¨çš„ selector åŒ¹é…æ—¶ï¼Œæ­¤å‡½æ•°æ‰ä¼šåˆ é™¤ style</span><br><span class="line">    </span><br><span class="line">å¦‚æœ style æ˜¯ç©ºï¼Œé‚£ä¹ˆä¼šæ ¹æ®ç»™å‡ºçš„ selector æ£€æŸ¥å¹¶åˆ é™¤æ‰€æœ‰åŒ¹é…çš„æ ·å¼å¦‚æœ selector æ˜¯ LV_STATE_ANY æˆ– LV_PART_ANY å°±ä¼šåˆ é™¤å…·æœ‰ä»»ä½•çŠ¶æ€æˆ–éƒ¨åˆ†çš„æ ·å¼ã€‚</span><br><span class="line">    </span><br><span class="line">ä¸‹é¢è¿™ä¸ªæ•ˆæœå’Œlv_obj_remove_style_all çš„æ•ˆæœæ˜¯ä¸€æ ·çš„ï¼š </span><br><span class="line"><span class="built_in">lv_obj_remove_style</span>(obj, <span class="literal">NULL</span>, LV_STATE_ANY | LV_PART_ANY );</span><br></pre></td></tr></table></figure><h4 id="èƒŒæ™¯éƒ¨åˆ†çš„å±æ€§"><a href="#èƒŒæ™¯éƒ¨åˆ†çš„å±æ€§" class="headerlink" title="èƒŒæ™¯éƒ¨åˆ†çš„å±æ€§"></a>èƒŒæ™¯éƒ¨åˆ†çš„å±æ€§</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">èƒŒæ™¯å±æ€§å’Œæˆ‘ä»¬å‰é¢å­¦ä¹ çš„ç›’å­æ¨¡å‹å…³ç³»å¾ˆå¤§ï¼ŒèƒŒæ™¯å±æ€§ä¸»è¦æœ‰ä¸€ä¸‹è¿™äº›ï¼š</span><br><span class="line">èƒŒæ™¯(Background)</span><br><span class="line">è¾¹ç•Œ(Border)</span><br><span class="line">è½®å»“(Outline)</span><br><span class="line">é˜´å½±(Shadow)</span><br><span class="line">å¡«å……(Padding)</span><br><span class="line">å®½åº¦å’Œé«˜åº¦å˜æ¢</span><br><span class="line">Xå’ŒYå˜æ¢</span><br></pre></td></tr></table></figure><h4 id="æ ·å¼çš„çŠ¶æ€å’Œéƒ¨åˆ†"><a href="#æ ·å¼çš„çŠ¶æ€å’Œéƒ¨åˆ†" class="headerlink" title="æ ·å¼çš„çŠ¶æ€å’Œéƒ¨åˆ†"></a>æ ·å¼çš„çŠ¶æ€å’Œéƒ¨åˆ†</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">å¯¹è±¡å¯ä»¥å¤„äºä»¥ä¸‹çŠ¶æ€çš„ç»„åˆï¼š</span><br><span class="line">LV_STATE_DEFAULT (0x0000) æ­£å¸¸ï¼Œé‡Šæ”¾çŠ¶æ€</span><br><span class="line">LV_STATE_CHECKED (0x0001) åˆ‡æ¢æˆ–æ£€æŸ¥çŠ¶æ€</span><br><span class="line">LV_STATE_FOCUSED (0x0002) é€šè¿‡é”®ç›˜æˆ–ç¼–ç å™¨èšç„¦æˆ–é€šè¿‡è§¦æ‘¸æ¿/é¼ æ ‡ç‚¹å‡»</span><br><span class="line">LV_STATE_FOCUS_KEY (0x0004) é€šè¿‡é”®ç›˜æˆ–ç¼–ç å™¨èšç„¦ï¼Œä½†ä¸é€šè¿‡è§¦æ‘¸æ¿/é¼ æ ‡èšç„¦</span><br><span class="line">LV_STATE_EDITED (0x0008) ç”±ç¼–ç å™¨ç¼–è¾‘</span><br><span class="line">LV_STATE_HOVERED (0x0010) é¼ æ ‡æ‚¬åœï¼ˆç°åœ¨ä¸æ”¯æŒï¼‰</span><br><span class="line">LV_STATE_PRESSED (0x0020) è¢«æŒ‰ä¸‹</span><br><span class="line">LV_STATE_SCROLLED (0x0040) æ­£åœ¨æ»šåŠ¨</span><br><span class="line">LV_STATE_DISABLED (0x0080) ç¦ç”¨çŠ¶æ€</span><br><span class="line">LV_STATE_USER_1 (0x1000) è‡ªå®šä¹‰çŠ¶æ€</span><br><span class="line">LV_STATE_USER_2 (0x2000) è‡ªå®šä¹‰çŠ¶æ€</span><br><span class="line">LV_STATE_USER_3 (0x4000) è‡ªå®šä¹‰çŠ¶æ€</span><br><span class="line">LV_STATE_USER_4 (0x8000) è‡ªå®šä¹‰çŠ¶æ€</span><br><span class="line">è¿™äº›å¯èƒ½ä¼šéšç€lvglçš„æ›´æ–°è€Œä¸æ–­å¢åŠ ï¼ŒåŒå­¦ä»¬å¯ä»¥é˜…è¯»æœ€æ–°ç‰ˆæœ¬çš„æ–‡æ¡£è·å–æœ€æ–°èµ„æ–™ã€‚</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">å¯¹è±¡å¯ä»¥æœ‰ éƒ¨åˆ†(parts) ï¼Œå®ƒä»¬ä¹Ÿå¯ä»¥æœ‰è‡ªå·±çš„æ ·å¼ã€‚LVGL ä¸­å­˜åœ¨ä»¥ä¸‹é¢„å®šä¹‰éƒ¨åˆ†ï¼š</span><br><span class="line">LV_PART_MAIN  ç±»ä¼¼çŸ©å½¢çš„èƒŒæ™¯</span><br><span class="line">LV_PART_SCROLLBAR  æ»šåŠ¨æ¡</span><br><span class="line">LV_PART_INDICATOR  æŒ‡æ ‡ï¼Œä¾‹å¦‚ç”¨äºæ»‘å—ã€æ¡ã€å¼€å…³æˆ–å¤é€‰æ¡†çš„å‹¾é€‰æ¡†</span><br><span class="line">LV_PART_KNOB  åƒæ‰‹æŸ„ä¸€æ ·å¯ä»¥æŠ“å–è°ƒæ•´å€¼</span><br><span class="line">LV_PART_SELECTED  è¡¨ç¤ºå½“å‰é€‰æ‹©çš„é€‰é¡¹æˆ–éƒ¨åˆ†</span><br><span class="line">LV_PART_ITEMS  å¦‚æœå°éƒ¨ä»¶å…·æœ‰å¤šä¸ªç›¸ä¼¼å…ƒç´ ï¼ˆä¾‹å¦‚è¡¨æ ¼å•å…ƒæ ¼ï¼‰</span><br><span class="line">LV_PART_TICKS  åˆ»åº¦ä¸Šçš„åˆ»åº¦ï¼Œä¾‹å¦‚å¯¹äºå›¾è¡¨æˆ–ä»ªè¡¨</span><br><span class="line">LV_PART_CURSOR  æ ‡è®°ä¸€ä¸ªç‰¹å®šçš„åœ°æ–¹ï¼Œä¾‹å¦‚æ–‡æœ¬åŒºåŸŸæˆ–å›¾è¡¨çš„å…‰æ ‡</span><br><span class="line">LV_PART_CUSTOM_FIRST å¯ä»¥ä»è¿™é‡Œæ·»åŠ è‡ªå®šä¹‰éƒ¨ä»¶ã€‚</span><br><span class="line">è¿™äº›å¯èƒ½ä¼šéšç€lvglçš„æ›´æ–°è€Œä¸æ–­å¢åŠ ï¼ŒåŒå­¦ä»¬å¯ä»¥é˜…è¯»æœ€æ–°ç‰ˆæœ¬çš„æ–‡æ¡£è·å–æœ€æ–°èµ„æ–™ã€‚</span><br></pre></td></tr></table></figure><h4 id="æœ¬åœ°æ ·å¼"><a href="#æœ¬åœ°æ ·å¼" class="headerlink" title="æœ¬åœ°æ ·å¼"></a>æœ¬åœ°æ ·å¼</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">é™¤äº†â€œæ™®é€šâ€ æ ·å¼å¤–ï¼Œå¯¹è±¡è¿˜å¯ä»¥å­˜å‚¨ æœ¬åœ°æ ·å¼(ç§æœ‰æ ·å¼) ã€‚</span><br><span class="line">æœ¬åœ°æ ·å¼ä¸æ™®é€šæ ·å¼ç±»ä¼¼ï¼Œä½†æ˜¯å®ƒä¸èƒ½åœ¨å…¶ä»–å¯¹è±¡ä¹‹é—´å…±äº«ã€‚å¦‚æœä½¿ç”¨æœ¬åœ°æ ·å¼ï¼Œå°†è‡ªåŠ¨åˆ†é…å±€éƒ¨æ ·å¼ï¼Œå¹¶åœ¨åˆ é™¤å¯¹è±¡æ—¶é‡Šæ”¾ã€‚æœ¬åœ°æ ·å¼å¯¹äºå‘å¯¹è±¡æ·»åŠ æœ¬åœ°è‡ªå®šä¹‰å¾ˆæœ‰ç”¨ã€‚</span><br><span class="line">æœ¬åœ°æ ·å¼çš„æ¥å£å‡½æ•°æ˜¯è¿™æ ·çš„æ ¼å¼ï¼š</span><br><span class="line">lv_obj_set_style_&lt;property_name&gt;(obj, &lt;value&gt;, &lt;selector&gt;);</span><br><span class="line">ç¤ºä¾‹ï¼š</span><br><span class="line">lv_obj_set_style_bg_color(obj,  lv_color_hex(0xffffff), 0);   // è®¾ç½®èƒŒæ™¯è‰²lv_obj_set_style_bg_opa(obj, LV_OPA_50, 0);              // è®¾ç½®èƒŒæ™¯é€æ˜åº¦lv_style_set_style_....</span><br><span class="line">åˆ é™¤æœ¬åœ°æ ·å¼çš„æ—¶å€™æˆ‘ä»¬åˆ é™¤æŸä¸€ä¸ªæ ·å¼ï¼š</span><br><span class="line">lv_obj_remove_local_style_prop(obj, LV_STYLE_..., selector);</span><br><span class="line">LV_STYLE_...çš„å–å€¼è¯·çœ‹ï¼š lvgl/src/misc/lv_style.h ä¸­çš„ lv_style_prop_t </span><br></pre></td></tr></table></figure><h4 id="æ ·å¼ç»§æ‰¿"><a href="#æ ·å¼ç»§æ‰¿" class="headerlink" title="æ ·å¼ç»§æ‰¿"></a>æ ·å¼ç»§æ‰¿</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">æŸäº›å±æ€§ï¼ˆé€šå¸¸ä¸æ–‡æœ¬ç›¸å…³ï¼‰å¯ä»¥ä»çˆ¶å¯¹è±¡çš„æ ·å¼ç»§æ‰¿ã€‚ </span><br><span class="line">åªæœ‰æ²¡æœ‰åœ¨ä¸ºå¯¹è±¡è®¾ç½®æ ·å¼å±æ€§çš„æ—¶å€™ï¼Œæ‰åº”ç”¨ç»§æ‰¿ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¦‚æœè¿™ä¸ªå±æ€§æ˜¯å¯ç»§æ‰¿çš„ï¼Œé‚£è¿™ä¸ªå±æ€§çš„å€¼ä¼šåœ¨çˆ¶ç±»ä¸­æ£€ç´¢ï¼Œç›´åˆ°ä¸€ä¸ªå¯¹è±¡ä¸ºè¯¥å±æ€§æŒ‡å®šäº†ä¸€ä¸ªå€¼ã€‚çˆ¶ç±»å°†ä½¿ç”¨è‡ªå·±çš„çŠ¶æ€æ¥ç¡®å®šè¯¥å€¼ã€‚ å› æ­¤ï¼Œå¦‚æœæŒ‰ä¸‹æŒ‰é’®ï¼Œå¹¶ä¸”æ–‡æœ¬é¢œè‰²æ¥è‡ªæ­¤å¤„ï¼Œåˆ™å°†ä½¿ç”¨æŒ‰ä¸‹çš„æ–‡æœ¬é¢œè‰²ã€‚</span><br></pre></td></tr></table></figure><h4 id="è¿‡æ¸¡ç‰¹æ•ˆ"><a href="#è¿‡æ¸¡ç‰¹æ•ˆ" class="headerlink" title="è¿‡æ¸¡ç‰¹æ•ˆ"></a>è¿‡æ¸¡ç‰¹æ•ˆ</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">é»˜è®¤æƒ…å†µä¸‹ï¼Œå½“ä¸€ä¸ªå¯¹è±¡æ”¹å˜çŠ¶æ€ï¼ˆä¾‹å¦‚å®ƒè¢«æŒ‰ä¸‹ï¼‰æ—¶ï¼Œæ–°çŠ¶æ€çš„æ–°å±æ€§ä¼šç«‹å³è®¾ç½®ã€‚ä½†æ˜¯ï¼Œé€šè¿‡è½¬æ¢ï¼Œå¯ä»¥åœ¨çŠ¶æ€æ›´æ”¹æ—¶æ’­æ”¾åŠ¨ç”»ã€‚ ä¾‹å¦‚ï¼ŒæŒ‰ä¸‹æŒ‰é’®æ—¶ï¼Œå…¶èƒŒæ™¯é¢œè‰²å¯ä»¥åœ¨ 300 æ¯«ç§’å†…åŠ¨ç”»æ˜¾ç¤ºä¸ºæŒ‰ä¸‹çš„é¢œè‰²ã€‚</span><br><span class="line">demoä½“éªŒï¼š</span><br><span class="line">https://docs.lvgl.io/8.1/overview/style.html#transitionhttp://lvgl.100ask.net/8.1/overview/style.html#transition</span><br><span class="line">è¿™éƒ¨åˆ†æˆ‘ä»¬åœ¨åé¢è¯¾ç¨‹å†å±•å¼€è®¨è®º</span><br></pre></td></tr></table></figure><h4 id="æ ·å¼ä¸»é¢˜"><a href="#æ ·å¼ä¸»é¢˜" class="headerlink" title="æ ·å¼ä¸»é¢˜"></a>æ ·å¼ä¸»é¢˜</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ä¸»é¢˜æ˜¯é£æ ¼çš„é›†åˆã€‚å¦‚æœå­˜åœ¨æ´»åŠ¨ä¸»é¢˜ï¼ŒLVGLå°†å…¶åº”ç”¨äºæ¯ä¸ªåˆ›å»ºçš„éƒ¨ä»¶(å¯¹è±¡)ã€‚ è¿™å°†ä¸ºUIæä¾›ä¸€ä¸ªé»˜è®¤å¤–è§‚ï¼Œç„¶åå¯ä»¥é€šè¿‡æ·»åŠ æ›´å¤šæ ·å¼å¯¹å…¶è¿›è¡Œä¿®æ”¹ã€‚</span><br><span class="line">demoä½“éªŒï¼š</span><br><span class="line">https://docs.lvgl.io/8.1/overview/style.html#extending-the-current-themehttp://lvgl.100ask.net/8.1/overview/style.html#extending-the-current-theme</span><br><span class="line">è¿™éƒ¨åˆ†åé¢çš„è¯¾ç¨‹å†å±•å¼€è®¨è®ºã€‚</span><br></pre></td></tr></table></figure><h4 id="å®å¼€å…³"><a href="#å®å¼€å…³" class="headerlink" title="å®å¼€å…³"></a>å®å¼€å…³</h4><p>è¯¦è§å®˜æ–¹æ–‡æ¡£</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lv_obj_add/<span class="built_in">clear_flag</span>(obj, LV_OBJ_FLAG_...); å¯ç”¨/ç¦ç”¨</span><br></pre></td></tr></table></figure><h4 id="äº‹ä»¶"><a href="#äº‹ä»¶" class="headerlink" title="äº‹ä»¶"></a>äº‹ä»¶</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">if</span> 0</span></span><br><span class="line"><span class="function"><span class="type">static</span> <span class="type">void</span> <span class="title">my_event_cb</span><span class="params">(<span class="type">lv_event_t</span> * e)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">lv_obj_t</span> * obj = <span class="built_in">lv_event_get_target</span>(e);        <span class="comment">// è·å–è§¦å‘äº‹ä»¶çš„éƒ¨ä»¶(å¯¹è±¡)</span></span><br><span class="line">    <span class="type">lv_event_code_t</span> code = <span class="built_in">lv_event_get_code</span>(e);    <span class="comment">// è·å–å½“å‰éƒ¨ä»¶(å¯¹è±¡)è§¦å‘çš„äº‹ä»¶ä»£ç </span></span><br><span class="line">    <span class="type">lv_obj_t</span> * label = <span class="built_in">lv_event_get_user_data</span>(e);   <span class="comment">// è·å–æ·»åŠ äº‹ä»¶æ—¶ä¼ é€’çš„ç”¨æˆ·æ•°æ®</span></span><br><span class="line">    <span class="type">static</span> <span class="type">int</span> count = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">switch</span>(code)&#123;</span><br><span class="line">        <span class="keyword">case</span> LV_EVENT_PRESSED:</span><br><span class="line">            <span class="built_in">lv_label_set_text</span>(label, <span class="string">&quot;LV_EVENT_PRESSED&quot;</span>);</span><br><span class="line">            <span class="built_in">lv_obj_set_style_bg_color</span>(obj, <span class="built_in">lv_color_hex</span>(<span class="number">0xc43e1c</span>), <span class="number">0</span>);  <span class="comment">// é€šè¿‡æœ¬åœ°æ ·å¼(ç§æœ‰æ ·å¼)è®¾ç½®èƒŒæ™¯è‰²</span></span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;LV_EVENT_PRESSED\n&quot;</span>);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> LV_EVENT_LONG_PRESSED:</span><br><span class="line">            <span class="built_in">lv_label_set_text</span>(label, <span class="string">&quot;LV_EVENT_LONG_PRESSED&quot;</span>);</span><br><span class="line">            <span class="built_in">lv_obj_set_style_bg_color</span>(obj, <span class="built_in">lv_color_hex</span>(<span class="number">0x4cbe37</span>), <span class="number">0</span>);  <span class="comment">// é€šè¿‡æœ¬åœ°æ ·å¼(ç§æœ‰æ ·å¼)è®¾ç½®èƒŒæ™¯è‰²</span></span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;LV_EVENT_LONG_PRESSED\n&quot;</span>);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">            <span class="comment">//lv_label_set_text(label,&quot;Bsgbsg7&quot;);</span></span><br><span class="line">            <span class="comment">//lv_obj_set_style_bg_color(obj, lv_color_hex(0xcc33ff), 0);</span></span><br><span class="line">            <span class="comment">//printf(&quot;default\n&quot;);</span></span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">lv_100ask_demo_course_2_2_6</span><span class="params">(<span class="type">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">/* åˆ›å»ºåŸºç¡€éƒ¨ä»¶(å¯¹è±¡) */</span></span><br><span class="line">    <span class="type">lv_obj_t</span> * obj = <span class="built_in">lv_obj_create</span>(<span class="built_in">lv_scr_act</span>());</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* åˆ›å»ºlabeléƒ¨ä»¶(å¯¹è±¡) */</span></span><br><span class="line">    <span class="type">lv_obj_t</span> * label = <span class="built_in">lv_label_create</span>(<span class="built_in">lv_scr_act</span>());</span><br><span class="line">    <span class="built_in">lv_label_set_text</span>(label, <span class="string">&quot;Bsgbsg7&quot;</span>);   <span class="comment">// è®¾ç½®labelå±•ç¤ºçš„æ–‡å­—</span></span><br><span class="line">    <span class="built_in">lv_obj_center</span>(label);               <span class="comment">// å°†å¯¹è±¡ä¸å…¶çˆ¶å¯¹è±¡çš„ä¸­å¿ƒå¯¹é½,è¿™é‡Œçš„çˆ¶å¯¹è±¡æ˜¯å±å¹•:lv_scr_act()</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä¸ºobj1æ·»åŠ äº‹ä»¶å›è°ƒå‡½æ•°,æ‰€æœ‰çš„äº‹ä»¶ç±»å‹éƒ½èƒ½è§¦å‘è¯¥å›è°ƒå‡½æ•°</span></span><br><span class="line">    <span class="built_in">lv_obj_add_event_cb</span>(obj, my_event_cb, LV_EVENT_ALL, label);</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span> <span class="comment">// 0</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/* äº‹ä»¶å†’æ³¡ */</span></span><br><span class="line"><span class="meta">#<span class="keyword">if</span> 1</span></span><br><span class="line"><span class="function"><span class="type">static</span> <span class="type">void</span> <span class="title">my_event_cb</span><span class="params">(<span class="type">lv_event_t</span> * e)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">lv_obj_t</span> * obj = <span class="built_in">lv_event_get_target</span>(e);            <span class="comment">// è·å–è§¦å‘äº‹ä»¶çš„å¯¹è±¡</span></span><br><span class="line">    <span class="type">lv_obj_t</span> * parent = <span class="built_in">lv_event_get_current_target</span>(e); <span class="comment">// è·å–è§¦å‘äº‹ä»¶å¯¹è±¡çš„çˆ¶å¯¹è±¡(äº‹ä»¶å†’æ³¡æ‰æœ‰)</span></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">        æ³¨æ„æ­¤å¤„çš„parentè·å–åˆ°äº†æœ€å¤–å±‚çš„ï¼Œå³obj1</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="type">lv_event_code_t</span> code = <span class="built_in">lv_event_get_code</span>(e);        <span class="comment">// è·å–å½“å‰éƒ¨ä»¶è§¦å‘çš„äº‹ä»¶ä»£ç </span></span><br><span class="line">    <span class="type">lv_obj_t</span> * label = <span class="built_in">lv_event_get_user_data</span>(e);       <span class="comment">// è·å–æ·»åŠ äº‹ä»¶æ—¶ä¼ é€’çš„ç”¨æˆ·æ•°æ®</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">switch</span>(code)&#123;</span><br><span class="line">        <span class="keyword">case</span> LV_EVENT_PRESSED:</span><br><span class="line">            <span class="built_in">lv_label_set_text</span>(label, <span class="string">&quot;LV_EVENT_PRESSED&quot;</span>);</span><br><span class="line">            <span class="built_in">lv_obj_align_to</span>(label, obj, LV_ALIGN_CENTER, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">            <span class="built_in">lv_obj_set_style_bg_color</span>(parent, <span class="built_in">lv_color_hex</span>(<span class="number">0xc43e1c</span>), <span class="number">0</span>);   <span class="comment">// é€šè¿‡æœ¬åœ°æ ·å¼(ç§æœ‰æ ·å¼)è®¾ç½®èƒŒæ™¯è‰²</span></span><br><span class="line">            <span class="built_in">lv_obj_set_style_bg_color</span>(obj, <span class="built_in">lv_color_hex</span>(<span class="number">0xc43e1c</span>), <span class="number">0</span>);      <span class="comment">// é€šè¿‡æœ¬åœ°æ ·å¼(ç§æœ‰æ ·å¼)è®¾ç½®èƒŒæ™¯è‰²</span></span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;LV_EVENT_PRESSED\n&quot;</span>);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> LV_EVENT_CLICKED:</span><br><span class="line">            <span class="built_in">lv_obj_remove_local_style_prop</span>(parent, LV_STYLE_BG_COLOR, <span class="number">0</span>);   <span class="comment">// åˆ é™¤é€šè¿‡æœ¬åœ°æ ·å¼(ç§æœ‰æ ·å¼)è®¾ç½®çš„èƒŒæ™¯è‰²</span></span><br><span class="line">            <span class="built_in">lv_obj_remove_local_style_prop</span>(obj, LV_STYLE_BG_COLOR, <span class="number">0</span>);      <span class="comment">// åˆ é™¤é€šè¿‡æœ¬åœ°æ ·å¼(ç§æœ‰æ ·å¼)è®¾ç½®çš„èƒŒæ™¯è‰²</span></span><br><span class="line">            <span class="built_in">lv_label_set_text</span>(label, <span class="string">&quot;Bsgbsg7&quot;</span>);</span><br><span class="line">            <span class="built_in">lv_obj_align_to</span>(label, obj, LV_ALIGN_CENTER, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;LV_EVENT_CLICKED\n&quot;</span>);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">            <span class="comment">//printf(&quot;NONE\n&quot;);</span></span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">lv_100ask_demo_course_2_2_6</span><span class="params">(<span class="type">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">/* åˆ›å»ºä¸€ä¸ªåŸºç¡€å¯¹è±¡ obj1 */</span></span><br><span class="line">    <span class="type">lv_obj_t</span> * obj1 = <span class="built_in">lv_obj_create</span>(<span class="built_in">lv_scr_act</span>());</span><br><span class="line">    <span class="built_in">lv_obj_set_size</span>(obj1, <span class="number">450</span>, <span class="number">250</span>);</span><br><span class="line">    <span class="built_in">lv_obj_center</span>(obj1);                                <span class="comment">// å°†å¯¹è±¡ä¸å…¶çˆ¶å¯¹è±¡çš„ä¸­å¿ƒå¯¹é½ï¼Œè¿™é‡Œçš„çˆ¶å¯¹è±¡æ˜¯å±å¹•ï¼šlv_scr_act()</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* ä»¥ obj1 åˆ›å»ºä¸€ä¸ªåŸºç¡€å¯¹è±¡ obj2 */</span></span><br><span class="line">    <span class="type">lv_obj_t</span> * obj2 = <span class="built_in">lv_obj_create</span>(obj1);</span><br><span class="line">    <span class="built_in">lv_obj_set_size</span>(obj2, <span class="number">400</span>, <span class="number">200</span>);</span><br><span class="line">    <span class="built_in">lv_obj_center</span>(obj2);                                <span class="comment">// å°†å¯¹è±¡ä¸å…¶çˆ¶å¯¹è±¡çš„ä¸­å¿ƒå¯¹é½ï¼Œè¿™é‡Œçš„çˆ¶å¯¹è±¡æ˜¯å±å¹•ï¼šobj1</span></span><br><span class="line">    <span class="built_in">lv_obj_add_flag</span>(obj2, LV_OBJ_FLAG_EVENT_BUBBLE);    <span class="comment">// å¯ç”¨äº‹ä»¶å†’æ³¡ï¼Œå°†æ¥æ”¶åˆ°çš„æ‰€æœ‰äº‹ä»¶ä¼ æ’­ç»™çˆ¶çº§</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* ä»¥ obj2 åˆ›å»ºä¸€ä¸ªåŸºç¡€å¯¹è±¡ obj3 */</span></span><br><span class="line">    <span class="type">lv_obj_t</span> * obj3 = <span class="built_in">lv_obj_create</span>(obj2);</span><br><span class="line">    <span class="built_in">lv_obj_set_size</span>(obj3, <span class="number">350</span>, <span class="number">150</span>);</span><br><span class="line">    <span class="built_in">lv_obj_center</span>(obj3);                                <span class="comment">// å°†å¯¹è±¡ä¸å…¶çˆ¶å¯¹è±¡çš„ä¸­å¿ƒå¯¹é½ï¼Œè¿™é‡Œçš„çˆ¶å¯¹è±¡æ˜¯å±å¹•ï¼šobj2</span></span><br><span class="line">    <span class="built_in">lv_obj_add_flag</span>(obj3, LV_OBJ_FLAG_EVENT_BUBBLE);    <span class="comment">// å¯ç”¨äº‹ä»¶å†’æ³¡ï¼Œå°†æ¥æ”¶åˆ°çš„æ‰€æœ‰äº‹ä»¶ä¼ æ’­ç»™çˆ¶çº§</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* ä»¥ obj3 åˆ›å»ºä¸€ä¸ªåŸºç¡€å¯¹è±¡ obj4 */</span></span><br><span class="line">    <span class="type">lv_obj_t</span> * obj4 = <span class="built_in">lv_obj_create</span>(obj3);</span><br><span class="line">    <span class="built_in">lv_obj_set_size</span>(obj4, <span class="number">300</span>, <span class="number">100</span>);</span><br><span class="line">    <span class="built_in">lv_obj_center</span>(obj4);                                <span class="comment">// å°†å¯¹è±¡ä¸å…¶çˆ¶å¯¹è±¡çš„ä¸­å¿ƒå¯¹é½ï¼Œè¿™é‡Œçš„çˆ¶å¯¹è±¡æ˜¯å±å¹•ï¼šobj3</span></span><br><span class="line">    <span class="built_in">lv_obj_add_flag</span>(obj4, LV_OBJ_FLAG_EVENT_BUBBLE);    <span class="comment">// å¯ç”¨äº‹ä»¶å†’æ³¡ï¼Œå°†æ¥æ”¶åˆ°çš„æ‰€æœ‰äº‹ä»¶ä¼ æ’­ç»™çˆ¶çº§</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* ä»¥å±å¹•ä¸ºçˆ¶ç±»ï¼Œåˆ›å»ºä¸€ä¸ªlabeléƒ¨ä»¶(å¯¹è±¡) */</span></span><br><span class="line">    <span class="type">lv_obj_t</span> * label = <span class="built_in">lv_label_create</span>(<span class="built_in">lv_scr_act</span>());</span><br><span class="line">    <span class="built_in">lv_label_set_text</span>(label, <span class="string">&quot;Bsgbsg7&quot;</span>);                               <span class="comment">// è®¾ç½®labelå±•ç¤ºçš„æ–‡å­—</span></span><br><span class="line">    <span class="built_in">lv_obj_align_to</span>(label, obj1, LV_ALIGN_CENTER, <span class="number">0</span>, <span class="number">0</span>);       <span class="comment">// å°†labelç›¸å¯¹äºobj1å¯¹é½</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//å°†ç»™obj1æ·»åŠ äº‹ä»¶å›è°ƒå‡½æ•°ï¼Œæ‰€æœ‰çš„äº‹ä»¶ç±»å‹éƒ½èƒ½è§¦å‘è¯¥å›è°ƒå‡½æ•°</span></span><br><span class="line">    <span class="built_in">lv_obj_add_event_cb</span>(obj1, my_event_cb, LV_EVENT_ALL, label);</span><br><span class="line">     <span class="comment">/*</span></span><br><span class="line"><span class="comment">        æ³¨æ„æ­¤å¤„åº”è¯¥ç†è§£ä¸ºobj2,3,4è¢«è§¦å‘ä¹‹åï¼Œä¼šå°†äº‹ä»¶ä¼ ç»™çˆ¶ç±»ï¼Œç›´åˆ°ä¼ åˆ°èƒ½å¤Ÿå¤„ç†æ­¤äº‹ä»¶çš„çˆ¶ç±»ï¼ˆå³lv_obj_add_event_cbå†…éƒ¨çš„objï¼‰</span></span><br><span class="line"><span class="comment">        å¦‚æœæ˜¯obj2ï¼Œåˆ™éƒ½ä¼šä¼ ç»™obj2å¤„ç†ï¼Œobj1æ— æ³•å¤„ç†</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span> <span class="comment">// 1</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span> </span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æ·»åŠ äº‹ä»¶</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">lv_obj_add_event_cb</span>(obj, event_cb, event_code, user_data);</span><br></pre></td></tr></table></figure><p>å‘é€äº‹ä»¶</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">lv_event_send</span>(obj, event_cb, event_code, user_data);</span><br></pre></td></tr></table></figure><p>åˆ é™¤äº‹ä»¶</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">lv_obj_remove_event_cb</span>(obj, event_cb);</span><br><span class="line"><span class="built_in">lv_obj_remove_event_dsc</span>(obj, event_dsc);    </span><br><span class="line"><span class="comment">//event_dsc æ˜¯ lv_obj_add_event_cb è¿”å›çš„æŒ‡é’ˆ</span></span><br></pre></td></tr></table></figure><p>äº‹ä»¶ç±»å‹(event_code)</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥è®¾å¤‡äº‹ä»¶(Input device events)</span><br><span class="line">ç»˜å›¾äº‹ä»¶(Drawing events)</span><br><span class="line">å…¶ä»–äº‹ä»¶(Special events)</span><br><span class="line">ç‰¹æ®Šäº‹ä»¶(Other events)</span><br><span class="line">è‡ªå®šä¹‰äº‹ä»¶(Custom events)</span><br><span class="line"></span><br><span class="line">æ›´å…¨é¢çš„ä¿¡æ¯è¯·æŸ¥é˜…ï¼š</span><br><span class="line">æºç ï¼šlvgl/src/core/lv_event.h    (lv_event_code_t)</span><br><span class="line">å¼€å‘æ–‡æ¡£ï¼š</span><br><span class="line">è‹±æ–‡ï¼šhttps://docs.lvgl.io/8.1/overview/event.html#event-codes</span><br><span class="line">ä¸­æ–‡ï¼šhttp://lvgl.100ask.net/8.1/overview/event.html#event-codes</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>äº‹ä»¶å›è°ƒå‡½æ•°çš„ lv_event_t å‚æ•°</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">äº‹ä»¶å›è°ƒå‡½æ•°åªæœ‰ä¸€ä¸ªå‚æ•°ï¼Œè¿™ä¸ªå‚æ•°å¯¹æˆ‘ä»¬çš„ä½œä¸ºéå¸¸å¤§ï¼Œç°åœ¨çš„ç‰ˆæœ¬æä¾›è¿™äº›åŠŸèƒ½ï¼š</span><br><span class="line">static void my_event_cb(lv_event_t * event);</span><br><span class="line">è·å–è§¦å‘çš„äº‹ä»¶ä»£ç ï¼š</span><br><span class="line">lv_event_code_t code = lv_event_get_code(e);</span><br><span class="line">è·å–è§¦å‘äº‹ä»¶çš„å¯¹è±¡ï¼š</span><br><span class="line">lv_obj_t * target = lv_event_get_target(e);</span><br><span class="line">è·å–æœ€åˆè§¦å‘äº‹ä»¶çš„å¯¹è±¡(äº‹ä»¶å†’æ³¡)ï¼š</span><br><span class="line">lv_obj_t * target = lv_event_get_current_target(e);</span><br><span class="line">è·å–äº‹ä»¶ä¼ é€’çš„ç”¨æˆ·æ•°æ®ï¼š</span><br><span class="line">lv_event_get_user_data(e); è·å–ä½¿ç”¨ lv_obj_add_event_cb ä¼ é€’çš„ç”¨æˆ·æ•°æ®</span><br><span class="line">lv_event_get_param(e); è·å–ä½¿ç”¨ lv_event_send ä¼ é€’çš„ç”¨æˆ·æ•°æ®</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ä¸€ä¸ªäº‹ä»¶å›è°ƒå‡½æ•°å¯ç»™å¤šä¸ªå¯¹è±¡ä½¿ç”¨</span><br><span class="line">ä¸€ä¸ªå¯¹è±¡å¯ä»¥ä½¿ç”¨å¤šä¸ªäº‹ä»¶å›è°ƒå‡½æ•°</span><br><span class="line"></span><br><span class="line">å¦‚æœä¼ å…¥çš„ç”¨æˆ·æ•°æ®ä¸ä¸€æ ·ï¼Œä¸€ä¸ªå¯¹è±¡å¯ä»¥ç»‘å®šåŒä¸€ä¸ªäº‹ä»¶å›è°ƒå‡½æ•°å¤šæ¬¡ï¼Œäº‹ä»¶å°†æŒ‰ç…§æ·»åŠ çš„é¡ºåºè°ƒç”¨ã€‚ä¾‹å¦‚ï¼š</span><br><span class="line">lv_obj_add_event_cb(obj, my_clicked_event_cb, LV_EVENT_CLICKED, &amp;num1);</span><br><span class="line">lv_obj_add_event_cb(obj, my_clicked_event_cb, LV_EVENT_CLICKED, &amp;num2);</span><br></pre></td></tr></table></figure><p>äº‹ä»¶å†’æ³¡</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">å¯ç”¨æ–¹å¼ï¼š</span><br><span class="line">lv_obj_add_flag(obj, LV_OBJ_FLAG_EVENT_BUBBLE)ï¼Œè¯¥å¯¹è±¡çš„æ‰€æœ‰äº‹ä»¶å°†ä¼šå‘é€åˆ°è¯¥å¯¹è±¡çš„çˆ¶çº§ï¼Œä¾æ­¤ç±»æ¨ã€‚</span><br><span class="line">lv_event_get_target(e); è·å–è§¦å‘äº‹ä»¶çš„å½“å‰å¯¹è±¡ã€‚</span><br><span class="line">lv_event_get_current_target(e); è·å–äº‹ä»¶å†’æ³¡çš„çˆ¶å¯¹è±¡ã€‚</span><br></pre></td></tr></table></figure><p>æ ‡ç­¾</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line">#include &quot;../../lv_100ask_teach_demos.h&quot;</span><br><span class="line">#if LV_USE_100ASK_DEMO_COURSE_3_1_1</span><br><span class="line">#include &quot;lv_100ask_demo_course_3_1_1.h&quot;</span><br><span class="line">//extern lv_font_t bsg;</span><br><span class="line">static void label_event_cb(lv_event_t * e)</span><br><span class="line">&#123;</span><br><span class="line">    lv_obj_t * label = lv_event_get_target(e);        // è·å–è§¦å‘äº‹ä»¶çš„éƒ¨ä»¶(å¯¹è±¡)</span><br><span class="line">    lv_event_code_t code = lv_event_get_code(e);    // è·å–å½“å‰éƒ¨ä»¶(å¯¹è±¡)è§¦å‘çš„äº‹ä»¶ä»£ç </span><br><span class="line">    lv_obj_set_style_bg_opa(label, 100,0);</span><br><span class="line">    switch(code)&#123;</span><br><span class="line">        case LV_EVENT_PRESSED:</span><br><span class="line">            lv_label_set_text(label, &quot;LV_EVENT_PRESSED&quot;);</span><br><span class="line">            lv_obj_set_style_bg_color(label, lv_color_hex(0xc43e1c), 0);  // é€šè¿‡æœ¬åœ°æ ·å¼(ç§æœ‰æ ·å¼)è®¾ç½®èƒŒæ™¯è‰²</span><br><span class="line">            //printf(&quot;LV_EVENT_PRESSED\n&quot;);</span><br><span class="line">            break;</span><br><span class="line">        case LV_EVENT_LONG_PRESSED:</span><br><span class="line">            lv_label_set_text(label, &quot;LV_EVENT_LONG_PRESSED&quot;);</span><br><span class="line">            lv_obj_set_style_bg_color(label, lv_color_hex(0x4cbe37), 0);  // é€šè¿‡æœ¬åœ°æ ·å¼(ç§æœ‰æ ·å¼)è®¾ç½®èƒŒæ™¯è‰²</span><br><span class="line">            //printf(&quot;LV_EVENT_LONG_PRESSED\n&quot;);</span><br><span class="line">            break;</span><br><span class="line">        default:</span><br><span class="line">            //printf(&quot;NONE\n&quot;);</span><br><span class="line">            break;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void lv_100ask_demo_course_3_1_1(void)</span><br><span class="line">&#123;</span><br><span class="line">    LV_FONT_DECLARE(bsg);</span><br><span class="line">    char * text = &quot;Wecome to Bsgbsg7&#x27;s LVGL&quot;;   // è¦æ˜¾ç¤ºçš„æ–‡å­—</span><br><span class="line">    // åˆ›å»ºä¸€ä¸ªlabeléƒ¨ä»¶(å¯¹è±¡),ä»–çš„çˆ¶å¯¹è±¡æ˜¯æ´»åŠ¨å±å¹•å¯¹è±¡</span><br><span class="line">    lv_obj_t * label = lv_label_create(lv_scr_act());</span><br><span class="line">    //lv_obj_set_size(label,500,50);</span><br><span class="line">    lv_obj_center(label);</span><br><span class="line"></span><br><span class="line">    /* å‡½æ•°ä¸­ä¼šå¦å¤–å¼€è¾Ÿå’Œç»™å®šçš„å­—ç¬¦ä¸²å¤§å°çš„ç©ºé—´å­˜æ”¾å­—ç¬¦ä¸²ï¼ˆå¸¸ç”¨ï¼‰ */</span><br><span class="line">    lv_label_set_text(label, text);</span><br><span class="line">    //lv_label_set_text(label, &quot;Wecome to Bsgbsg7&#x27;s LVGL&quot;);</span><br><span class="line"></span><br><span class="line">    /* ä¹Ÿä¼šå¦å¤–å¼€è¾Ÿç©ºé—´å­˜æ”¾å­—ç¬¦ä¸²ï¼Œä½†æ˜¯å¯ä»¥åƒprintfæ ¼å¼åŒ–å­—ç¬¦ä¸² */</span><br><span class="line">    //lv_label_set_text_fmt(label, &quot;%s: %d&quot;,text, 30);</span><br><span class="line"></span><br><span class="line">    /* ç›´æ¥ä½¿ç”¨ç»™å®šçš„ç¼“å†²åŒº(ä¸å¸¸ç”¨) */</span><br><span class="line">    //lv_label_set_text_static(label, text);</span><br><span class="line">    //lv_label_set_long_mode(label, LV_LABEL_LONG_SCROLL_CIRCULAR  ) ;</span><br><span class="line"></span><br><span class="line">    /*</span><br><span class="line">    è®¾ç½®æ–‡æœ¬é¢œè‰²ï¼š</span><br><span class="line">         lv_style_set_text_color(&amp;style_obj, lv_color_hex(0xf7b37b));</span><br><span class="line">         lv_obj_set_style_text_color(label, lv_color_hex(0xf7b37b), 0);</span><br><span class="line">    */</span><br><span class="line">    //lv_style_set_text_color(&amp;style_obj, lv_color_hex(0xf7b37b));</span><br><span class="line">    //lv_obj_set_style_text_color(label, lv_color_hex(0xf7b37b),0);</span><br><span class="line">    //lv_obj_set_style_bg_color(label, lv_color_hex(0xf5b37b),0);</span><br><span class="line">    //lv_obj_set_style_bg_opa(label, 100,0);</span><br><span class="line"></span><br><span class="line">    //lv_label_set_recolor(label, true);</span><br><span class="line">    //lv_label_set_text(label, &quot;#0000ff Re-color# #ff00ff words# #ff0000 of a# label&quot;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    /*</span><br><span class="line">    æ–‡æœ¬é€‰æ‹©ï¼š</span><br><span class="line">        lv_label_set_text_sel_start(label, 1);</span><br><span class="line">        lv_label_set_text_sel_end(label, 6);</span><br><span class="line">    */</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    /* è®¾ç½®æ–‡å­—å­—å·(å†…ç½®ASCIIå­—åº“) */</span><br><span class="line">    /* ä½¿ç”¨å…¶ä»–å­—å·çš„å­—ä½“ï¼Œå¦‚æœä¸è®¾ç½®é»˜è®¤ä½¿ç”¨ lv_font_montserrat_14 ï¼Œåœ¨ lv_conf.h ä¸­ LV_FONT_DEFAULT å®šä¹‰ */</span><br><span class="line">    lv_obj_set_style_text_font(label, &amp;bsg, 0);</span><br><span class="line">    lv_label_set_text(label, &quot;å±±ä¸œå¤§å­¦ï¼ˆé’å²›ï¼‰&quot;);</span><br><span class="line"></span><br><span class="line">    //lv_label_set_text(label, LV_SYMBOL_OK LV_SYMBOL_WIFI LV_SYMBOL_PLAY); // å¤šä¸ªå›¾æ ‡ä¸€èµ·ä½¿ç”¨</span><br><span class="line"></span><br><span class="line">    /* è®© label å¯ä»¥å“åº”è¾“å…¥äº‹ä»¶ */</span><br><span class="line">    //lv_obj_add_flag(label, LV_OBJ_FLAG_CLICKABLE);</span><br><span class="line">    //lv_obj_add_event_cb(label, label_event_cb, LV_EVENT_ALL, 0);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#endif /* LV_USE_100ASK_DEMO_COURSE_3_1_1 */</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>åœ¨ç›’å­æ¨¡å‹é‡Œé¢ï¼Œæ ‡ç­¾çš„ç»„æˆåŒ…æ‹¬ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">LV_PART_MAIN çŸ©å½¢éƒ¨åˆ†(ç›’å­åŒºåŸŸ)ã€‚ å¡«å……å€¼å¯ç”¨äºåœ¨æ–‡æœ¬å’ŒèƒŒæ™¯ä¹‹é—´æ·»åŠ ç©ºé—´ã€‚</span><br><span class="line">LV_PART_SCROLLBAR å½“è¦å±•ç¤ºçš„æ–‡æœ¬å¤§äºéƒ¨ä»¶çš„å¤§å°æ—¶ï¼Œæ˜¾ç¤ºçš„æ»šåŠ¨æ¡éƒ¨åˆ†ã€‚</span><br><span class="line">LV_PART_SELECTED é€‰ä¸­æ–‡æœ¬æ—¶ï¼Œçªå‡ºæ˜¾ç¤ºçš„éƒ¨åˆ†ã€‚</span><br><span class="line">labelåªèƒ½ä½¿ç”¨ text_color å’Œ bg_color æ ·å¼å±æ€§ã€‚</span><br></pre></td></tr></table></figure><p>åˆ›å»ºæ ‡ç­¾ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lv_obj_t * label = lv_label_create(parent);</span><br></pre></td></tr></table></figure><p>è®¾ç½®æ˜¾ç¤ºæ–‡æœ¬</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">ç›´æ¥è®¾ç½®è¦æ˜¾ç¤ºçš„æ–‡æœ¬ï¼š</span><br><span class="line">  lv_label_set_text(label, &quot;New text&quot;);</span><br><span class="line"></span><br><span class="line">æ ¼å¼åŒ–ç»™å®šè¦æ˜¾ç¤ºçš„æ–‡æœ¬ï¼š</span><br><span class="line">  lv_label_set_text_fmt(label, â€œ%s: %dâ€, â€œValueâ€, 15);</span><br><span class="line"></span><br><span class="line">æ–‡æœ¬ä¸å­˜å‚¨åœ¨åŠ¨æ€å†…å­˜ä¸­ï¼Œè€Œæ˜¯ç›´æ¥ä½¿ç”¨ç»™å®šçš„ç¼“å†²åŒºï¼š</span><br><span class="line">  lv_label_set_text_static(label, &quot;New text&quot;);</span><br><span class="line"></span><br><span class="line">è¦åœ¨labelæ¢è¡Œéå¸¸ç®€å•ï¼Œåƒprintfå‡½æ•°é‚£æ ·ä½¿ç”¨ \n å³å¯ï¼š</span><br><span class="line">  lv_label_set_text(label, &quot; line1\nline2\n\nline4 &quot;);</span><br></pre></td></tr></table></figure><p>å¤§å°</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lv_label_set_long_mode(label, LV_LABEL_LONG_...) æŒ‡å®šæ¨¡å¼ã€‚</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">é»˜è®¤æƒ…å†µæ ‡ç­¾çš„å¤§å°ä¼šè‡ªåŠ¨æ‹“å±•æˆå’Œæ–‡æœ¬ä¸€æ ·çš„å¤§å°(LV_SIZE_CONTENT)</span><br><span class="line">  lv_obj_set_size  lv_obj_set_width  lv_obj_set_height</span><br><span class="line"></span><br><span class="line">ä¸‹é¢æ˜¯å‡ ç§æ¨¡å¼ï¼š</span><br><span class="line">  LV_LABEL_LONG_WRAP ã€</span><br><span class="line">  å¦‚æœæœ‰å¤šä¸ªæ¢è¡Œï¼Œå¹¶ä¸”å¦‚æœé«˜åº¦ä¸ºLV_SIZE_CONTENTï¼Œé‚£ä¹ˆé«˜åº¦ä¼šæ ¹æ®æ–‡æœ¬æ¢è¡Œè¢«è‡ªåŠ¨æ‰©å±•ï¼›å¦åˆ™æ–‡æœ¬å°†è¢«å‰ªæ‰ã€‚(é»˜è®¤è®¾ç½®)</span><br><span class="line">  </span><br><span class="line">  LV_LABEL_LONG_DOT </span><br><span class="line">  å¦‚æœæ–‡æœ¬å¤ªé•¿ï¼Œå°±ä¿æŒå¤§å°å¹¶åœ¨æœ«å°¾å†™3ä¸ªç‚¹ .</span><br><span class="line">  </span><br><span class="line">  LV_LABEL_LONG_SCROLL </span><br><span class="line">  å¦‚æœæ–‡æœ¬æ¯”æ ‡ç­¾å®½(å¤ªé•¿)ï¼Œåˆ™å¯ä»¥æ°´å¹³æ¥å›æ»šåŠ¨æ˜¾ç¤ºå®ƒã€‚å¦‚æœå®ƒå¾ˆé«˜(å¤šä¸ª\næ¢è¡Œ)ï¼Œå¯ä»¥å‚ç›´æ»šåŠ¨ã€‚åªæ»šåŠ¨ä¸€ä¸ªæ–¹å‘ï¼Œæ°´å¹³æ»šåŠ¨çš„ä¼˜å…ˆçº§æ›´é«˜ã€‚</span><br><span class="line">  </span><br><span class="line">  LV_LABEL_LONG_SCROLL_CIRCULAR </span><br><span class="line">  å¦‚æœæ–‡æœ¬æ¯”æ ‡ç­¾å®½ï¼Œåˆ™æ°´å¹³æ»šåŠ¨å®ƒã€‚å¦‚æœå®ƒæ›´é«˜ï¼Œå°±å‚ç›´æ»šåŠ¨ã€‚åªæ»šåŠ¨ä¸€ä¸ªæ–¹å‘ï¼Œæ°´å¹³æ»šåŠ¨çš„ä¼˜å…ˆçº§æ›´é«˜ã€‚</span><br><span class="line">  </span><br><span class="line">  LV_LABEL_LONG_CLIP </span><br><span class="line">  å‰ªæ‰è¶…å‡ºæ ‡ç­¾èŒƒå›´å¤–çš„æ–‡æœ¬éƒ¨åˆ†ã€‚</span><br><span class="line"></span><br><span class="line">æ³¨æ„ï¼šLV_LABEL_LONG_DOT æ˜¯ç›´æ¥æ“ä½œæ–‡æœ¬ç¼“å†²åŒºä»¥æ·»åŠ /åˆ é™¤ç‚¹ã€‚å¦‚æœä½¿ç”¨ lv_label_set_text å’Œ lv_label_set_text_fmt å®ƒä»¬ä¼šåˆ†é…ä¸€ä¸ªå•ç‹¬çš„ç¼“å†²åŒºï¼Œä¸ä¼šå‡ºé—®é¢˜ã€‚ä½†æ˜¯å¦‚æœä½¿ç”¨ lv_label_set_text_static æ—¶æˆ‘ä»¬ä¼ é€’ç»™å®ƒçš„ç¼“å†²åŒºå¿…é¡»æ˜¯å¯å†™çš„ã€‚</span><br></pre></td></tr></table></figure><p>æ–‡æœ¬ç€è‰²</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">lv_style_set_text_color(&amp;style_obj, lv_color_hex(0xf7b37b));</span><br><span class="line">lv_obj_set_style_text_color(label, lv_color_hex(0xf7b37b), 0);</span><br></pre></td></tr></table></figure><p>ä¹Ÿå¯ä»¥è®©æ–‡æœ¬æŸäº›éƒ¨åˆ†é‡æ–°ç€è‰²ï¼Œä¾‹å¦‚ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">lv_label_set_recolor(label1, true);</span><br><span class="line">lv_label_set_text(label1, &quot;#0000ff Re-color# #ff00ff words# #ff0000 of a# label);</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æ–‡æœ¬é€‰æ‹©</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">å¦‚æœåœ¨ lv_conf.h ä¸­æ‰“å¼€äº† LV_LABEL_TEXT_SELECTION (é»˜è®¤å¼€å¯)ï¼Œå°±å¯ä»¥é€‰æ‹©éƒ¨åˆ†æ–‡æœ¬äº†ã€‚è¿™ä¸ªå’Œæˆ‘ä»¬åœ¨PCç”¨é¼ æ ‡é€‰ä¸­æ–‡æœ¬ç±»ä¼¼ï¼Œä½†æ˜¯è¿™ä¸ªæ•ˆæœåªèƒ½åœ¨æ–‡æœ¬æ¡†(lv_textarea)ä¸­å®ç°ã€‚Labelåªèƒ½äº‹å…ˆæ‰‹åŠ¨é€‰æ‹©æŒ‡å®šèŒƒå›´çš„æ–‡æœ¬ï¼š</span><br><span class="line">  lv_label_set_text_sel_start(label, 1);</span><br><span class="line">  lv_label_set_text_sel_end(label, 6);</span><br><span class="line">æ³¨æ„ï¼Œè¿™é‡Œçš„ç¬¬ä¸€ä¸ªå­—ç¬¦ä»1å¼€å§‹ç®—ï¼Œè€Œä¸æ˜¯0ã€‚</span><br></pre></td></tr></table></figure><p>æ˜¾ç¤ºå›¾æ ‡</p><p><img src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221223001642589.png" alt="image-20221223001642589"></p><p>ç”¨æ³•(<strong>LV_SYMBOL_â€¦</strong>)ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">lv_label_set_text(my_label, LV_SYMBOL_OK); // ç›´æ¥æ˜¾ç¤ºå›¾æ ‡</span><br><span class="line">lv_label_set_text(my_label, LV_SYMBOL_OK â€œApplyâ€);  // å›¾æ ‡ä¸å­—ç¬¦ä¸²ä¸€èµ·ä½¿ç”¨</span><br><span class="line">lv_label_set_text(my_label, LV_SYMBOL_OK LV_SYMBOL_WIFI LV_SYMBOL_PLAY);  // å¤šä¸ªå›¾æ ‡ä¸€èµ·ä½¿ç”¨</span><br></pre></td></tr></table></figure><p>äº‹ä»¶å¤„ç†</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Labelé»˜è®¤ä¸æ¥æ”¶è¾“å…¥äº‹ä»¶ï¼Œå¦‚æœæˆ‘ä»¬æƒ³è®¾ç½®è¾“å…¥ç±»å‹çš„æ ·å¼æˆ–è€…äº‹ä»¶ä¼šæ— æ³•ç”Ÿæ•ˆï¼Œå°±éœ€è¦æ‰“å¼€ LV_OBJ_FLAG_CLICKABLEï¼Œç¤ºä¾‹ï¼š</span><br><span class="line">  lv_obj_add_flag(label, LV_OBJ_FLAG_CLICKABLE); // ä½¿è¾“å…¥è®¾å¤‡å¯ç‚¹å‡»å¯¹è±¡</span><br></pre></td></tr></table></figure><p>æ˜¾ç¤ºä¸­æ–‡</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">LVGLå†…ç½®æœ‰ä¸€ä¸ªä¸­æ–‡å­—åº“ [CJK](https://zh.wikipedia.org/wiki/ä¸­æ—¥éŸ“çµ±ä¸€è¡¨æ„æ–‡å­—)[å­—åº“](https://zh.wikipedia.org/wiki/ä¸­æ—¥éŸ“çµ±ä¸€è¡¨æ„æ–‡å­—) ï¼Œè¿™ä¸ªå­—åº“åœ¨ lv_conf.hä¸­å®šä¹‰ä¸ºï¼šLV_FONT_SIMSUN_16_CJKã€‚</span><br><span class="line"></span><br><span class="line">è¦åœ¨lvglä¸­ä½¿ç”¨æ˜¾ç¤ºè‡ªå·±çš„ä¸­æ–‡å­—åº“ï¼Œæˆ‘ä»¬éœ€è¦ç”¨åˆ°ä¸¤ä¸ªä¸œè¥¿ï¼šå­—ä½“æ–‡ä»¶å’Œå­—ä½“è½¬æ¢å™¨ã€‚</span><br><span class="line"></span><br><span class="line">å­—ä½“æ–‡ä»¶æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¼€æºçš„å­—ä½“æˆ–è€…è‡ªå·±åˆ¶ä½œå‡ºæ¥ï¼Œå‡†å¤‡å¥½äº†å­—ä½“æ–‡ä»¶ä¹‹åä½¿ç”¨å­—ä½“è½¬æ¢å™¨å³å¯è½¬æ¢æˆå¯ä»¥åœ¨lvglä¸Šä½¿ç”¨çš„å­—ä½“æ ¼å¼ã€‚å¼€æºå­—ä½“è·å–é¡µé¢ï¼š</span><br><span class="line">  http://lvgl.100ask.net/8.1/tools/fonts-zh-source.html</span><br><span class="line"></span><br><span class="line">å‡†å¤‡å¥½å­—ä½“æ–‡ä»¶ä¹‹åå°±å¯ä»¥é€šè¿‡lvglå®˜æ–¹æä¾›çš„å­—ä½“è½¬æ¢å™¨ï¼Œæå–è½¬æ¢ä½ æƒ³è¦çš„å­—ä½“ï¼ŒLVGLå®˜æ–¹åœ¨çº¿å­—ä½“è½¬æ¢å™¨é¡µé¢ï¼š</span><br><span class="line">  [ https://lvgl.io/tools/fontconverter](https://lvgl.io/tools/fontconverter)</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">1.ä¸ºè¦è¾“å‡ºå­—ä½“å‘½åã€‚ä¾‹å¦‚â€œfont_source_han_sans_bold_20â€</span><br><span class="line">2.ä»¥ pxä¸ºå•ä½æŒ‡å®šé«˜åº¦ï¼ˆå­—ä½“å¤§å°ï¼‰</span><br><span class="line">3.è®¾ç½®bpp (bit-per-piel)ã€‚å€¼è¶Šé«˜ï¼Œå­—ä½“è¶Šå¹³æ»‘ï¼ˆæŠ—é”¯é½¿ï¼‰</span><br><span class="line">4.é€‰æ‹©TTF æˆ– WOFF æ ¼å¼å­—ä½“æ–‡ä»¶</span><br><span class="line">5.è®¾ç½®è¦åŒ…å«åœ¨å­—ä½“ä¸­çš„ Unicode å­—ç¬¦èŒƒå›´æˆ–åœ¨ç¬¦å·å­—æ®µä¸­åˆ—å‡ºå­—ç¬¦</span><br><span class="line">6.å¯ä»¥åŒæ—¶é€‰æ‹©å¤šä¸ªå­—ä½“æ–‡ä»¶è½¬æ¢ï¼Œå¹¶ä¸ºå…¶æŒ‡å®šèŒƒå›´å’Œ/æˆ–ç¬¦å·ã€‚è¿™äº›å­—ç¬¦å°†è¢«åˆå¹¶è½¬æ¢åˆ°åŒä¸€ä¸ªæ–‡ä»¶ä¸­ã€‚</span><br><span class="line">7.å•å‡»è½¬æ¢æŒ‰é’®ä»¥ä¸‹è½½è½¬æ¢å‡ºæ¥çš„ font_source_han_sans_bold_20.c æ–‡ä»¶ã€‚</span><br></pre></td></tr></table></figure><p><img src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221223001716190.png" alt="image-20221223001716190"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">1.å°†ç»“æœ C æ–‡ä»¶å¤åˆ¶åˆ°ä½ çš„ LVGL é¡¹ç›®ä¸­ï¼Œå¹¶åŒ…å«åˆ°é¡¹ç›®ï¼›</span><br><span class="line">2.åœ¨ä½ çš„é¡¹ç›®åº”ç”¨ç¨‹åºçš„ C æ–‡ä»¶ä¸­ï¼Œå°†å­—ä½“å£°æ˜ä¸ºï¼š</span><br><span class="line">  extern lv_font_t my_font_name; </span><br><span class="line"> æˆ–ï¼š</span><br><span class="line">  LV_FONT_DECLARE(my_font_name);</span><br><span class="line">3.åœ¨æ ·å¼ä¸­è®¾ç½®å­—ä½“ï¼š</span><br><span class="line">  lv_style_set_text_font(&amp;style_obj, &amp;my_font_name); // æ™®é€š(å…±äº«)æ ·å¼</span><br><span class="line">  lv_obj_set_style_text_font(label, &amp;my_font_name, 0); // ç§æœ‰(æœ¬åœ°)æ ·å¼</span><br><span class="line">4.unicode æ˜¯ç»Ÿä¸€æ‰€æœ‰è¯­è¨€çš„ä¸€å¥—ç¼–ç ã€‚</span><br><span class="line">5.utf-8æ˜¯åŸºäºunicodeç¼–ç çš„ä¸€ç§èŠ‚çº¦å­—èŠ‚çš„ç¼–ç ã€‚</span><br></pre></td></tr></table></figure><h4 id="æŒ‰é’®"><a href="#æŒ‰é’®" class="headerlink" title="æŒ‰é’®"></a>æŒ‰é’®</h4>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;LVGLå­¦ä¹ ç¬”è®°&quot;&gt;&lt;a href=&quot;#LVGLå­¦ä¹ ç¬”è®°&quot; class=&quot;headerlink&quot; title=&quot;LVGLå­¦ä¹ ç¬”è®°&quot;&gt;&lt;/a&gt;LVGLå­¦ä¹ ç¬”è®°&lt;/h2&gt;&lt;h3 id=&quot;1-å¯¹è±¡&quot;&gt;&lt;a href=&quot;#1-å¯¹è±¡&quot; class=&quot;headerlink&quot; </summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>Python Note</title>
    <link href="http://example.com/2023/05/07/python-note/"/>
    <id>http://example.com/2023/05/07/python-note/</id>
    <published>2023-05-07T04:32:31.421Z</published>
    <updated>2023-05-07T08:38:38.011Z</updated>
    
    <content type="html"><![CDATA[<p>EECSè¯¾ç¨‹å‰æœŸå­¦ä¹ Pythonçš„ç¬”è®°</p><p>***self.p&#x3D;float(p)***ï¼Œæ³¨æ„ç”¨floatæ”¹å˜ç²¾åº¦ï¼Œé˜²æ­¢ç²¾åº¦æŸå¤±</p><ul><li>rangeå‡½æ•°</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> _a <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">3</span>):</span><br><span class="line">    <span class="built_in">print</span>(_a)<span class="comment">#0ï¼Œ1ï¼Œ2</span></span><br><span class="line"><span class="keyword">for</span> _b <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,<span class="number">5</span>):</span><br><span class="line">    <span class="built_in">print</span>(_b)<span class="comment">#1ï¼Œ2ï¼Œ3ï¼Œ4</span></span><br><span class="line"><span class="keyword">for</span> _c <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,<span class="number">8</span>,<span class="number">2</span>):</span><br><span class="line">    <span class="built_in">print</span>(_c)<span class="comment">#1ï¼Œ3ï¼Œ5ï¼Œ7</span></span><br><span class="line"><span class="comment">#ä»startâ€”â€”start+stepâ€”â€”stop-1</span></span><br></pre></td></tr></table></figure><ul><li>å­—ç¬¦ä¸²</li></ul><img src="E:\Files\Projects\Pythonå­¦ä¹ \å­¦ä¹ ç¬”è®°\image\QQæˆªå›¾20220913150319.jpg" alt="QQæˆªå›¾20220913150319" style="zoom:80%;" /><img src="E:\Files\Projects\Pythonå­¦ä¹ \å­¦ä¹ ç¬”è®°\image\QQæˆªå›¾20220913150504.jpg" alt="QQæˆªå›¾20220913150504" style="zoom:80%;" /><img src="E:\Files\Projects\Pythonå­¦ä¹ \å­¦ä¹ ç¬”è®°\image\QQæˆªå›¾20220913151004.jpg" alt="QQæˆªå›¾20220913151004" style="zoom:80%;" /><ul><li>åˆ—è¡¨</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">lst=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>]</span><br><span class="line">ls=<span class="built_in">list</span>([<span class="number">451</span>,<span class="number">254</span>,<span class="number">387</span>,<span class="number">445</span>,<span class="number">545</span>,<span class="number">5866</span>,<span class="number">7</span>,<span class="number">8</span>])</span><br><span class="line"><span class="built_in">print</span>(lst.index(<span class="number">7</span>,<span class="number">1</span>,<span class="number">8</span>))index() <span class="comment">#å‡½æ•°ç”¨äºä»åˆ—è¡¨ä¸­æ‰¾å‡ºæŸä¸ªå€¼ç¬¬ä¸€ä¸ªåŒ¹é…é¡¹çš„ç´¢å¼•ä½ç½®ï¼Œ7è¡¨ç¤ºæŸ¥æ‰¾çš„å…ƒç´ ï¼Œstart=1ï¼Œend=8-1</span></span><br><span class="line"><span class="built_in">print</span>(lst[<span class="number">0</span>:<span class="number">5</span>:<span class="number">2</span>])</span><br><span class="line">lst.append(<span class="number">789</span>)<span class="comment">#åˆ—è¡¨å¢åŠ æ“ä½œ</span></span><br><span class="line"><span class="built_in">print</span>(lst)</span><br><span class="line">lst.append(ls)<span class="comment">#ç›´æ¥åœ¨åˆ—è¡¨åé¢åŠ äº†ä¸€ä¸ªåˆ—è¡¨ï¼ˆè¢«å½“æˆä¸€ä¸ªå…ƒç´ ï¼‰</span></span><br><span class="line"><span class="comment">#[1, 2, 3, 4, 5, 6, 7, 8, 789, [451, 254, 387, 445, 545, 5866, 7, 8]]</span></span><br><span class="line">lst.extend(ls)<span class="comment">#å‘åˆ—è¡¨æœ«ä½ä¸€æ¬¡æ·»åŠ å¤šä¸ªå…ƒç´ </span></span><br><span class="line"><span class="comment">#[1, 2, 3, 4, 5, 6, 7, 8, 789, [451, 254, 387, 445, 545, 5866, 7, 8], 451, 254, 387, 445, 545, 5866, 7, 8]</span></span><br><span class="line">lst.insert(<span class="number">1</span>,<span class="number">80</span>)<span class="comment">#åœ¨ç´¢å¼•1çš„ä½ç½®æ’å…¥80</span></span><br><span class="line"><span class="comment">#[1, 80, 2, 3, 4, 5, 6, 7, 8, 789, [451, 254, 387, 445, 545, 5866, 7, 8], 451, 254, 387, 445, 545, 5866, 7, 8]</span></span><br><span class="line">lst[<span class="number">5</span>:]=ls<span class="comment">#åˆ‡æ‰åé¢çš„ï¼ˆåŒ…æ‹¬ï¼‰ï¼Œå°†åé¢çš„æ›¿æ¢æ‰</span></span><br><span class="line"><span class="comment">#[1, 80, 2, 3, 4, 451, 254, 387, 445, 545, 5866, 7, 8]</span></span><br><span class="line">lst.remove(<span class="number">80</span>)<span class="comment">#ç§»é™¤å…ƒç´ ï¼Œæˆ–è€…å¤šä¸ªç›¸åŒå…ƒç´ çš„ç¬¬ä¸€ä¸ªï¼Œæ‰¾ä¸åˆ°å€¼ä¼šæŠ¥é”™</span></span><br><span class="line"><span class="comment">#[1, 2, 3, 4, 451, 254, 387, 445, 545, 5866, 7, 8]</span></span><br><span class="line"><span class="keyword">del</span> lst[<span class="number">1</span>]<span class="comment">#åˆ é™¤ç´¢å¼•ä¸º1çš„å…ƒç´ ï¼Œæ‰¾ä¸åˆ°ä¸ä¼šæŠ¥é”™</span></span><br><span class="line">lst.pop(<span class="number">1</span>)<span class="comment">#æ ¹æ®ç´¢å¼•ç§»é™¤</span></span><br><span class="line"><span class="comment">#[1, 3, 4, 451, 254, 387, 445, 545, 5866, 7, 8]</span></span><br><span class="line">lst.pop()<span class="comment">#ä¸æŒ‡å®šç´¢å¼•ï¼Œç§»é™¤åˆ—è¡¨ä¸­æœ€åä¸€ä¸ªå…ƒç´ </span></span><br><span class="line"><span class="comment">#[1, 3, 4, 451, 254, 387, 445, 545, 5866, 7]</span></span><br><span class="line">new_lst=lst[<span class="number">1</span>:<span class="number">5</span>]<span class="comment">#åˆ©ç”¨åˆ‡ç‰‡äº§ç”Ÿæ–°çš„åˆ—è¡¨ï¼Œç±»ä¼¼äºåˆ é™¤ï¼Œä¸¤ä¸ªåˆ—è¡¨æŒ‡å‘ä¸åŒçš„ç©ºé—´/åˆ—è¡¨ï¼Œä¿®æ”¹å…¶ä¸­ä¸€ä¸ªä¸å¯¹å¦ä¸€ä¸ªäº§ç”Ÿå½±å“</span></span><br><span class="line"><span class="comment">#åˆ—è¡¨çš„å¼ºåˆ¶å¤åˆ¶/copy</span></span><br><span class="line">newlist=[:]<span class="comment">#å³å¯å¤åˆ¶å‡ºä¸¤ä¸ªåˆ—è¡¨</span></span><br><span class="line"><span class="comment">#[3, 4, 451, 254]</span></span><br><span class="line">lst[<span class="number">1</span>:<span class="number">5</span>]=[]<span class="comment">#ç©ºåˆ—è¡¨åˆ é™¤å…ƒç´ </span></span><br><span class="line"><span class="comment">#[1, 387, 445, 545, 5866, 7]</span></span><br><span class="line">lst.clear()</span><br><span class="line"><span class="comment">#[]</span></span><br><span class="line"><span class="keyword">del</span> lst<span class="comment">#ç›´æ¥åˆ é™¤åˆ—è¡¨</span></span><br><span class="line"><span class="built_in">print</span>(lst)</span><br><span class="line">lst[<span class="number">0</span>]=<span class="string">&#x27;HelloWorld&#x27;</span><span class="comment">#ä¸€æ¬¡ä¿®æ”¹ä¸€ä¸ªå€¼</span></span><br><span class="line"><span class="built_in">print</span>(lst)</span><br><span class="line">lst[<span class="number">1</span>:<span class="number">2</span>]=[<span class="string">&#x27;new&#x27;</span>,<span class="string">&#x27;world&#x27;</span>,<span class="number">1234</span>,<span class="number">5668</span>]<span class="comment">#åˆ‡ç‰‡ä¸€æ¬¡ä¿®æ”¹å¤šä¸ªå€¼</span></span><br><span class="line"><span class="built_in">print</span>(ls,<span class="built_in">id</span>(ls),<span class="string">&#x27;æ’åºå‰&#x27;</span>)</span><br><span class="line">ls.sort()</span><br><span class="line"><span class="built_in">print</span>(ls,<span class="built_in">id</span>(ls),<span class="string">&#x27;æ’åºå&#x27;</span>)</span><br><span class="line">ls.sort(reverse=<span class="literal">True</span>)<span class="comment">#Trueè¡¨ç¤ºé™åº</span></span><br><span class="line"><span class="built_in">print</span>(ls,<span class="built_in">id</span>(ls),<span class="string">&#x27;æ’åºå&#x27;</span>)</span><br><span class="line">ls.sort(reverse=<span class="literal">False</span>)<span class="comment">#Falseè¡¨ç¤ºå‡åº</span></span><br><span class="line"><span class="built_in">print</span>(ls,<span class="built_in">id</span>(ls),<span class="string">&#x27;æ’åºå&#x27;</span>)</span><br><span class="line"></span><br><span class="line">lst2=<span class="built_in">sorted</span>(ls,reverse=<span class="literal">True</span>)<span class="comment">#ä½¿ç”¨å†…ç½®å‡½æ•°å¯¹åˆ—è¡¨æ’åºï¼Œå¹¶äº§ç”Ÿä¸€ä¸ªæ–°çš„åˆ—è¡¨ï¼ŒåŸåˆ—è¡¨ä¸å‘ç”Ÿä»»ä½•æ”¹å˜</span></span><br><span class="line"><span class="built_in">print</span>(lst2) </span><br><span class="line"></span><br><span class="line">c=<span class="string">&#x27;1-23+(23*23)*sda&#x27;</span></span><br><span class="line">origin_new = re.split(<span class="string">r&quot;([(+ - * /])&quot;</span>,c)<span class="comment">#åˆ†å‰²å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="built_in">print</span>(origin_new)</span><br></pre></td></tr></table></figure><ul><li>å¯å˜</li></ul><p><img src="E:\Files\Projects\Pythonå­¦ä¹ \å­¦ä¹ ç¬”è®°\image\QQæˆªå›¾20220920144152.jpg" alt="QQæˆªå›¾20220920144152"></p><ul><li>é”™è¯¯ä¸¾ä¾‹ï¼Œ</li></ul><p>removeä¹‹åL1çš„å…ƒç´ ä¸ªæ•°å˜åŒ–ï¼Œ2çš„ç´¢å¼•å˜æˆäº†0ï¼Œä½†æ˜¯è¿­ä»£çš„eä»ç„¶ä¸º1ï¼ˆä»0å˜è¿‡æ¥ï¼‰ï¼Œå¯¼è‡´2æ²¡æœ‰è¢«è®¡ç®— </p><p><img src="E:\Files\Projects\Pythonå­¦ä¹ \å­¦ä¹ ç¬”è®°\image\QQæˆªå›¾20220920152813.jpg" alt="QQæˆªå›¾20220920152813"></p><ul><li>printè¾“å‡ºå‡½æ•°</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;hello&#x27;</span>,<span class="number">6</span>)</span><br><span class="line">hello <span class="number">6</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;hello&#x27;</span>+<span class="number">6</span>)</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">&quot;&lt;pyshell#12&gt;&quot;</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;hello&#x27;</span>+<span class="number">6</span>)</span><br><span class="line">TypeError: can only concatenate <span class="built_in">str</span> (<span class="keyword">not</span> <span class="string">&quot;int&quot;</span>) to <span class="built_in">str</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;hello&#x27;</span>+<span class="string">&#x27;6&#x27;</span>)</span><br><span class="line">hello6</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;hello&#x27;</span>+<span class="string">&#x27;world&#x27;</span>)</span><br><span class="line">helloworld</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;hello&#x27;</span>,<span class="string">&#x27;world&#x27;</span>)</span><br><span class="line">hello world</span><br></pre></td></tr></table></figure><p>+ç”¨äºè¿æ¥å­—ç¬¦ä¸²ï¼Œä¸å¯ç”¨äºè¿æ¥æ•°å­—å’Œå­—ç¬¦ä¸²ï¼Œé¦–å°¾ç›´æ¥ç›¸è¿ï¼Œä¸è‡ªåŠ¨æ·»åŠ ç©ºæ ¼</p><p>ï¼Œé‡Œé¢é»˜è®¤åˆ†éš”ç¬¦ï¼Œè‡ªå¸¦ç©ºæ ¼ï¼Œæ— è®ºæ··åˆè¾“å‡ºè¿˜æ˜¯å­—ç¬¦ä¸²è¿æ¥</p><ul><li>å­—å…¸</li><li>copy</li></ul><p><em><strong>å®ä¾‹ä¸­ dict2 å…¶å®æ˜¯ dict1 çš„å¼•ç”¨ï¼ˆåˆ«åï¼‰ï¼Œæ‰€ä»¥è¾“å‡ºç»“æœéƒ½æ˜¯ä¸€è‡´çš„ï¼Œdict3 çˆ¶å¯¹è±¡è¿›è¡Œäº†æ·±æ‹·è´ï¼Œä¸ä¼šéšdict1 ä¿®æ”¹è€Œä¿®æ”¹ï¼Œå­å¯¹è±¡æ˜¯æµ…æ‹·è´æ‰€ä»¥éš dict1 çš„ä¿®æ”¹è€Œä¿®æ”¹ã€‚</strong></em></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"> </span><br><span class="line">dict1 =  &#123;&#x27;user&#x27;:&#x27;runoob&#x27;,&#x27;num&#x27;:[1,2,3]&#125;</span><br><span class="line"> </span><br><span class="line">dict2 = dict1          # æµ…æ‹·è´: å¼•ç”¨å¯¹è±¡</span><br><span class="line">dict3 = dict1.copy()   # æµ…æ‹·è´ï¼šæ·±æ‹·è´çˆ¶å¯¹è±¡ï¼ˆä¸€çº§ç›®å½•ï¼‰ï¼Œå­å¯¹è±¡ï¼ˆäºŒçº§ç›®å½•ï¼‰ä¸æ‹·è´ï¼Œè¿˜æ˜¯å¼•ç”¨</span><br><span class="line"> </span><br><span class="line"># ä¿®æ”¹ data æ•°æ®</span><br><span class="line">dict1[&#x27;user&#x27;]=&#x27;root&#x27;</span><br><span class="line">dict1[&#x27;num&#x27;].remove(1)</span><br><span class="line"> </span><br><span class="line"># è¾“å‡ºç»“æœ</span><br><span class="line">print(dict1)</span><br><span class="line">print(dict2)</span><br><span class="line">print(dict3)</span><br><span class="line"></span><br><span class="line">å®ä¾‹ä¸­ dict2 å…¶å®æ˜¯ dict1 çš„å¼•ç”¨ï¼ˆåˆ«åï¼‰ï¼Œæ‰€ä»¥è¾“å‡ºç»“æœéƒ½æ˜¯ä¸€è‡´çš„ï¼Œdict3 çˆ¶å¯¹è±¡è¿›è¡Œäº†æ·±æ‹·è´ï¼Œä¸ä¼šéšdict1 ä¿®æ”¹è€Œä¿®æ”¹ï¼Œå­å¯¹è±¡æ˜¯æµ…æ‹·è´æ‰€ä»¥éš dict1 çš„ä¿®æ”¹è€Œä¿®æ”¹ã€‚</span><br><span class="line">&#123;&#x27;num&#x27;: [2, 3], &#x27;user&#x27;: &#x27;root&#x27;&#125;</span><br><span class="line">&#123;&#x27;num&#x27;: [2, 3], &#x27;user&#x27;: &#x27;root&#x27;&#125;</span><br><span class="line">&#123;&#x27;num&#x27;: [2, 3], &#x27;user&#x27;: &#x27;runoob&#x27;&#125;</span><br></pre></td></tr></table></figure><ul><li>é”®å€¼å¯¹å‚¨å­˜æ•°æ®ï¼Œé€—å·åˆ†éš”ï¼Œæ— åºåºåˆ—</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scores=&#123;<span class="string">&#x27;zhangsan&#x27;</span>:<span class="number">100</span>,<span class="string">&#x27;lisi&#x27;</span>:<span class="number">78</span>&#125;</span><br></pre></td></tr></table></figure><ul><li><p>å­—å…¸æ˜¯æ ¹æ®keyæŸ¥æ‰¾valueæ‰€åœ¨çš„ä½ç½®</p></li><li><p>å­—å…¸å…ƒç´ è·å–å’Œæ·»åŠ </p></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">scores.get()<span class="comment">#æ‰¾ä¸åˆ°æ—¶è¿”å›None</span></span><br><span class="line">score[]<span class="comment">#æ‰¾ä¸åˆ°æ—¶ä¼šæŠ¥é”™</span></span><br><span class="line">scores.get(<span class="string">&#x27;a&#x27;</span>,<span class="number">99</span>)<span class="comment">#99æ˜¯aæ‰¾ä¸åˆ°æ—¶æä¾›çš„ä¸€ä¸ªé»˜è®¤å€¼</span></span><br><span class="line"><span class="comment">#æ·»åŠ </span></span><br><span class="line">smart_girl[<span class="string">&quot;age&quot;</span>] = <span class="number">35</span> <span class="comment">#æœ‰åˆ™ä¿®æ”¹ï¼Œæ— åˆ™æ·»åŠ </span></span><br><span class="line">smart_girl.update(name = <span class="string">&quot;tyson&quot;</span>, age = <span class="number">80</span>) </span><br><span class="line">smart_girl.update(&#123;<span class="string">&quot;name&quot;</span>: <span class="string">&quot;da ye&quot;</span>, <span class="string">&quot;age&quot;</span> : <span class="number">30</span>, <span class="string">&quot;address&quot;</span> : <span class="string">&quot;beijing &quot;</span>&#125;) </span><br><span class="line">smart_girl.update(age=<span class="number">50</span>) </span><br></pre></td></tr></table></figure><ul><li>keyçš„åˆ¤æ–­</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;l&#x27;</span> <span class="keyword">in</span> h)<span class="comment">#in/not inåˆ¤æ–­</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;l&#x27;</span> <span class="keyword">not</span> <span class="keyword">in</span> h)</span><br><span class="line">scores.clear()<span class="comment">#æ¸…ç©ºå­—å…¸å…ƒç´ </span></span><br><span class="line">scores[<span class="string">&#x27;&#x27;</span>]=<span class="number">98</span><span class="comment">#æ–°å¢å…ƒç´ æˆ–è€…ä¿®æ”¹å…ƒç´ </span></span><br><span class="line"><span class="keyword">del</span> scores[]<span class="comment">#åˆ é™¤å…ƒç´ </span></span><br></pre></td></tr></table></figure><ul><li>å­—å…¸è§†å›¾</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">values=h.values()</span><br><span class="line">key=h.keys()</span><br><span class="line">items=h.items()</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(values,<span class="built_in">type</span>(values),<span class="built_in">list</span>(values))</span><br><span class="line"><span class="built_in">print</span>(key,<span class="built_in">type</span>(key),<span class="built_in">list</span>(key))</span><br><span class="line"><span class="built_in">print</span>(items,<span class="built_in">type</span>(items))</span><br></pre></td></tr></table></figure><ul><li>å­—å…¸å…ƒç´ éå†</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> h:<span class="comment">#itemç”¨äºéå†é”®ï¼Œgetç”¨äºå–å€¼</span></span><br><span class="line">    <span class="built_in">print</span>(item,h[item],h.get(item))</span><br></pre></td></tr></table></figure><ul><li>å­—å…¸çš„ç‰¹ç‚¹</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">d=&#123;<span class="string">&#x27;name&#x27;</span>:<span class="string">&#x27;zhangsan&#x27;</span>,<span class="string">&#x27;name&#x27;</span>:<span class="string">&#x27;lisi&#x27;</span>,<span class="string">&#x27;name&#x27;</span>:<span class="string">&#x27;liu&#x27;</span>&#125;</span><br><span class="line"><span class="built_in">print</span>(d)<span class="comment">#æ³¨æ„æ˜¯å¤§æ‹¬å·,Keyä¸å…è®¸é‡å¤,valueså¯ä»¥é‡å¤</span></span><br><span class="line"><span class="comment">#å…ƒç´ æ˜¯æ— åºçš„,åªå¯ä»¥æ ¹æ®keysè®¡ç®—valuesï¼ŒæŸ¥æ‰¾é€Ÿåº¦å¾ˆå¿«</span></span><br><span class="line"><span class="comment">#keyså¿…é¡»æ˜¯ä¸å¯å˜å¯¹è±¡</span></span><br><span class="line"><span class="comment">#å­—å…¸å¯ä»¥æ ¹æ®éœ€è¦åŠ¨æ€ä¼¸ç¼©</span></span><br><span class="line"><span class="comment">#å­—å…¸ä¼šæµªè´¹å¤§é‡å†…å­˜ï¼Œæ˜¯ä¸€ç§ç©ºé—´æ¢æ—¶é—´çš„æ•°æ®ç»“æ„</span></span><br></pre></td></tr></table></figure><ul><li>å­—å…¸ç”Ÿæˆå¼</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">itemd=[<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;b&#x27;</span>,<span class="string">&#x27;c&#x27;</span>]</span><br><span class="line">price=[<span class="number">185</span>,<span class="number">98</span>,<span class="number">78</span>]</span><br><span class="line">f=&#123;itemd.upper():price <span class="keyword">for</span> itemd,price <span class="keyword">in</span> <span class="built_in">zip</span>(itemd,price)&#125;</span><br><span class="line">dic=<span class="built_in">dict</span>(<span class="built_in">zip</span>(keys,values))</span><br><span class="line"><span class="built_in">print</span>(f)</span><br><span class="line"><span class="comment">#upper()ç”¨äºå¤§å†™</span></span><br><span class="line"><span class="comment">#itemd:priceå’Œitemd,priceå¯¹åº”ä¸€è‡´å³å¯f=&#123;a.upper():b for a,b in zip(itemd,price)&#125;</span></span><br></pre></td></tr></table></figure><img src="D:\SDU\SDU\CXcollege\image\QQæˆªå›¾20220913001944.jpg" alt="QQæˆªå›¾20220913001944" style="zoom: 80%;" /><ul><li>æ€»ç»“</li></ul><img src="D:\SDU\SDU\CXcollege\image\\QQæˆªå›¾20220913002400.jpg" alt="QQæˆªå›¾20220913002400" style="zoom:80%;" /><ul><li>åˆ†æ”¯ç»“æ„</li></ul><img src="F:\Projects\Pythonå­¦ä¹ \å­¦ä¹ ç¬”è®°\image\QQæˆªå›¾20220913141628.jpg" alt="QQæˆªå›¾20220913141628" style="zoom:80%;" /><p>æ³¨ï¼šä¸¤ä¸ªfloatç›¸ç­‰çš„æ¯”è¾ƒï¼š</p><p>â€‹1.ç›´æ¥ &#x3D;&#x3D; æ¯”è¾ƒ</p><p>â€‹2.absç›¸å‡æ¯”è¾ƒ</p><p>â€‹3.iscloseå‡½æ•°æ¯”è¾ƒ</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> math</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = <span class="number">5.0</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b = <span class="number">4.99998</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>math.isclose(a, b, rel_tol=<span class="number">1e-5</span>)</span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>math.isclose(a, b, rel_tol=<span class="number">1e-6</span>)</span><br><span class="line"><span class="literal">False</span></span><br><span class="line">It <span class="keyword">is</span> also possible to compare two values using absolute tolerance,</span><br><span class="line"> which must be a non-negative value:</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> math</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = <span class="number">5.0</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b = <span class="number">4.99998</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>math.isclose(a, b, abs_tol=<span class="number">0.00003</span>)</span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>math.isclose(a, b, abs_tol=<span class="number">0.00001</span>)</span><br><span class="line"><span class="literal">False</span></span><br></pre></td></tr></table></figure><ul><li>å¾ªç¯ç»“æ„</li></ul><img src="E:\Files\Projects\Pythonå­¦ä¹ \å­¦ä¹ ç¬”è®°\image\QQæˆªå›¾20220913142802.jpg" alt="QQæˆªå›¾20220913142802" style="zoom:80%;" /><img src="E:\Files\Projects\Pythonå­¦ä¹ \å­¦ä¹ ç¬”è®°\image\QQæˆªå›¾20220913145243.jpg" alt="QQæˆªå›¾20220913145243" style="zoom:80%;" /><p><strong>break</strong>ä¼šæ‰“ç ´<strong>å½“å‰</strong>å¾ªç¯ï¼Œå¹¶ç›´æ¥è·³å›<strong>ä¸Šä¸€çº§</strong>å¾ªç¯ï¼›<strong>continue</strong>è·³è¿‡æœ¬æ¬¡å¾ªç¯ï¼Œå¹¶ç»§ç»­<strong>è¿™çº§</strong>å¾ªç¯</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">b=<span class="number">1</span></span><br><span class="line"><span class="keyword">while</span> b&lt;=<span class="number">3</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;è¯·è¾“å…¥å¯†ç &#x27;</span>)</span><br><span class="line">    i=<span class="built_in">input</span>()</span><br><span class="line">    <span class="keyword">if</span> i==<span class="string">&#x27;4567&#x27;</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;Right&#x27;</span>)</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;ERROR&#x27;</span>)</span><br><span class="line">    b+=<span class="number">1</span></span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;ä¸‰æ¬¡å¯†ç è¾“å…¥é”™è¯¯&#x27;</span>)<span class="comment">#æ²¡æœ‰é‡åˆ°breakï¼Œæ‰§è¡Œå®Œå¾ªç¯ä¹‹åå°±æ‰§è¡Œelseä¸­çš„å†…å®¹</span></span><br></pre></td></tr></table></figure><ul><li><p>ç©·ä¸¾æ³•</p></li><li><p>è¿‘ä¼¼æ€æƒ³</p></li><li><p>äºŒåˆ†æŸ¥æ‰¾</p></li></ul><img src="E:\Files\Projects\Pythonå­¦ä¹ \å­¦ä¹ ç¬”è®°\image\QQæˆªå›¾20220913153957.jpg" alt="QQæˆªå›¾20220913153957" style="zoom:80%;" /><img src="E:\Files\Projects\Pythonå­¦ä¹ \å­¦ä¹ ç¬”è®°\image\QQæˆªå›¾20220913154522.jpg" alt="QQæˆªå›¾20220913154522" style="zoom:80%;" /><img src="E:\Files\Projects\Pythonå­¦ä¹ \å­¦ä¹ ç¬”è®°\image\QQæˆªå›¾20220913154939.jpg" alt="QQæˆªå›¾20220913154939" style="zoom:80%;" /><ul><li>å…ƒç»„</li></ul><p>å†…ç½®æ•°æ®ç»“æ„ä¹‹ä¸€ï¼Œä¸å¯å˜åºåˆ—ï¼šæ²¡æœ‰å¢åˆ æ”¹æ“ä½œï¼Œå¦‚å…ƒç»„ã€å­—ç¬¦ä¸²</p><p>å¯å˜åºåˆ—ï¼šå¯ä»¥å¯¹åºåˆ—æ‰§è¡Œå¢åˆ æ”¹æ“ä½œï¼Œå¯¹è±¡åœ°å€ä¸å‘ç”Ÿæ”¹å˜ï¼Œå¦‚å­—å…¸ã€åˆ—è¡¨</p><p>å­—å…¸å¤§æ‹¬å·{}ï¼Œåˆ—è¡¨ä¸­æ‹¬å·[]ï¼Œå…ƒç»„å°æ‹¬å·ï¼ˆï¼‰</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">bsg=[<span class="number">12</span>,<span class="number">23</span>,<span class="number">432</span>,<span class="number">32</span>]</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">id</span>(bsg))</span><br><span class="line">bsg.append(<span class="number">432</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">id</span>(bsg))</span><br><span class="line">j=<span class="string">&#x27;hello&#x27;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">id</span>(j))</span><br><span class="line">j=j+<span class="string">&#x27;world&#x27;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">id</span>(j))</span><br></pre></td></tr></table></figure><ul><li>å…ƒç»„çš„åˆ›å»º</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">t=(<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;d&#x27;</span>,<span class="string">&#x27;wd&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(t,<span class="built_in">type</span>(t))</span><br><span class="line">g=<span class="built_in">tuple</span>((<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;d&#x27;</span>,<span class="string">&#x27;dsa&#x27;</span>))</span><br><span class="line"><span class="built_in">print</span>(g,<span class="built_in">type</span>(g))</span><br><span class="line">j=<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;d&#x27;</span>,<span class="string">&#x27;dsa&#x27;</span></span><br><span class="line"><span class="built_in">print</span>(j,<span class="built_in">type</span>(j))</span><br><span class="line">o=(<span class="string">&#x27;98&#x27;</span>,)<span class="comment">#åªæœ‰ä¸€ä¸ªå…ƒç´ æ—¶ï¼Œæ³¨æ„æœ«å°¾åŠ ä¸€ä¸ªé€—å·ï¼Œå¦åˆ™ä¹Ÿä¼šè¢«å½“æˆåŸæœ¬çš„ç±»å‹</span></span><br><span class="line"><span class="built_in">print</span>(o,<span class="built_in">type</span>(o))</span><br><span class="line">i=()<span class="comment">#ç©ºå…ƒç»„</span></span><br><span class="line"><span class="built_in">print</span>(i)</span><br></pre></td></tr></table></figure><ul><li>ä¸ºä»€ä¹ˆè¦è®¾è®¡æˆä¸å¯å˜åºåˆ—</li></ul><p>â€‹a.å¤šä»»åŠ¡ç¯å¢ƒä¸‹ï¼ŒåŒæ—¶æ“ä½œå¯¹è±¡æ—¶ä¸éœ€è¦åŠ é”</p><p>â€‹b.ç¨‹åºä¸­å°½é‡ä½¿ç”¨ä¸å¯å˜åºåˆ—</p><p>æ³¨æ„ï¼š</p><p>â€‹a.è‹¥å…ƒç»„ä¸­å¯¹è±¡æœ¬èº«æ˜¯ä¸å¯å˜å¯¹è±¡ï¼Œåˆ™ä¸èƒ½å†å¼•ç”¨å…¶ä»–å¯¹è±¡</p><p>â€‹b.è‹¥å…ƒç»„ä¸­çš„å¯¹è±¡æ˜¯å¯å˜å¯¹è±¡ï¼Œåˆ™å¯å˜å¯¹è±¡çš„å¼•ç”¨ä¸å…è®¸æ”¹å˜ï¼Œä½†æ˜¯æ•°æ®å¯ä»¥æ”¹å˜</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">s=(<span class="number">1</span>,<span class="number">2</span>,[<span class="number">1</span>,<span class="number">23</span>])</span><br><span class="line"><span class="built_in">print</span>(s,<span class="built_in">type</span>(s))</span><br><span class="line"><span class="built_in">print</span>(s[<span class="number">0</span>],<span class="built_in">type</span>(s[<span class="number">0</span>]),<span class="built_in">id</span>(s[<span class="number">0</span>]))</span><br><span class="line"><span class="built_in">print</span>(s[<span class="number">1</span>],<span class="built_in">type</span>(s[<span class="number">1</span>]),<span class="built_in">id</span>(s[<span class="number">1</span>]))</span><br><span class="line"><span class="built_in">print</span>(s[<span class="number">2</span>],<span class="built_in">type</span>(s[<span class="number">2</span>]),<span class="built_in">id</span>(s[<span class="number">2</span>]))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">id</span>(<span class="number">2</span>))<span class="comment">#æ­¤å¤„çš„2å’Œä¸Šé¢çš„2idç›¸åŒï¼Œç›¸åŒæ•°å€¼çš„idå¯èƒ½ç›¸åŒï¼ˆå­—ç¬¦ä¸²ä¹Ÿå¯ä»¥ï¼‰</span></span><br><span class="line">s[<span class="number">2</span>].append(<span class="number">12</span>)<span class="comment">#åˆ—è¡¨å¯ä»¥æ”¹å˜ï¼Œä½†æ˜¯s[2]=100ä¿®æ”¹å¼•ç”¨ä¸å…è®¸</span></span><br><span class="line"><span class="built_in">print</span>(s[<span class="number">2</span>],<span class="built_in">type</span>(s[<span class="number">2</span>]),<span class="built_in">id</span>(s[<span class="number">2</span>]))</span><br><span class="line">&gt;&gt;</span><br><span class="line"><span class="number">1</span> &lt;<span class="keyword">class</span> <span class="string">&#x27;int&#x27;</span>&gt; <span class="number">2564618256624</span></span><br><span class="line"><span class="number">2</span> &lt;<span class="keyword">class</span> <span class="string">&#x27;int&#x27;</span>&gt; <span class="number">2564618256656</span></span><br><span class="line">[<span class="number">1</span>, <span class="number">23</span>] &lt;<span class="keyword">class</span> <span class="string">&#x27;list&#x27;</span>&gt; <span class="number">2564623172544</span></span><br><span class="line"><span class="number">2564618256656</span></span><br><span class="line">[<span class="number">1</span>, <span class="number">23</span>, <span class="number">12</span>] &lt;<span class="keyword">class</span> <span class="string">&#x27;list&#x27;</span>&gt; <span class="number">2564623172544</span></span><br></pre></td></tr></table></figure><ul><li>å…ƒç»„çš„éå†</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">hd=(<span class="string">&#x27;hello&#x27;</span>,<span class="string">&#x27;world&#x27;</span>,<span class="number">98</span>)</span><br><span class="line"><span class="keyword">for</span> _ <span class="keyword">in</span> hd:</span><br><span class="line">    <span class="built_in">print</span>(_)</span><br><span class="line"><span class="comment">#ç­‰æ•ˆäºä¸€ä¸‹ä»£ç </span></span><br><span class="line"><span class="built_in">print</span>(hd[<span class="number">0</span>])</span><br><span class="line"><span class="built_in">print</span>(hd[<span class="number">1</span>])</span><br><span class="line"><span class="built_in">print</span>(hd[<span class="number">2</span>])</span><br></pre></td></tr></table></figure><p><img src="E:\Files\Projects\Pythonå­¦ä¹ \å­¦ä¹ ç¬”è®°\image\QQæˆªå›¾20220920144858.jpg" alt="QQæˆªå›¾20220920144858"></p><ul><li>ä½œç”¨</li></ul><p><img src="E:\Files\Projects\Pythonå­¦ä¹ \å­¦ä¹ ç¬”è®°\image\QQæˆªå›¾20220920145136.jpg" alt="QQæˆªå›¾20220920145136"></p><ul><li>é›†åˆ</li></ul><p>å¯å˜ç±»å‹åºåˆ—ï¼Œæ˜¯æ²¡æœ‰valueçš„å­—å…¸{key:value}</p><ul><li>é›†åˆçš„åˆ›å»ºæ–¹å¼</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">s=&#123;<span class="string">&#x27;d&#x27;</span>,<span class="number">789</span>,<span class="string">&#x27;sddsa&#x27;</span>,<span class="number">789</span>,<span class="number">789</span>&#125;<span class="comment">#é›†åˆä¸å…è®¸é‡å¤,ä¸”æ˜¯æ— åºå­˜å‚¨</span></span><br><span class="line"><span class="built_in">print</span>(s,<span class="built_in">type</span>(s),<span class="built_in">id</span>(s))</span><br><span class="line">s=<span class="built_in">set</span>(<span class="built_in">range</span>(<span class="number">0</span>,<span class="number">9</span>,<span class="number">2</span>))<span class="comment">#ä½¿ç”¨å‡½æ•°setè½¬æ¢æˆé›†åˆ</span></span><br><span class="line"><span class="built_in">print</span>(s,<span class="built_in">type</span>(s),<span class="built_in">id</span>(s))</span><br><span class="line">s=<span class="built_in">set</span>([<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">2</span>,<span class="number">3</span>])</span><br><span class="line"><span class="built_in">print</span>(s,<span class="built_in">type</span>(s),<span class="built_in">id</span>(s))</span><br><span class="line">s=<span class="built_in">set</span>((<span class="number">1</span>,<span class="number">23</span>,<span class="number">34</span>,<span class="number">543</span>))</span><br><span class="line"><span class="comment">#&#123;1, 34, 543, 23&#125; &lt;class &#x27;set&#x27;&gt; 2104296556800</span></span><br><span class="line">s=<span class="built_in">set</span>(<span class="string">&#x27;hello&#x27;</span>)<span class="comment">#ç›¸åŒå…ƒç´ è¢«åˆ é™¤</span></span><br><span class="line"><span class="comment">#&#123;&#x27;h&#x27;, &#x27;l&#x27;, &#x27;e&#x27;, &#x27;o&#x27;&#125; &lt;class &#x27;set&#x27;&gt; 2104293205024</span></span><br><span class="line">s=<span class="built_in">set</span>()<span class="comment">#ç©ºé›†åˆå®šä¹‰æ–¹æ³•</span></span><br><span class="line"><span class="built_in">print</span>(s,<span class="built_in">type</span>(s),<span class="built_in">id</span>(s))<span class="comment">#set() &lt;class &#x27;set&#x27;&gt; 2104296556800</span></span><br></pre></td></tr></table></figure><ul><li>é›†åˆç›¸å…³æ“ä½œ</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">s=&#123;<span class="number">12</span>,<span class="number">23</span>,<span class="number">432</span>,<span class="number">234</span>,<span class="number">34</span>&#125;</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;é›†åˆå…ƒç´ çš„åˆ¤æ–­&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="number">12</span> <span class="keyword">in</span> s,<span class="number">122</span> <span class="keyword">not</span> <span class="keyword">in</span> s)<span class="comment">#True True</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;é›†åˆå…ƒç´ çš„æ–°å¢&#x27;&#x27;&#x27;</span></span><br><span class="line">s.add(<span class="number">98</span>)<span class="comment">#ä¸€æ¬¡æ·»åŠ ä¸€ä¸ªå…ƒç´ </span></span><br><span class="line"><span class="built_in">print</span>(s)</span><br><span class="line">s.update(&#123;<span class="number">233</span>,<span class="number">987</span>,<span class="number">546</span>&#125;)<span class="comment">#ä¸€æ¬¡æ·»åŠ å¤šä¸ªå…ƒç´ </span></span><br><span class="line">s.update([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>])</span><br><span class="line">s.update((<span class="number">10</span>,<span class="number">0</span>,<span class="number">900</span>))</span><br><span class="line"><span class="built_in">print</span>(s)</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;é›†åˆå…ƒç´ çš„åˆ é™¤&#x27;&#x27;&#x27;</span></span><br><span class="line">s.remove(<span class="number">1</span>)<span class="comment">#ä¸€æ¬¡åˆ é™¤ä¸€ä¸ªå…ƒç´ ï¼Œå…ƒç´ ä¸å­˜åœ¨æ—¶ä¼šæŠ¥å¼‚å¸¸</span></span><br><span class="line">s.discard(<span class="number">800</span>)<span class="comment">#ä¸€æ¬¡åˆ é™¤ä¸€ä¸ªå…ƒç´ ï¼Œå…ƒç´ ä¸å­˜åœ¨ä¸æŠ¥å¼‚å¸¸</span></span><br><span class="line">s.pop()<span class="comment">#ä¸€æ¬¡åˆ é™¤ä»»æ„ä¸€ä¸ªå…ƒç´ ï¼Œä¸å¯ä»¥æŒ‡å®š</span></span><br><span class="line">s.clear()<span class="comment">#æ¸…ç©ºé›†åˆ</span></span><br><span class="line"><span class="built_in">print</span>(s)</span><br></pre></td></tr></table></figure><ul><li>é›†åˆé—´çš„å…³ç³»</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">s1=&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>&#125;</span><br><span class="line">s2=&#123;<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>&#125;</span><br><span class="line"><span class="comment">#é›†åˆç›¸ç­‰å¯ä»¥ç”¨==å’Œï¼=åˆ¤æ–­</span></span><br><span class="line"><span class="built_in">print</span>(s1 == s2,s1 != s2)</span><br><span class="line"><span class="comment">#s2æ˜¯s1çš„å­é›†</span></span><br><span class="line"><span class="built_in">print</span>(s2.issubset(s1),s1.issubset(s2))</span><br><span class="line"><span class="comment">#s1æ˜¯s2çš„è¶…é›†</span></span><br><span class="line"><span class="built_in">print</span>(s1.issuperset(s2),s2.issuperset(s1))</span><br><span class="line"><span class="comment">#ä¸¤ä¸ªé›†åˆæ˜¯å¦å«æœ‰äº¤é›†</span></span><br><span class="line"><span class="built_in">print</span>(s1.isdisjoint(s2))<span class="comment">#æœ‰äº¤é›†ä¸ºFalse</span></span><br><span class="line">s3=&#123;<span class="number">3423</span>&#125;</span><br><span class="line"><span class="built_in">print</span>(s1.isdisjoint(s3))<span class="comment">#æ²¡æœ‰äº¤é›†ä¸ºTrue</span></span><br></pre></td></tr></table></figure><ul><li>é›†åˆçš„æ•°æ®æ“ä½œ</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#äº¤é›†</span></span><br><span class="line"><span class="built_in">print</span>(s1.intersection(s2))</span><br><span class="line"><span class="comment">#å¹¶é›†</span></span><br><span class="line"><span class="built_in">print</span>(s1|s2)</span><br><span class="line"><span class="built_in">print</span>(s1.union(s2))</span><br><span class="line"><span class="comment">#å·®é›†</span></span><br><span class="line"><span class="built_in">print</span>(s1.difference(s2))</span><br><span class="line"><span class="comment">#å¯¹ç§°å·®é›†:ä¸¤ä¸ªé›†åˆçš„å¹¶é›†å‡å»äº¤é›†</span></span><br><span class="line"><span class="built_in">print</span>(s1.symmetric_difference(s2))</span><br><span class="line"><span class="comment">#ä»¥ä¸Šè¿ç®—éƒ½ä¸æ”¹å˜s1å’Œs2çš„å€¼</span></span><br></pre></td></tr></table></figure><ul><li>é›†åˆç”Ÿæˆå¼</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#åˆ—è¡¨ç”Ÿæˆå¼</span></span><br><span class="line">lst=[i*i <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">6</span>)]</span><br><span class="line"><span class="built_in">print</span>(lst)</span><br><span class="line"><span class="comment">#é›†åˆç”Ÿæˆå¼</span></span><br><span class="line">lst=&#123;i*i <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">6</span>)&#125;</span><br><span class="line"><span class="built_in">print</span>(lst)</span><br></pre></td></tr></table></figure><ul><li>åˆ—è¡¨ã€å­—å…¸ã€å…ƒç»„ã€é›†åˆ</li></ul><table><thead><tr><th align="center">æ•°æ®ç»“æ„</th><th align="center">æ˜¯å¦å¯å˜</th><th align="center">æ˜¯å¦é‡å¤</th><th align="center">æ˜¯å¦æœ‰åº</th><th align="center">å®šä¹‰ç¬¦å·</th></tr></thead><tbody><tr><td align="center">list</td><td align="center">å¯å˜</td><td align="center">å¯é‡å¤</td><td align="center">æœ‰åº</td><td align="center">[]</td></tr><tr><td align="center">tuple</td><td align="center">ä¸å¯å˜</td><td align="center">å¯é‡å¤</td><td align="center">æœ‰åº</td><td align="center">()</td></tr><tr><td align="center">dict</td><td align="center">å¯å˜</td><td align="center">keyä¸å¯é‡å¤&#x2F;valueå¯é‡å¤</td><td align="center">æ— åº</td><td align="center">{key:value}</td></tr><tr><td align="center">set</td><td align="center">å¯å˜</td><td align="center">ä¸å¯é‡å¤</td><td align="center">æ— åº</td><td align="center">{}</td></tr></tbody></table><ul><li>å‡½æ•°</li></ul><p>å‡½æ•°ä¼šé¢å¤–åˆ›å»ºä¸€ä¸ªç©ºé—´ç”¨äºå‚¨å­˜å†…éƒ¨çš„æ•°æ®ï¼Œè¢«è°ƒç”¨æ—¶åœ¨å…¶ä¸­åˆ›å»ºä¸€ä¸ªæ–°çš„ç©ºé—´ç»™å˜é‡ï¼Œä¼˜å…ˆä½¿ç”¨å†…éƒ¨å˜é‡ï¼ˆå±€éƒ¨å˜é‡ï¼‰</p><ul><li>å‡½æ•°çš„åˆ›å»º</li></ul><p>æ³¨æ„å†™å®Œåè¿›è¡Œè¾“å…¥è¾“å‡ºæ³¨é‡Šï¼Œæ–¹ä¾¿ä»–äººä½¿ç”¨é»‘ç›’å­</p><p>æ³¨æ„å‡½æ•°åå’Œå˜é‡åä¸å¯ä»¥ç›¸åŒï¼Œå¦åˆ™ç¨‹åºå¯èƒ½æ— æ³•åˆ†è¾¨è€Œå‡ºé”™</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">å‡½æ•°å</span>(<span class="params">[è¾“å…¥å‚æ•°],[å‚æ•°],[å‚æ•°]</span>):<span class="comment">#å…¶ä¸­è¾“å…¥å‚æ•°ä¸ºå½¢å¼å‚æ•°</span></span><br><span class="line">å‡½æ•°ä½“</span><br><span class="line">[<span class="keyword">return</span> xxx]</span><br></pre></td></tr></table></figure><img src="E:\Files\Projects\Pythonå­¦ä¹ \å­¦ä¹ ç¬”è®°\image\QQæˆªå›¾20220920141253.jpg" alt="QQæˆªå›¾20220920141253"  /><ul><li>å‡½æ•°è°ƒç”¨</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">å‡½æ•°å([å®é™…å‚æ•°])</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">cal</span>(<span class="params">a,b</span>):</span><br><span class="line">    xxxx</span><br><span class="line">    <span class="keyword">return</span> c</span><br><span class="line"><span class="comment">#ä½ç½®ä¼ é€’</span></span><br><span class="line">cal(<span class="number">1</span>,<span class="number">2</span>)<span class="comment">#a=1,b=2</span></span><br><span class="line"><span class="comment">#å…³é”®å­—å¯¹åº”ä¼ é€’</span></span><br><span class="line">cal(b=<span class="number">1</span>,a=<span class="number">2</span>)<span class="comment">#a=2,b=1</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;ä¸å¯å˜å¯¹è±¡åœ¨å‡½æ•°ä½“å†…çš„ä¿®æ”¹ä¸ä¼šå½±å“å®å‚çš„å€¼ï¼Œå¦‚å¯¹æ•°å€¼çš„é‡æ–°èµ‹å€¼</span></span><br><span class="line"><span class="string">å¯å˜å¯¹è±¡åœ¨å‡½æ•°ä½“å†…çš„ä¿®æ”¹ä¼šå½±å“åˆ°å®å‚çš„å€¼ï¼Œå¦‚åˆ—è¡¨çš„appendæ“ä½œ&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure><ul><li>å‡½æ•°çš„è¿”å›å€¼</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">return åå¯ä»¥æ˜¯è¡¨è¾¾å¼ä¹Ÿå¯ä»¥æ˜¯æ•°å€¼</span></span><br><span class="line"><span class="string">å¦‚æœå‡½æ•°æ²¡æœ‰è¿”å›å€¼ï¼Œreturnå¯ä»¥çœç•¥</span></span><br><span class="line"><span class="string">å‡½æ•°çš„è¿”å›å€¼å¦‚æœæ˜¯ä¸€ä¸ªï¼Œç›´æ¥è¿”å›åŸå€¼</span></span><br><span class="line"><span class="string">å‡½æ•°çš„è¿”å›å€¼å¦‚æœæ˜¯å¤šä¸ªï¼Œè¿”å›çš„ç»“æœä¸ºå…ƒç»„</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">ä¹Ÿå¯ä»¥è¾“å…¥å’Œè¿”å›å‡½æ•°jjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjj</span></span><br><span class="line"><span class="string">å¦‚z()</span></span><br><span class="line"><span class="string">def fun(a):</span></span><br><span class="line"><span class="string">return a()</span></span><br><span class="line"><span class="string">fun(z)</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure><ul><li>é»˜è®¤å€¼å‚æ•°</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;&#x27;&#x27;å¦‚æœæ²¡æœ‰ç»™bä¼ å€¼ï¼Œåˆ™bé»˜è®¤ä¸º10ï¼Œå¦åˆ™å…¶ä¸ºä¼ é€’çš„å€¼&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">cal</span>(<span class="params">a,b=<span class="number">10</span></span>):</span><br><span class="line">    <span class="keyword">if</span> a&gt;=b:</span><br><span class="line">        <span class="keyword">return</span> a</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> b</span><br><span class="line">c=<span class="number">12</span></span><br><span class="line">d=<span class="number">231</span></span><br><span class="line">cal(a=<span class="number">92</span>,<span class="number">98</span>)<span class="comment">#å¯ä»¥å…³é”®å­—å‚æ•°å’Œä½ç½®å½¢å‚å¹¶ç”¨</span></span><br><span class="line"><span class="built_in">print</span>(cal(c))</span><br></pre></td></tr></table></figure><ul><li>å‡½æ•°çš„å‚æ•°å®šä¹‰</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;&#x27;&#x27;ä¸ªæ•°å¯å˜çš„ä½ç½®å‚æ•°ï¼šç”¨*å®šä¹‰å¯å˜çš„ä½ç½®å½¢å‚</span></span><br><span class="line"><span class="string">äº‹å…ˆæ— æ³•ç¡®å®šä¼ é€’çš„ä½ç½®å®å‚çš„ä¸ªæ•°ï¼Œç»“æœä¸ºä¸€ä¸ªå…ƒç»„</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">fun</span>(<span class="params">*args</span>):</span><br><span class="line">    <span class="built_in">print</span>(args)</span><br><span class="line">fun(<span class="number">12</span>,<span class="number">32</span>,<span class="number">43</span>,<span class="number">12</span>)</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;ä¸ªæ•°å¯å˜çš„å…³é”®å­—å‚æ•°</span></span><br><span class="line"><span class="string">ç»“æœä¸ºä¸€ä¸ªå­—å…¸ï¼Œå­—ç¬¦ä¸²å‰ä¸éœ€è¦åŠ å¼•å·</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">h</span>(<span class="params">**args</span>):</span><br><span class="line">    <span class="built_in">print</span>(args)</span><br><span class="line">h(a=<span class="number">1</span>,b=<span class="number">2</span>,c=<span class="number">3</span>,bsgbsg7=<span class="number">1</span>)</span><br><span class="line"><span class="comment">#æ³¨ï¼šæ— è®ºæ˜¯å“ªç§ï¼Œéƒ½åªèƒ½æœ‰ä¸€ä¸ªå¯å˜çš„ä½ç½®å‚æ•°æˆ–è€…å…³é”®å­—å‚æ•°ï¼Œä½†åœ¨ä¸€ä¸ªå‡½æ•°ä¸­å¯ä»¥åŒæ—¶ä½¿ç”¨ä¸¤è€…ï¼Œè¦æ±‚ä½ç½®å½¢å‚åœ¨å…³é”®å­—å½¢å‚ä¹‹å‰</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">l</span>(<span class="params">*args,**arg1</span>):</span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure><ul><li><p>å˜é‡çš„ä½œç”¨åŸŸ</p></li><li><p>å±€éƒ¨å˜é‡</p></li></ul><p>å‡½æ•°ä½“å†…å®šä¹‰çš„å˜é‡</p><ul><li>å…¨å±€å˜é‡</li></ul><p>å‡½æ•°ä½“å¤–å®šä¹‰çš„å˜é‡</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">fun3</span>():</span><br><span class="line">    <span class="keyword">global</span> age<span class="comment">#ä½¿ç”¨globalå£°æ˜å°†å±€éƒ¨å˜é‡æå‡ä¸ºå…¨å±€å˜é‡</span></span><br><span class="line">    age=<span class="number">19</span></span><br><span class="line">fun3()<span class="comment">#æ³¨æ„è¦å…ˆè°ƒç”¨å‡½æ•°æ‰èƒ½è¾“å‡ºï¼Œå‡½æ•°éƒ½æ²¡è°ƒç”¨å“ªæ¥çš„age</span></span><br><span class="line"><span class="built_in">print</span>(age)</span><br></pre></td></tr></table></figure><ul><li><p>ä¾‹1ä¸­å‡½æ•°é‡æ–°å®šä¹‰äº†x&#x3D;1åœ¨è‡ªå·±å¼€è¾Ÿçš„å†…å­˜ä¸­ï¼Œæ”¹å˜xçš„å€¼ä¸ºæ”¹å˜å±€éƒ¨å˜é‡çš„å€¼ï¼Œæœªæ”¹å˜å¤–éƒ¨xçš„å€¼ï¼Œä»ä¸º5ï¼›ä¾‹2åªè®¿é—®äº†xçš„æ•°å€¼ï¼Œæœªè¿›è¡Œæ”¹å˜ï¼Œä¹Ÿæœªåœ¨è‡ªå·±çš„å‡½æ•°ç©ºé—´å†…ç”Ÿæˆxå±€éƒ¨å˜é‡ï¼›ä¾‹3ï¼Œå‡½æ•°å†…éƒ¨æœªå®šä¹‰xï¼Œä½†æ˜¯å°è¯•æ”¹å˜å…¨å±€å˜é‡ä¼šæŠ¥é”™ï¼ˆåªå¯ä»¥è®¿é—®ï¼Œä¸å¯ä»¥æ”¹å˜ï¼‰<img src="E:\Files\Projects\Pythonå­¦ä¹ \å­¦ä¹ ç¬”è®°\image\QQæˆªå›¾20220920143156.jpg" alt="QQæˆªå›¾20220920143156"></p></li><li><p>é¢å‘å¯¹è±¡</p></li></ul><p>é¢å‘å¯¹è±¡ï¼šäº‹ç‰©æ¯”è¾ƒå¤æ‚ï¼Œä½¿ç”¨ç®€å•çš„çº¿æ€§æ€ç»´æ— æ³•è§£å†³</p><p>é¢å‘è¿‡ç¨‹ï¼šäº‹ç‰©æ¯”è¾ƒç®€å•ï¼Œå¯ä»¥ä½¿ç”¨çº¿æ€§æ€ç»´å»è§£å†³</p><ul><li>ç±»ä¸å¯¹è±¡</li></ul><p>ç±»ï¼šæ•°æ®ç±»å‹</p><p>å¯¹è±¡ï¼šåŒ…å«æ•°æ®ï¼ˆå˜é‡ï¼Œç§°ä¸ºç‰¹å¾ï¼‰å’Œä»£ç ï¼ˆå‡½æ•°ï¼Œç§°ä¸ºæ–¹æ³•ï¼‰çš„è‡ªå®šä¹‰æ•°æ®ç»“æ„</p><ul><li>ç±»çš„åˆ›å»º</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span>:<span class="comment">#studentä¸ºç±»åï¼Œé¦–å­—æ¯å¤§å†™</span></span><br><span class="line">    place=<span class="string">&#x27;å‰æ—&#x27;</span><span class="comment">#ç›´æ¥å†™åœ¨ç±»é‡Œé¢çš„å¯¹è±¡ï¼Œç§°ä¸ºç±»å±æ€§,è¯¥ç±»è¢«æ‰€æœ‰å¯¹è±¡æ‰€å…±äº«</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,name,age</span>):<span class="comment">#åˆå§‹åŒ–</span></span><br><span class="line">        self.name=name<span class="comment">#self.nameç§°ä¸ºå®ä½“å±æ€§ï¼Œè¿›è¡Œäº†ä¸€ä¸ªèµ‹å€¼çš„æ“ä½œï¼Œå°†å±€éƒ¨å˜é‡nameçš„å€¼èµ‹ç»™å®ä½“å±æ€§</span></span><br><span class="line">        self.age=age</span><br><span class="line"></span><br><span class="line">    <span class="comment">#å®ä¾‹æ–¹æ³•ï¼ˆåœ¨ç±»ä¹‹å¤–å®šä¹‰çš„ç§°ä¸ºå‡½æ•°ï¼Œç±»ä¹‹å†…å®šä¹‰çš„ç§°ä¸ºæ–¹æ³•ï¼‰</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">eat</span>(<span class="params">self</span>):<span class="comment">#å¿…é¡»è¦æœ‰selfï¼Œå®ä¾‹æ–¹æ³•ä¼ çš„æ˜¯å®ä¾‹å¯¹è±¡self</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;xuexi&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">#é™æ€æ–¹æ³•</span></span><br><span class="line"><span class="meta">    @staticmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">method</span>():<span class="comment">#ä¸å…è®¸å†™self</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;staticmethod&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">#ç±»æ–¹æ³•</span></span><br><span class="line"><span class="meta">    @classmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">cm</span>(<span class="params">cls</span>):<span class="comment">#class</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;class&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#Studentä¸ºä¸€ä¸ªç±»å¯¹è±¡ï¼Œå¼€äº†å†…å­˜ç©ºé—´ï¼Œæœ‰æ•°å€¼å’Œç±»å‹</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">id</span>(Student),<span class="built_in">type</span>(Student),Student)</span><br></pre></td></tr></table></figure><ul><li>å¯¹è±¡çš„åˆ›å»ºï¼ˆç±»çš„å®ä¾‹åŒ–ï¼‰</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#Studentä¸ºç±»å¯¹è±¡,stu1ä¸ºå®ä¾‹å¯¹è±¡</span></span><br><span class="line">stu1=Student(<span class="string">&#x27;zhangsan &#x27;</span>,<span class="number">18</span>)</span><br><span class="line"><span class="built_in">print</span>(stu1,<span class="built_in">id</span>(stu1),<span class="built_in">type</span>(stu1))<span class="comment">#stu1çš„å€¼è¡¨ç¤ºå…¶å†…å­˜åœ°å€</span></span><br><span class="line">stu1.eat()</span><br><span class="line"><span class="built_in">print</span>(stu1.name,stu1.age,stu1.place)<span class="comment">#è°ƒç”¨è¾“å‡º</span></span><br><span class="line"></span><br><span class="line">Student.eat(stu1)   <span class="comment">#stu1.eat()ç›¸åŒï¼Œéƒ½æ˜¯è°ƒç”¨Studentä¸­çš„eatæ–¹</span></span><br><span class="line"><span class="comment">#stu1å¯¹åº”selfï¼Œè¦æ±‚ä¼ å…¥ç±»çš„å¯¹è±¡ï¼›ç±»å.æ–¹æ³•å(ç±»çš„å¯¹è±¡)â€”â€”å®é™…å°±æ˜¯æ–¹æ³•å®šä¹‰å¤„çš„self</span></span><br></pre></td></tr></table></figure><ul><li>ç±»å±æ€§ï¼Œç±»æ–¹æ³•ï¼Œé™æ€æ–¹æ³•çš„ä½¿ç”¨æ–¹å¼</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#ç±»å±æ€§çš„ä½¿ç”¨æ–¹å¼</span></span><br><span class="line">stu1=Student(<span class="string">&#x27;d&#x27;</span>,<span class="number">123</span>)</span><br><span class="line">stu2=Student(<span class="string">&#x27;sd&#x27;</span>,<span class="number">12</span>)</span><br><span class="line"><span class="built_in">print</span>(stu1.place,stu2.place)</span><br><span class="line">Student.place=<span class="string">&#x27;æ¹–åŒ—&#x27;</span></span><br><span class="line"><span class="built_in">print</span>(stu1.place,stu2.place)</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">ç±»çš„å®ä¾‹å¯¹è±¡éƒ½åŒ…å«ä¸€ä¸ªç±»æŒ‡é’ˆï¼ŒæŒ‡å‘ç±»å¯¹è±¡ï¼Œä¿®æ”¹ç±»å¯¹è±¡ä¹Ÿä¼šå½±å“ç±»çš„å®ä¾‹å¯¹è±¡</span></span><br><span class="line"><span class="string">å‰æ— å‰æ—</span></span><br><span class="line"><span class="string">æ¹–åŒ— æ¹–åŒ—</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#ç±»æ–¹æ³•çš„ä½¿ç”¨æ–¹å¼</span></span><br><span class="line">Student.cm()<span class="comment">#è°ƒç”¨æ—¶ä¸éœ€è¦ä¼ å…¥clsé»˜è®¤å‚æ•°</span></span><br><span class="line"><span class="comment">#é™æ€æ–¹æ³•çš„ä½¿ç”¨æ–¹å¼</span></span><br><span class="line">Student.method()</span><br></pre></td></tr></table></figure><ul><li>ç»‘å®šæ·»åŠ å±æ€§å’Œæ–¹æ³•</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">St</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,name,age</span>):<span class="comment">#åˆå§‹åŒ–ä¸­çš„å±æ€§æ˜¯æ‰€æœ‰å®ä¾‹å¯¹è±¡éƒ½æœ‰çš„å±æ€§</span></span><br><span class="line">        self.name=name</span><br><span class="line">        self.age=age</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">eat</span>(<span class="params">self</span>):<span class="comment">#å®ä¾‹æ–¹æ³•</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;eat&#x27;</span>)</span><br><span class="line"></span><br><span class="line">stu3=St(<span class="string">&#x27;bsg&#x27;</span>,<span class="number">12</span>)</span><br><span class="line">stu4=St(<span class="string">&#x27;jsh&#x27;</span>,<span class="number">83</span>)</span><br><span class="line">stu3.gender=<span class="string">&#x27;male&#x27;</span>      <span class="comment">#ä¸ºstu3ç»‘å®šæ·»åŠ å±æ€§</span></span><br><span class="line"><span class="built_in">print</span>(stu3.name,stu3.age, stu3.gender)</span><br><span class="line"><span class="built_in">print</span>(stu4.name,stu4.age)</span><br><span class="line">stu3.eat()</span><br><span class="line">stu4.eat()</span><br><span class="line"><span class="comment">#åŠ¨æ€ç»‘å®šæ–¹æ³•</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">show</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;å®šä¹‰åœ¨ç±»ä¹‹å¤–çš„ç§°ä¸ºå‡½æ•°&#x27;</span>)</span><br><span class="line">stu3.show=show      <span class="comment">#ä¸ºstu3ç»‘å®šæ·»åŠ æ–¹æ³•</span></span><br><span class="line">stu3.show()</span><br></pre></td></tr></table></figure><p><img src="E:\Files\Projects\Pythonå­¦ä¹ \å­¦ä¹ ç¬”è®°\image\QQæˆªå›¾20220920202855.jpg" alt="QQæˆªå›¾20220920202855"></p><ul><li>æ€»ç»“</li></ul><p>ç¼–ç¨‹æ€æƒ³ï¼š</p><p>â€‹é¢å‘å¯¹è±¡</p><p>â€‹é¢å‘è¿‡ç¨‹</p><p>ç±»å¯¹è±¡ï¼ˆclassï¼‰ï¼š</p><p>â€‹ç±»å±æ€§</p><p>â€‹ç±»æ–¹æ³•</p><p>â€‹é™æ€æ–¹æ³•</p><p>â€‹å®ä¾‹æ–¹æ³•</p><p>ï¼ˆå¯ä»¥ç±»åä¼ å…¥å¯¹è±¡è°ƒç”¨Student.eat(stu1)ï¼Œä¹Ÿå¯ä»¥å¯¹è±¡å.è°ƒç”¨stu1.eat()ï¼‰</p><p>å®ä¾‹å¯¹è±¡ï¼š</p><p>â€‹ç±»åï¼ˆï¼‰åˆ›å»ºå®ä¾‹å¯¹è±¡</p><p>â€‹åŠ¨æ€ç»‘å®šå±æ€§</p><p>â€‹åŠ¨æ€ç»‘å®šæ–¹æ³•</p><ul><li><p>é¢å‘å¯¹è±¡çš„ä¸‰å¤§ç‰¹å¾</p><p>  å°è£…ï¼šå°†å±æ€§å’Œæ–¹æ³•åŒ…è£…åˆ°ç±»å¯¹è±¡ä¸­ï¼›å¦‚æœä¸å¸Œæœ›è¯¥å±æ€§åœ¨ç±»å¯¹è±¡çš„å¤–éƒ¨è¢«è®¿é—®ï¼Œå‰è¾¹ä½¿ç”¨ä¸¤ä¸ªâ€™_â€™</p>  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">m=seFast.StateEstimator(cellSSM)</span><br><span class="line">print  &#x27;123&#x27;,m</span><br><span class="line">m.start()</span><br><span class="line">print  &#x27;123&#x27;,m</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">###seFast.StateEstimator(cellSSM)ä»ç„¶æ˜¯ä¸€ä¸ªclassï¼Œå³ä½¿ä¼ äº†å‚æ•°cellSSMä¹Ÿä¸æ˜¯ä¸€ä¸ªå®ä¾‹ï¼Œä¸Šé¢çš„åœ°å€å‰åä¸€è‡´ï¼Œä¸‹æ–¹çš„åœ°å€å‰åä¸ä¸€è‡´</span><br><span class="line"></span><br><span class="line">print seFast.StateEstimator(cellSSM)</span><br><span class="line">seFast.StateEstimator(cellSSM).start()</span><br><span class="line">print seFast.StateEstimator(cellSSM).start()</span><br><span class="line">print seFast.StateEstimator(cellSSM)</span><br><span class="line">return seFast.StateEstimator(cellSSM)</span><br><span class="line"></span><br></pre></td></tr></table></figure>  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,name,age</span>):</span><br><span class="line">        self.name=name</span><br><span class="line">        self.__age=age</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">show</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(self.name,self.__age)</span><br><span class="line"></span><br><span class="line">stu1=Student(<span class="string">&#x27;bsgbsg7&#x27;</span>,<span class="number">19</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">dir</span>(stu1))</span><br><span class="line"><span class="comment">#print(stu1.name,stu1.__age)</span></span><br><span class="line"><span class="built_in">print</span>(stu1._Student__age)</span><br><span class="line">stu1.show()ï¼š</span><br></pre></td></tr></table></figure><p>  ç»§æ‰¿ï¼š</p>  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">å­ç±»ç±»å</span>ï¼ˆçˆ¶ç±»<span class="number">1</span>ï¼Œçˆ¶ç±»<span class="number">2.</span>..ï¼‰:</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">å¦‚æœä¸€ä¸ªç±»æ²¡æœ‰ç»§æ‰¿ä»»ä½•ç±»ï¼Œåˆ™é»˜è®¤ç»§æ‰¿object</span></span><br><span class="line"><span class="string">å®šä¹‰å­ç±»æ—¶ï¼Œå¿…é¡»åœ¨å…¶æ„é€ å‡½æ•°ä¸­è°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•°</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,name,age</span>):</span><br><span class="line">        self.name=name</span><br><span class="line">        self.__age=age</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">show</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(self.name,self.__age)</span><br><span class="line"></span><br><span class="line">stu1=Student(<span class="string">&#x27;bsgbsg7&#x27;</span>,<span class="number">19</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">dir</span>(stu1))<span class="comment">#dirç”¨äºæŸ¥çœ‹æ‰€æœ‰å±æ€§å’Œæ–¹æ³•</span></span><br><span class="line"><span class="comment">#print(stu1.name,stu1.__age)</span></span><br><span class="line"><span class="built_in">print</span>(stu1._Student__age)</span><br><span class="line">stu1.show()</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Pro</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,name,age</span>):</span><br><span class="line">        self.name=name</span><br><span class="line">        self.age=age</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">info</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(self.name,self.age)</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span>(<span class="title class_ inherited__">Pro</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,name,age,number</span>):</span><br><span class="line">        <span class="built_in">super</span>().__init__(name,age)</span><br><span class="line">        self.number=number</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Teacher</span>(<span class="title class_ inherited__">Pro</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,name,age,year</span>):</span><br><span class="line">        <span class="built_in">super</span>().__init__(name,age)</span><br><span class="line">        self.year=year</span><br><span class="line"></span><br><span class="line">stu1=Student(<span class="string">&#x27;bsgbsg&#x27;</span>,<span class="number">12</span>,<span class="number">2</span>)</span><br><span class="line">tea1=Teacher(<span class="string">&#x27;nds&#x27;</span>,<span class="number">19</span>,<span class="number">29</span>)</span><br><span class="line">stu1.info()</span><br><span class="line">tea1.info()</span><br></pre></td></tr></table></figure><p>  <img src="E:\Files\Projects\Pythonå­¦ä¹ \å­¦ä¹ ç¬”è®°\image\QQæˆªå›¾20220921155049.jpg" alt="QQæˆªå›¾20220921155049"></p><p>  <img src="E:\Files\Projects\Pythonå­¦ä¹ \å­¦ä¹ ç¬”è®°\image\QQæˆªå›¾20220921155706.jpg" alt="QQæˆªå›¾20220921155706"></p>  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">C</span>(A,B):</span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure><p>  æ–¹æ³•é‡å†™</p>  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span>(<span class="title class_ inherited__">Pro</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,name,age,number</span>):</span><br><span class="line">        <span class="built_in">super</span>().__init__(name,age)</span><br><span class="line">        self.number=number</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">info</span>(<span class="params">self</span>):<span class="comment">#æ–¹æ³•é‡å†™ï¼Œå¯ä»¥ç±»æ¯”å˜é‡ä½œç”¨åŸŸç†è§£</span></span><br><span class="line">        <span class="built_in">super</span>().info()<span class="comment">#å¸Œæœ›è°ƒç”¨çˆ¶ç±»ä¸­çš„æ–¹æ³•</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;å­¦å·ï¼š&#x27;</span>,self.number)</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Teacher</span>(<span class="title class_ inherited__">Pro</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,name,age,year</span>):</span><br><span class="line">        <span class="built_in">super</span>().__init__(name,age)</span><br><span class="line">        self.year=year</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">info</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">super</span>().info()</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;æ•™é¾„ï¼š&#x27;</span>,self.year)</span><br></pre></td></tr></table></figure><p>  objectç±»</p><p>  æ˜¯æ‰€æœ‰ç±»çš„çˆ¶ç±»ï¼Œæ‰€æœ‰ç±»éƒ½æœ‰objectçš„å±æ€§å’Œæ–¹æ³•</p>  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span>():</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,name,age</span>):</span><br><span class="line">        self.name=name</span><br><span class="line">        self.age=age</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__str__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;æˆ‘çš„åå­—æ˜¯&#123;0&#125;ï¼Œä»Šå¹´&#123;1&#125;å²äº†&#x27;</span>.<span class="built_in">format</span>(self.name,self.age)</span><br><span class="line">stu=Student(<span class="string">&#x27;zhangsan&#x27;</span>,<span class="number">20</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">dir</span>(stu))</span><br><span class="line"><span class="built_in">print</span>(stu)<span class="comment">#é»˜è®¤è°ƒç”¨__str__()æ–¹æ³•ï¼Œè¿”å›å†…å­˜åœ°å€ï¼›é‡å†™åè¾“å‡ºè‡ªå·±å†™çš„ä¸œè¥¿ï¼Œç»å¸¸ç”¨äºè¿”å›å¯¹è±¡çš„æè¿°</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(stu))</span><br></pre></td></tr></table></figure><p>  å¤šæ€ï¼šæé«˜ç¨‹åºå¾—åˆ°å¯æ‰©å±•æ€§å’Œå¯ç»´æŠ¤æ€§</p>  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Animal</span>(<span class="title class_ inherited__">Object</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">eat</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;eat&#x27;</span>)</span><br><span class="line">        </span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Dog</span>(<span class="title class_ inherited__">Animal</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">eat</span>(<span class="params">self</span>):<span class="comment">#é‡å†™äº†çˆ¶ç±»ä¸­çš„æ–¹æ³•</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;ç‹—&#x27;</span>)</span><br><span class="line">        </span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Cat</span>(<span class="title class_ inherited__">Animal</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">eat</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;çŒ«&#x27;</span>)</span><br><span class="line">        </span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Per</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">eat</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;äºº&#x27;</span>)</span><br><span class="line">        </span><br><span class="line"><span class="keyword">def</span> <span class="title function_">eat</span>(<span class="params">animal</span>):</span><br><span class="line">animal.eat()<span class="comment">#è°ƒç”¨è¯¥å¯¹è±¡çš„eatæ–¹æ³•</span></span><br><span class="line"></span><br><span class="line">eat(Per())<span class="comment">#å³ä½¿Peræ²¡æœ‰ç»§æ‰¿çˆ¶ç±»ï¼Œä½†åªè¦æœ‰eatæ–¹æ³•å°±å¯ä»¥ä½¿ç”¨</span></span><br></pre></td></tr></table></figure><p>  ç‰¹æ®Šå±æ€§</p>  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span>():</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,name,age</span>):</span><br><span class="line">        self.name=name</span><br><span class="line">        self.age=age</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__str__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;æˆ‘çš„åå­—æ˜¯&#123;0&#125;ï¼Œä»Šå¹´&#123;1&#125;å²äº†&#x27;</span>.<span class="built_in">format</span>(self.name,self.age)</span><br><span class="line">stu=Student(<span class="string">&#x27;zhangsan&#x27;</span>,<span class="number">20</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">dir</span>(stu))</span><br><span class="line"><span class="built_in">print</span>(stu)<span class="comment">#é»˜è®¤è°ƒç”¨__str__()æ–¹æ³•ï¼Œè¿”å›å†…å­˜åœ°å€ï¼›é‡å†™åè¾“å‡ºè‡ªå·±å†™çš„ä¸œè¥¿ï¼Œç»å¸¸ç”¨äºè¿”å›å¯¹è±¡çš„æè¿°</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(stu))</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;å¯¹è±¡.__dict__è¿”å›ä¸€ä¸ªå­—å…¸ï¼ŒæŸ¥çœ‹å¯¹è±¡å±æ€§&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">A</span>:</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">B</span>:</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">C</span>(A,B):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,name,age</span>):</span><br><span class="line">        self.name=name</span><br><span class="line">        self.age=age</span><br><span class="line">c=C(<span class="string">&#x27;bsgbsg7&#x27;</span>,<span class="number">19</span>)</span><br><span class="line"><span class="built_in">print</span>(c.__dict__)<span class="comment">#è¿”å›å®ä¾‹å¯¹è±¡çš„å±æ€§</span></span><br><span class="line"><span class="built_in">print</span>(C.__dict__)<span class="comment">#è¿”å›ç±»å¯¹è±¡çš„å±æ€§å’Œæ–¹æ³•ï¼Œæ–¹æ³•åªåœ¨ç±»å¯¹è±¡ä¸­ï¼Œå®ä¾‹å¯¹è±¡åªå¯ä»¥è°ƒç”¨</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(c.__class__)<span class="comment">#x.__class__è¾“å‡ºå¯¹è±¡æ‰€å±äºçš„ç±»</span></span><br><span class="line"><span class="built_in">print</span>(C.__bases__)<span class="comment">#Cç±»ä¸çˆ¶ç±»çš„å…ƒç´ ï¼ŒCåªå¯ä»¥æ˜¯ç±»ï¼Œä¸å¯ä»¥æ˜¯å®ä¾‹å¯¹è±¡</span></span><br><span class="line"><span class="built_in">print</span>(C.__base__)<span class="comment">#è¾“å‡ºä¸€ä¸ªï¼Œè°å†™åœ¨å‰é¢è¾“å‡ºè°</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(C.__mro__)<span class="comment">#ç±»çš„å±‚æ¬¡ç»“æ„</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(A.__subclasses__())<span class="comment">#Açš„å­ç±»åˆ—è¡¨ï¼Œæ³¨æ„åé¢è¿˜æœ‰ä¸ªæ‹¬å·</span></span><br></pre></td></tr></table></figure><p>  ç‰¹æ®Šæ–¹æ³•</p>  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">a=<span class="number">20</span></span><br><span class="line">b=<span class="number">18</span></span><br><span class="line">c=a+b</span><br><span class="line">d=a.__add__(b)</span><br><span class="line"><span class="built_in">print</span>(c,d)</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,name</span>):</span><br><span class="line">        self.name=name</span><br><span class="line">    <span class="string">&#x27;&#x27;&#x27;+è¿ç®—å¯¹åº”__add__()æ–¹æ³•&#x27;&#x27;&#x27;</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__add__</span>(<span class="params">self,other</span>):</span><br><span class="line">        <span class="keyword">return</span> self.name+other.name</span><br><span class="line">    <span class="string">&#x27;&#x27;&#x27;len()å‡½æ•°å¯¹åº”__len__()æ–¹æ³•&#x27;&#x27;&#x27;</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__len__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">len</span>(self.name)</span><br><span class="line"></span><br><span class="line">stu1=Student(<span class="string">&#x27;bsg&#x27;</span>)</span><br><span class="line">stu2=Student(<span class="string">&#x27;bsg7&#x27;</span>)</span><br><span class="line"></span><br><span class="line">stu3=stu1+stu2</span><br><span class="line"><span class="built_in">print</span>(stu3)<span class="comment">#é€šè¿‡ä¿®æ”¹Studentç±»ä¸­çš„addç‰¹æ®Šæ–¹æ³•ä½¿é‡å¯¹è±¡å¯ä»¥ç›¸åŠ </span></span><br><span class="line">s=stu1.__add__(stu2)</span><br><span class="line"><span class="built_in">print</span>(s)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">len</span>(stu1),stu1.__len__())</span><br></pre></td></tr></table></figure><p>  <img src="E:\Files\Projects\Pythonå­¦ä¹ \å­¦ä¹ ç¬”è®°\image\QQæˆªå›¾20220923151820.jpg" alt="QQæˆªå›¾20220923151820"></p>  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,name,age</span>):</span><br><span class="line">        self.name=name</span><br><span class="line">        self.age=age</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__new__</span>(<span class="params">cls, *args, **kwargs</span>):</span><br><span class="line">        obj=<span class="built_in">super</span>().__new__(cls)</span><br><span class="line">        <span class="keyword">return</span> obj</span><br><span class="line"></span><br><span class="line">st=Student(<span class="string">&#x27;bsgbsg&#x27;</span>,<span class="number">19</span>)</span><br><span class="line"><span class="built_in">print</span>(st.__class__)<span class="comment">#&lt;class &#x27;__main__.Student&#x27;&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>åŠ é€Ÿé€’å½’</p></li></ul><p><img src="E:\Files\Projects\Pythonå­¦ä¹ \å­¦ä¹ ç¬”è®°\image\QQæˆªå›¾20220927142051.jpg" alt="QQæˆªå›¾20220927142051"></p><p><img src="E:\Files\Projects\Pythonå­¦ä¹ \å­¦ä¹ ç¬”è®°\image\QQæˆªå›¾20220927142215.jpg" alt="QQæˆªå›¾20220927142215"></p><p><img src="E:\Files\Projects\Pythonå­¦ä¹ \å­¦ä¹ ç¬”è®°\image\QQæˆªå›¾20220927144400.jpg" alt="QQæˆªå›¾20220927144400"></p><p><img src="E:\Files\Projects\Pythonå­¦ä¹ \å­¦ä¹ ç¬”è®°\image\QQæˆªå›¾20220927144841.jpg" alt="QQæˆªå›¾20220927144841"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;EECSè¯¾ç¨‹å‰æœŸå­¦ä¹ Pythonçš„ç¬”è®°&lt;/p&gt;
&lt;p&gt;***self.p&amp;#x3D;float(p)***ï¼Œæ³¨æ„ç”¨floatæ”¹å˜ç²¾åº¦ï¼Œé˜²æ­¢ç²¾åº¦æŸå¤±&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;rangeå‡½æ•°&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&quot;highlight python</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>Open Innovationï¼ˆsoftwareï¼‰</title>
    <link href="http://example.com/2023/05/07/open-innovation(1)/"/>
    <id>http://example.com/2023/05/07/open-innovation(1)/</id>
    <published>2023-05-07T02:31:04.919Z</published>
    <updated>2023-05-07T08:38:08.004Z</updated>
    
    <content type="html"><![CDATA[<h2 id="1-é€‰é¢˜ä¸è¦æ±‚"><a href="#1-é€‰é¢˜ä¸è¦æ±‚" class="headerlink" title="1.é€‰é¢˜ä¸è¦æ±‚"></a>1.é€‰é¢˜ä¸è¦æ±‚</h2><h3 id="ä¸ªäººå›¾ä¹¦é¦†"><a href="#ä¸ªäººå›¾ä¹¦é¦†" class="headerlink" title="ä¸ªäººå›¾ä¹¦é¦†"></a>ä¸ªäººå›¾ä¹¦é¦†</h3><blockquote><p>éœ€æ±‚ï¼š<br>ï¼ˆ1ï¼‰å®ç°å›¾ä¹¦çš„å¢åˆ æ”¹æŸ¥ï¼›å›¾ä¹¦çš„ä¿¡æ¯åŒ…æ‹¬ï¼šid, ä¹¦åã€å‡ºç‰ˆç¤¾ã€åˆ†ç±»å·ã€ISBNå·ã€å‡ºç‰ˆæ—¥æœŸã€ä»·æ ¼ã€è´­ä¹°æ—¥æœŸï¼›å¯ä»¥æŒ‰ç…§ä¹¦åã€å‡ºç‰ˆç¤¾ç­‰æ£€ç´¢åˆ†é¡µå±•ç¤ºå›¾ä¹¦åˆ—è¡¨<br>ï¼ˆ2ï¼‰å®ç°ç®€å•çš„å€Ÿå‡ºã€å½’è¿˜ç®¡ç†ã€‚ï¼ˆå›¾ä¹¦è¡¨å¯ä»¥å¢åŠ æ˜¯å¦åœ¨æ¶å­—æ®µï¼‰<br>åŒæ—¶è¦æœ‰å€Ÿè¿˜æ—¥å¿—(å¢åŠ ä¸€ä¸ªå€Ÿè¿˜å†å²è¡¨ï¼Œæ¯æ¬¡å€Ÿå’Œè¿˜å ç”¨ä¸€æ¡è®°å½•ï¼Œå­—æ®µæœ‰ï¼šå›¾ä¹¦çš„idï¼Œå€Ÿå‡ºæ—¶é—´ã€å½’è¿˜æ—¶é—´ã€å€Ÿé˜…äºº)<br>ï¼ˆ3ï¼‰å€Ÿè¿˜å†å²æ—¥å¿—çš„åˆ†é¡µæŸ¥è¯¢å±•ç¤º</p></blockquote><h3 id="è€ƒæ ¸å†…å®¹"><a href="#è€ƒæ ¸å†…å®¹" class="headerlink" title="è€ƒæ ¸å†…å®¹"></a>è€ƒæ ¸å†…å®¹</h3><blockquote><p>æ¯ä¸ªå­¦ç”Ÿé€‰æ‹©ä¸€ä¸ªé¢˜ç›®ï¼Œä¸åˆ†ç»„<br>1ã€å­¦ä¼šç¼–å†™è½¯ä»¶éœ€æ±‚åˆ†ææ–‡æ¡£ã€è½¯ä»¶è¯¦ç»†è®¾è®¡æ–‡æ¡£<br>2ã€æŒæ¡åç«¯è½¯ä»¶å¼€å‘æ–¹æ³•ï¼Œç†Ÿæ‚‰ java å’Œ IDEA å¼€å‘ç¯å¢ƒ<br>3ã€æŒæ¡å‰ç«¯è½¯ä»¶å¼€å‘æ–¹æ³•ï¼Œç†Ÿæ‚‰ vscode ç¯å¢ƒï¼Œç†Ÿæ‚‰ typescript è¯­è¨€å’Œ react æ¡†æ¶<br>4ã€ç†Ÿç»ƒä½¿ç”¨gitç‰ˆæœ¬ç®¡ç†å·¥å…·</p><p>æäº¤å†…å®¹ï¼š<br>è½¯ä»¶éœ€æ±‚åˆ†ææ–‡æ¡£ã€è½¯ä»¶è¯¦ç»†è®¾è®¡æ–‡æ¡£ã€æºä»£ç ã€ç­”è¾©PPT</p></blockquote><h2 id="2-åç«¯å­¦ä¹ "><a href="#2-åç«¯å­¦ä¹ " class="headerlink" title="2.åç«¯å­¦ä¹ "></a>2.åç«¯å­¦ä¹ </h2><h3 id="åŸºæœ¬æ­¥éª¤"><a href="#åŸºæœ¬æ­¥éª¤" class="headerlink" title="åŸºæœ¬æ­¥éª¤"></a>åŸºæœ¬æ­¥éª¤</h3><ul><li><p>MySQLè®¾è®¡è¡¨</p></li><li><p>generatorConfig.xmlæ·»åŠ tableä¿¡æ¯</p></li><li><p>run maven</p></li><li><p>serviceä¸­æ·»åŠ interface</p></li><li><p>impl.javaä¸­æ·»åŠ javaç±»</p></li><li><p>æ·»åŠ å¯¹åº”controller ç±»</p></li></ul><h3 id="åˆ†é¡µæŸ¥è¯¢"><a href="#åˆ†é¡µæŸ¥è¯¢" class="headerlink" title="åˆ†é¡µæŸ¥è¯¢"></a>åˆ†é¡µæŸ¥è¯¢</h3><ul><li><p>æµè§ˆå™¨æŒ‰F12è¿›å…¥å¼€å‘è€…æ¨¡å¼</p></li><li><p>å‰ç«¯å‘åç«¯å‘é€çš„è¯·æ±‚æ ¼å¼</p></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;&quot;current&quot;:1,&quot;pageSize&quot;:20,&quot;departmentName&quot;:&quot;é€šä¿¡&quot;&#125;</span><br></pre></td></tr></table></figure><p>  è¡¨ç¤ºè¯·æ±‚å½“å‰é¡µé¢ï¼Œé¡µé¢å¤§å°å’Œéƒ¨é—¨åç§°</p><ul><li>åç«¯å‘å‰ç«¯å‘é€çš„JSONæ•°æ®æ ¼å¼</li></ul><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">  <span class="punctuation">&#123;</span></span><br><span class="line">    code<span class="punctuation">:</span> <span class="number">200</span><span class="punctuation">,</span></span><br><span class="line">    data<span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      current<span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">      pageSize<span class="punctuation">:</span> <span class="number">20</span><span class="punctuation">,</span></span><br><span class="line">      total<span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span></span><br><span class="line">      list<span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">          id<span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">          departmentName<span class="punctuation">:</span> <span class="string">&quot;é€šä¿¡æ‰€3444&quot;</span><span class="punctuation">,</span></span><br><span class="line">          contact<span class="punctuation">:</span> <span class="string">&quot;å¼ ä¸‰&quot;</span><span class="punctuation">,</span></span><br><span class="line">          contactPhone<span class="punctuation">:</span> <span class="string">&quot;ddd&quot;</span><span class="punctuation">,</span></span><br><span class="line">          description<span class="punctuation">:</span> <span class="string">&quot;è¿™æ˜¯ä¸€æ¡å¤‡æ³¨&quot;</span><span class="punctuation">,</span></span><br><span class="line">          createdAt<span class="punctuation">:</span> <span class="string">&quot;2019-12-03 17:31:28&quot;</span><span class="punctuation">,</span></span><br><span class="line">          updatedAt<span class="punctuation">:</span> <span class="string">&quot;2023-03-03 10:36:23&quot;</span><span class="punctuation">,</span></span><br><span class="line">          createdBy<span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">          createdByDesc<span class="punctuation">:</span> <span class="string">&quot;ç®¡ç†å‘˜&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">          id<span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span></span><br><span class="line">          departmentName<span class="punctuation">:</span> <span class="string">&quot;é€šä¿¡æ‰€&quot;</span><span class="punctuation">,</span></span><br><span class="line">          contact<span class="punctuation">:</span> <span class="string">&quot;å¼ ä¸‰&quot;</span><span class="punctuation">,</span></span><br><span class="line">          contactPhone<span class="punctuation">:</span> <span class="string">&quot;1532384234234&quot;</span><span class="punctuation">,</span></span><br><span class="line">          description<span class="punctuation">:</span> <span class="string">&quot;è¿™æ˜¯ä¸€æ¡å¤‡æ³¨&quot;</span><span class="punctuation">,</span></span><br><span class="line">          createdAt<span class="punctuation">:</span> <span class="string">&quot;2019-12-03 17:48:06&quot;</span><span class="punctuation">,</span></span><br><span class="line">          updatedAt<span class="punctuation">:</span> <span class="string">&quot;2023-03-03 10:36:29&quot;</span><span class="punctuation">,</span></span><br><span class="line">          createdBy<span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">          createdByDesc<span class="punctuation">:</span> <span class="string">&quot;ç®¡ç†å‘˜&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    message<span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">    success<span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="punctuation">&#125;</span>;</span><br><span class="line">  </span><br><span class="line"></span><br><span class="line">- åç«¯ä¸­controllerä¸­çš„</span><br><span class="line"></span><br><span class="line">```java</span><br><span class="line">  Page&lt;DepartmentVO&gt; </span><br></pre></td></tr></table></figure><p>  åˆ†é¡µæ•°æ®ï¼Œè¿”å›æ¨¡æ¿ç±»&#x2F;æ³›åŒ–ç±»çš„æ•°æ®ï¼ŒPageç±»è¡¨ç¤ºè¿”å›çš„Jsonæ•°æ®æ ¼å¼ä¸­çš„å†…å®¹</p><ul><li>å‰ç«¯å‘åç«¯å‘é€çš„æŸ¥è¯¢å†…å®¹ç”± DepartmentQueryDTO ç±»æ¥æ”¶</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">listDepartment(<span class="meta">@RequestBody</span> DepartmentQueryDTO queryDTO)</span><br></pre></td></tr></table></figure><ul><li>æ¨¡ç³ŠæŸ¥è¯¢</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">queryDTO.setDepartmentName(FormatUtils.makeFuzzySearchTerm(queryDTO.getDepartmentName()));</span><br></pre></td></tr></table></figure><p>  æ³¨æ„MyBatis è‡ªåŠ¨ç”Ÿæˆçš„Mapperç±»</p><p>  <strong>Mapper.xmlé‡Œï¼Œè¦æ·»åŠ countçš„SQLå®šä¹‰</strong></p><ul><li>MySQLæŸ¥è¯¢è®°å½•è¯­å¥</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select count(*) from departmentï¼›</span><br><span class="line">select count(*) from department where department_name like &#x27;%é€šä¿¡%&#x27;;</span><br></pre></td></tr></table></figure><ul><li>Mybatis</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;where&gt;</span><br><span class="line">    &lt;if test=&quot;departmentName != null&quot;&gt;</span><br><span class="line">    department_name like #&#123;departmentName&#125;</span><br><span class="line">    &lt;/if&gt;</span><br><span class="line">&lt;/where&gt;</span><br></pre></td></tr></table></figure><p>  ä¸æ˜¯NULLï¼Œåˆ™æœ‰è¾“å…¥è¿‡æ»¤æ¡ä»¶ã€‚</p><p>  #{departmentName}ä¼šå°†departmentNameå†…å®¹æ›¿æ¢åˆ°MySQLè¯­å¥ä¸­ï¼Œè‹¥æœ‰å¤šä¸ªé€»è¾‘æ¡ä»¶ï¼Œåˆ™ç”¨andé€»è¾‘ä¸</p><ul><li>åˆ©ç”¨myBatisåˆ°æ•°æ®åº“ä¸­æŸ¥è¯¢æ•°æ®ï¼Œä»¥åˆ†é¡µçš„æ–¹å¼</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* æ ¹æ®æŸ¥è¯¢æ¡ä»¶è·å–éƒ¨é—¨åˆ—è¡¨</span></span><br><span class="line"><span class="comment">*</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span> queryDTO æŸ¥è¯¢æ¡ä»¶</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span> offset   å¼€å§‹ä½ç½®</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span> limit    è®°å½•æ•°é‡</span></span><br><span class="line"><span class="comment">* <span class="doctag">@return</span> éƒ¨é—¨åˆ—è¡¨</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">List&lt;Department&gt; <span class="title function_">list</span><span class="params">(</span></span><br><span class="line"><span class="params">    <span class="meta">@Param(&quot;queryDTO&quot;)</span> DepartmentQueryDTO queryDTO,</span></span><br><span class="line"><span class="params">    <span class="meta">@Param(&quot;offset&quot;)</span> Integer offset,</span></span><br><span class="line"><span class="params">    <span class="meta">@Param(&quot;limit&quot;)</span> Integer limit</span></span><br><span class="line"><span class="params">)</span>;</span><br></pre></td></tr></table></figure><ul><li>å°†Departmentå¯¹è±¡è½¬VOå¯¹è±¡</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å°†å®ä½“å¯¹è±¡è½¬æ¢ä¸ºVOå¯¹è±¡</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> department å®ä½“å¯¹è±¡</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> nameMap</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> VOå¯¹è±¡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> DepartmentVO <span class="title function_">convertToVO</span><span class="params">(Department department, Map&lt;Integer, String&gt; nameMap)</span> &#123;</span><br><span class="line">        <span class="type">DepartmentVO</span> <span class="variable">departmentVO</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DepartmentVO</span>();</span><br><span class="line">        <span class="comment">//æŠŠç¬¬ä¸€ä¸ªå¯¹è±¡çš„å­—æ®µï¼Œå¤åˆ¶åˆ°ç¬¬äºŒä¸ªå¯¹è±¡ï¼Œå‰æè¦æ±‚æ˜¯å­—æ®µå¿…é¡»å¯¹åº”</span></span><br><span class="line">        BeanUtils.copyProperties(department, departmentVO);</span><br><span class="line"></span><br><span class="line">        departmentVO.setCreatedByDesc(nameMap.get(department.getCreatedBy()));</span><br><span class="line">        <span class="keyword">return</span> departmentVO;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>IDEA F8å•æ­¥æ‰§è¡ŒRun over  F7 Run into</li></ul><h3 id="é¿å…é‡å¤åˆ›å»ºéƒ¨é—¨"><a href="#é¿å…é‡å¤åˆ›å»ºéƒ¨é—¨" class="headerlink" title="é¿å…é‡å¤åˆ›å»ºéƒ¨é—¨"></a>é¿å…é‡å¤åˆ›å»ºéƒ¨é—¨</h3><ol><li><h4 id="daoä¸­åˆ›å»ºMapperç±»"><a href="#daoä¸­åˆ›å»ºMapperç±»" class="headerlink" title="daoä¸­åˆ›å»ºMapperç±»"></a>daoä¸­åˆ›å»ºMapperç±»</h4></li></ol>  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Department <span class="title function_">getByName</span><span class="params">(<span class="meta">@Param(&quot;name&quot;)</span>String name)</span>;</span><br></pre></td></tr></table></figure><ol start="2"><li><h4 id="xmlä¸­æ·»åŠ "><a href="#xmlä¸­æ·»åŠ " class="headerlink" title="xmlä¸­æ·»åŠ "></a>xmlä¸­æ·»åŠ </h4></li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- è·å–åå­— --&gt;</span><br><span class="line">    &lt;select id=&quot;getByName&quot; resultMap=&quot;BaseResultMap&quot;&gt;</span><br><span class="line">        select  *</span><br><span class="line">        from department</span><br><span class="line">        where department_name = *&#123;name&#125;</span><br><span class="line">    &lt;/select&gt;</span><br></pre></td></tr></table></figure><ol start="3"><li><h4 id="Implä¸­æ·»åŠ Assert"><a href="#Implä¸­æ·»åŠ Assert" class="headerlink" title="Implä¸­æ·»åŠ Assert"></a>Implä¸­æ·»åŠ Assert</h4></li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Assert.isNull(departmentMapper.getByName(departmentDTO.getDepartmentName()),<span class="string">&quot;éƒ¨é—¨å·²ç»å­˜åœ¨&quot;</span>);</span><br></pre></td></tr></table></figure><p>â€‹     </p><h2 id="3-å‰ç«¯å­¦ä¹ "><a href="#3-å‰ç«¯å­¦ä¹ " class="headerlink" title="3.å‰ç«¯å­¦ä¹ "></a>3.å‰ç«¯å­¦ä¹ </h2><p>åªçœ‹javaåŸºæœ¬è¯­æ³•ï¼Œèƒ½å¤Ÿåœ¨é¡¹ç›®ä¸­å†™ä»£ç å³å¯</p><h3 id="åŸºæœ¬çŸ¥è¯†"><a href="#åŸºæœ¬çŸ¥è¯†" class="headerlink" title="åŸºæœ¬çŸ¥è¯†"></a>åŸºæœ¬çŸ¥è¯†</h3><ol><li><h4 id="ç®­å¤´å‡½æ•°"><a href="#ç®­å¤´å‡½æ•°" class="headerlink" title="ç®­å¤´å‡½æ•°"></a>ç®­å¤´å‡½æ•°</h4></li></ol><blockquote><p>c: int add(int a, int b);<br>ts:  function add(a: number, b: number);<br>ts: æ•°æ®ç±»å‹ï¼šnumber(æ•°å­—ç±»å‹ï¼Œ3, 5.2), string, boolean, â€¦</p><p>ç®­å¤´å‡½æ•°æ˜¯æ²¡æœ‰åå­—çš„<br>Typescript &#x3D;&gt; javascript &#x3D;&gt; åœ¨æµè§ˆå™¨ä¸­è¿è¡Œ<br>chrome V8 jså¼•æ“ï¼Œå•è¿›ç¨‹å•çº¿ç¨‹é‡Œrunçš„<br>å¼‚æ­¥å‡½æ•°ï¼š éé˜»å¡ </p></blockquote><ol start="2"><li><h4 id="å®šä¹‰ä¸€ä¸ªå›è°ƒå‡½æ•°"><a href="#å®šä¹‰ä¸€ä¸ªå›è°ƒå‡½æ•°" class="headerlink" title="å®šä¹‰ä¸€ä¸ªå›è°ƒå‡½æ•°"></a>å®šä¹‰ä¸€ä¸ªå›è°ƒå‡½æ•°</h4></li></ol><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å®šä¹‰ä¸€ä¸ªDeleteçš„å›è°ƒå‡½æ•°</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">handleDelete</span> = <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span> (!selectedRowKeys?.<span class="property">length</span>) <span class="keyword">return</span>;</span><br><span class="line">    <span class="title function_">openConfirm</span>(<span class="string">`æ‚¨ç¡®å®šåˆ é™¤<span class="subst">$&#123;selectedRowKeys.length&#125;</span>æ¡è®°å½•å—`</span>, <span class="keyword">async</span> () =&gt; &#123;</span><br><span class="line">        <span class="comment">// await deleteBook(selectedRowKeys);</span></span><br><span class="line">        refAction.<span class="property">current</span>?.<span class="title function_">reload</span>();</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><ol start="3"><li><h4 id="å£°æ˜å˜é‡ä¸æ–¹æ³•"><a href="#å£°æ˜å˜é‡ä¸æ–¹æ³•" class="headerlink" title="å£°æ˜å˜é‡ä¸æ–¹æ³•"></a>å£°æ˜å˜é‡ä¸æ–¹æ³•</h4></li></ol><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å£°æ˜ä¸¤ä¸ªå¸¸é‡ï¼Œå˜é‡åä¸ºselectedRowKeysï¼Œæ”¹å˜å˜é‡å€¼çš„æ–¹æ³•ä¸ºselectRow</span></span><br><span class="line"><span class="keyword">const</span> [selectedRowKeys, selectRow] = useState&lt;<span class="built_in">number</span>[]&gt;([]);</span><br><span class="line"><span class="comment">//å£°æ˜é¡µé¢çº§çŠ¶æ€å˜é‡ï¼Œå°†å˜é‡ä¼ é€’ç»™å¯¹è¯æ¡†ï¼Œ&lt;&gt;å†…è¡¨ç¤ºæ˜¯ä»€ä¹ˆç±»å‹çš„æ•°æ®ï¼Œ()ä¸ºç©ºè¡¨ç¤ºä¸å¯¹å…¶åˆå§‹åŒ–</span></span><br><span class="line"><span class="keyword">const</span> [book, setBook] = useState&lt;<span class="variable constant_">API</span>.<span class="property">BookVO</span>&gt;();</span><br></pre></td></tr></table></figure><ol start="4"><li><h4 id="ä»¥å¼‚æ­¥éé˜»å¡æ–¹å¼è¿è¡Œ"><a href="#ä»¥å¼‚æ­¥éé˜»å¡æ–¹å¼è¿è¡Œ" class="headerlink" title="ä»¥å¼‚æ­¥éé˜»å¡æ–¹å¼è¿è¡Œ"></a>ä»¥å¼‚æ­¥éé˜»å¡æ–¹å¼è¿è¡Œ</h4></li></ol><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">myfunc</span>();</span><br></pre></td></tr></table></figure><ol start="5"><li><h4 id="å›è°ƒå¼"><a href="#å›è°ƒå¼" class="headerlink" title="å›è°ƒå¼"></a>å›è°ƒå¼</h4></li></ol><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">myfunc</span>().<span class="title function_">then</span>(<span class="function">(<span class="params">data</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(dataï¼‰ï¼›</span><br><span class="line"><span class="title function_">myFunc2</span>().<span class="title function_">then</span>(<span class="function"><span class="params">d</span>=&gt;</span>&#123;</span><br><span class="line">   <span class="comment">//...</span></span><br><span class="line">&#125;);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><ol start="6"><li><h4 id="å¼‚æ­¥å‡½æ•°çš„æ‰§è¡Œæ–¹å¼"><a href="#å¼‚æ­¥å‡½æ•°çš„æ‰§è¡Œæ–¹å¼" class="headerlink" title="å¼‚æ­¥å‡½æ•°çš„æ‰§è¡Œæ–¹å¼"></a>å¼‚æ­¥å‡½æ•°çš„æ‰§è¡Œæ–¹å¼</h4></li></ol><p><strong>æ³¨æ„åªæœ‰å¤–éƒ¨æ˜¯asyncå¼‚æ­¥å‡½æ•°çš„æ—¶å€™æ‰å¯ä»¥åœ¨å†…éƒ¨ä½¿ç”¨await</strong></p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">myfff</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">await</span> <span class="title function_">myfunc</span>();</span><br><span class="line"></span><br><span class="line">   <span class="comment">///....</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="7"><li><h4 id="åˆ†é¡µå±•ç¤ºæ•°æ®ç»“æœé›†çš„antd-pro"><a href="#åˆ†é¡µå±•ç¤ºæ•°æ®ç»“æœé›†çš„antd-pro" class="headerlink" title="åˆ†é¡µå±•ç¤ºæ•°æ®ç»“æœé›†çš„antd pro"></a>åˆ†é¡µå±•ç¤ºæ•°æ®ç»“æœé›†çš„antd pro</h4></li></ol><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="title class_">ProTable</span>&lt;<span class="variable constant_">API</span>.<span class="property">DepartmentVO</span>&gt; </span><br></pre></td></tr></table></figure><ol start="8"><li><h4 id="åˆ·æ–°æ“ä½œ"><a href="#åˆ·æ–°æ“ä½œ" class="headerlink" title="åˆ·æ–°æ“ä½œ"></a>åˆ·æ–°æ“ä½œ</h4></li></ol><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> refAction = useRef&lt;<span class="title class_">ActionType</span>&gt;(<span class="literal">null</span>);</span><br></pre></td></tr></table></figure><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">refAction.<span class="property">current</span>?.<span class="title function_">reload</span>();</span><br></pre></td></tr></table></figure><ol start="9"><li><h4 id="ProTableå­˜å‚¨æ•°æ®"><a href="#ProTableå­˜å‚¨æ•°æ®" class="headerlink" title="ProTableå­˜å‚¨æ•°æ®"></a>ProTableå­˜å‚¨æ•°æ®</h4></li></ol><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//paramsä¸ºåˆ†é¡µä¿¡æ¯ï¼Œprotableè‡ªåŠ¨å°†paramsä¼ é€’ç»™listBookï¼Œ</span></span><br><span class="line"><span class="comment">//æ•°æ®ç”±convertPageDataè½¬æ¢ä¸ºantd protableçš„æ•°æ®æ ¼å¼</span></span><br><span class="line">request=&#123;<span class="keyword">async</span> (params = &#123;&#125;) =&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">convertPageData</span>(<span class="keyword">await</span> <span class="title function_">listBook</span>(params));</span><br><span class="line">&#125;&#125;</span><br></pre></td></tr></table></figure><ol start="10"><li><h4 id="æ¨¡æ€å¯¹è¯æ¡†æ˜¾ç¤ºæ•°æ®"><a href="#æ¨¡æ€å¯¹è¯æ¡†æ˜¾ç¤ºæ•°æ®" class="headerlink" title="æ¨¡æ€å¯¹è¯æ¡†æ˜¾ç¤ºæ•°æ®"></a>æ¨¡æ€å¯¹è¯æ¡†æ˜¾ç¤ºæ•°æ®</h4></li></ol><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è®¾ç½®bookä¸ºå½“å‰recordï¼Œå¹¶ä¸”ä½¿å¯¹è¯æ¡†å¯è§†åŒ–</span></span><br><span class="line"><span class="attr">render</span>: <span class="function">(<span class="params">dom, record</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">a</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-xml">        setBook(record);</span></span><br><span class="line"><span class="language-xml">        setVisible(true);</span></span><br><span class="line"><span class="language-xml">    &#125;&#125;</span></span><br><span class="line"><span class="language-xml">    &gt;</span></span><br><span class="line"><span class="language-xml">        &#123;dom&#125;</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span><br><span class="line">);</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">InputDialog</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">//<span class="attr">æ¥æ”¶bookæ•°æ®</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml"><span class="attr">detailData</span>=<span class="string">&#123;book&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml"><span class="attr">onClose</span>=<span class="string">&#123;(result)</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-xml">    setVisible(false);</span></span><br><span class="line"><span class="language-xml">    result &amp;&amp; refAction.current?.reload();</span></span><br><span class="line"><span class="language-xml">&#125;&#125;</span></span><br><span class="line"><span class="language-xml">visible=&#123;visible&#125;</span></span><br><span class="line"><span class="language-xml">/&gt;</span></span><br></pre></td></tr></table></figure><h4 id="æ³¨æ„"><a href="#æ³¨æ„" class="headerlink" title="æ³¨æ„"></a>æ³¨æ„</h4><blockquote><p>é¡µé¢çº§çŠ¶æ€å‘ç”Ÿå˜åŒ–çš„æ—¶å€™<br>é‡æ–°æ¸²æŸ“</p><p>é¡µé¢è¢«åŠ è½½çš„æ—¶å€™ï¼Œç¬¬ä¸€æ¬¡æ‰§è¡Œä½ çš„æ¸²æŸ“å‡½æ•°<br>Reactå·§å¦™çš„æŠ€æœ¯</p><p>useEffectå¼€å§‹ä¼šæ‰§è¡Œä¸€æ¬¡</p><p>å½“æ•°ç»„ä¸­çš„å˜é‡å˜åŒ–æ—¶ï¼ŒuseEffectä¼šè¢«è°ƒç”¨</p><p>useModel: åº”ç”¨çº§çŠ¶æ€ï¼Œæ‰€æœ‰é¡µé¢æ¨¡å—å¯å…±äº«ã€‚é¡µé¢åˆ·æ–°æˆ–å…³é—­æµè§ˆå™¨åæ¶ˆå¤± umi useModal</p></blockquote><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">waitTime</span>().<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (props.<span class="property">detailData</span>) &#123;</span><br><span class="line">        form?.<span class="property">current</span>?.<span class="title function_">setFieldsValue</span>(props.<span class="property">detailData</span>);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        form?.<span class="property">current</span>?.<span class="title function_">resetFields</span>();</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;, [    å˜é‡    ]);</span><br></pre></td></tr></table></figure><h3 id="npmå®‰è£…"><a href="#npmå®‰è£…" class="headerlink" title="npmå®‰è£…"></a>npmå®‰è£…</h3><ol><li><p>æ›´æ¢æ·˜å®æºä¹‹ånpm installè¿˜ä¼šæŠ¥é”™</p></li><li><p>å³ä½¿ä½¿ç”¨æ¸…é™¤å‘½ä»¤ä¹Ÿä¼šæŠ¥é”™</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">æ¸…ç†ç¼“å­˜å‘½ä»¤ï¼š</span><br><span class="line">npm cache clean --force</span><br></pre></td></tr></table></figure></li><li><p>æ‰‹åŠ¨åˆ é™¤ç¼“å­˜ç›®å½•ä¸­çš„å…¨éƒ¨å†…å®¹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">C:\Users\bsgbs\AppData\Local\npm-cache</span><br></pre></td></tr></table></figure></li><li><p>å†æ¬¡è¿è¡Œnpm installå³å¯å®Œæˆå®‰è£…</p></li></ol><h3 id="OpenAPIè¿è¡Œå‡ºé”™"><a href="#OpenAPIè¿è¡Œå‡ºé”™" class="headerlink" title="OpenAPIè¿è¡Œå‡ºé”™"></a>OpenAPIè¿è¡Œå‡ºé”™</h3><p>è£…å¥½ä¾èµ–ä¹‹åå‘ç°è¿è¡ŒOpenAPIä¼šæŠ¥é”™</p><h4 id="è§£å†³æ–¹æ¡ˆï¼š"><a href="#è§£å†³æ–¹æ¡ˆï¼š" class="headerlink" title="è§£å†³æ–¹æ¡ˆï¼š"></a>è§£å†³æ–¹æ¡ˆï¼š</h4><ol><li><p>åˆ é™¤å®‰è£…ç›®å½•</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">E:\Files\Projects\CXCollege\software\frontend\web-frontend-master\web-frontend\node_modules</span><br></pre></td></tr></table></figure></li><li><p>é‡è£…npn install</p></li><li><p>è¿è¡Œåç«¯ä¹‹åï¼Œå†æ¬¡å°è¯•npm run openapiæˆåŠŸè¿è¡Œ</p></li></ol><hr><ol><li>ä½¿ç”¨Navicatæ–°å»ºbookè¡¨æ ¼</li></ol><p><img src="E:\Files\Projects\CXCollege\software\Image\1.png" alt="1"></p><p>2.generatorConfig.xmlæ·»åŠ tableä¿¡æ¯</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">table</span> <span class="attr">tableName</span>=<span class="string">&quot;book&quot;</span> <span class="attr">domainObjectName</span>=<span class="string">&quot;Book&quot;</span> <span class="attr">enableCountByExample</span>=<span class="string">&quot;false&quot;</span></span></span><br><span class="line"><span class="tag">               <span class="attr">enableUpdateByExample</span>=<span class="string">&quot;false&quot;</span></span></span><br><span class="line"><span class="tag">               <span class="attr">enableDeleteByExample</span>=<span class="string">&quot;false&quot;</span> <span class="attr">enableSelectByExample</span>=<span class="string">&quot;false&quot;</span> <span class="attr">selectByExampleQueryId</span>=<span class="string">&quot;false&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br></pre></td></tr></table></figure><p>3.run maven</p><p>4.serviceä¸­æ·»åŠ interface</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> redlib.backend.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> redlib.backend.dto.TestDTO;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">BookService</span> &#123;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">insert</span><span class="params">(BookDTO bookDTO)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>4.implä¸­æ·»åŠ javaç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> redlib.backend.service.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"><span class="keyword">import</span> redlib.backend.dao.BookMapper;</span><br><span class="line"><span class="keyword">import</span> redlib.backend.dto.BookDTO;</span><br><span class="line"><span class="keyword">import</span> redlib.backend.model.Book;</span><br><span class="line"><span class="keyword">import</span> redlib.backend.service.BookService;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">BookService</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> BookMapper bookMapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">insert</span><span class="params">(BookDTO bookDTO)</span> &#123;</span><br><span class="line">        <span class="type">Book</span> <span class="variable">book</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Book</span>();</span><br><span class="line">        book.setBookName(bookDTO.getBook_name());</span><br><span class="line">        book.setIsbn(bookDTO.getISBN());</span><br><span class="line">        book.setBookAuthor(bookDTO.getBook_author());</span><br><span class="line">        book.setBookPublish(bookDTO.getBook_publish());</span><br><span class="line">        book.setBookPrice(bookDTO.getBook_price());</span><br><span class="line">        book.setBookType(bookDTO.getBook_type());</span><br><span class="line">        book.setBookLocation(bookDTO.getBook_location());</span><br><span class="line">        bookMapper.insert(book);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>5.æ·»åŠ å¯¹åº”controller ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> redlib.backend.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.PostMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestBody;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"><span class="keyword">import</span> redlib.backend.annotation.NeedNoPrivilege;</span><br><span class="line"><span class="keyword">import</span> redlib.backend.dto.BookDTO;</span><br><span class="line"><span class="keyword">import</span> redlib.backend.service.BookService;</span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/api/book&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookController</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> BookService bookService;</span><br><span class="line">    <span class="meta">@PostMapping(&quot;addRecord&quot;)</span></span><br><span class="line">    <span class="meta">@NeedNoPrivilege</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addRecord</span><span class="params">(<span class="meta">@RequestBody</span> BookDTO bookDTO)</span>&#123;</span><br><span class="line">        bookService.insert(bookDTO);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>6.æ·»åŠ DTOç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> redlib.backend.dto;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.math.BigDecimal;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookDTO</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String Book_name;</span><br><span class="line">    <span class="keyword">private</span> String ISBN;</span><br><span class="line">    <span class="keyword">private</span> String Book_author;</span><br><span class="line">    <span class="keyword">private</span> String Book_publish;</span><br><span class="line">    <span class="keyword">private</span> BigDecimal Book_price;</span><br><span class="line">    <span class="keyword">private</span> String Book_type;</span><br><span class="line">    <span class="keyword">private</span> String Book_location;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å¸¸ç”¨æ³¨è§£"><a href="#å¸¸ç”¨æ³¨è§£" class="headerlink" title="å¸¸ç”¨æ³¨è§£"></a>å¸¸ç”¨æ³¨è§£</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span>ï¼šå¼•ç”¨å…¶ä»–ç»„ä»¶</span><br><span class="line"><span class="meta">@Data</span>çš„ä½¿ç”¨ï¼š lombokï¼Œè‡ªåŠ¨ç”Ÿæˆgetterå’Œsetter</span><br><span class="line"><span class="meta">@Slf4j</span>çš„ä½¿ç”¨ï¼šæ—¥å¿—ã€‚å¯ä»¥ç›´æ¥ç”¨log.debug, log.errorç­‰</span><br><span class="line"><span class="meta">@Service</span>:  ä¸šåŠ¡æœåŠ¡ç»„ä»¶ã€‚è¿™ä¸ªç»„ä»¶å¯ä»¥è®¿é—®æ•°æ®åº“</span><br><span class="line"><span class="meta">@RestController</span>:  æ§åˆ¶å™¨ç»„ä»¶</span><br><span class="line"><span class="meta">@GetMapping</span>å’Œ<span class="meta">@PostMapping</span>:  æ§åˆ¶å™¨æ–¹æ³•æ³¨è§£ï¼ŒæŒ‡å®šURLè·¯å¾„</span><br><span class="line"><span class="meta">@NeedNoToken</span>:  ä¸éœ€è¦ç™»å½•å³å¯è®¿é—®çš„æ–¹æ³•</span><br></pre></td></tr></table></figure><h2 id="4-ä¸ªäººå›¾ä¹¦é¦†"><a href="#4-ä¸ªäººå›¾ä¹¦é¦†" class="headerlink" title="4.ä¸ªäººå›¾ä¹¦é¦†"></a>4.ä¸ªäººå›¾ä¹¦é¦†</h2><p>å›¾ä¹¦ä¿¡æ¯è¡¨ <em>book</em></p><table><thead><tr><th>å­—æ®µåç§°</th><th>æ•°æ®ç±»å‹</th><th>ç´¢å¼•</th><th>æ ·ä¾‹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>book_id</td><td>int(10)</td><td>Primary Key</td><td>1234</td><td>ä¹¦ç±ID</td></tr><tr><td>book_name</td><td>char(20)</td><td></td><td>é©¬åŸ</td><td>ä¹¦ç±åç§°</td></tr><tr><td>isbn</td><td>char(13)</td><td></td><td>1234567891234</td><td>ISBN</td></tr><tr><td>book_author</td><td>char(10)</td><td></td><td>ä½œè€…</td><td>ä¹¦ç±ä½œè€…</td></tr><tr><td>book_publish</td><td>char(20)</td><td></td><td>å±±å¤§å‡ºç‰ˆç¤¾</td><td>ä¹¦ç±å‡ºç‰ˆç¤¾</td></tr><tr><td>book_price</td><td>double(20,2)</td><td></td><td>30.23</td><td>ä¹¦ç±ä»·æ ¼</td></tr><tr><td>book_type</td><td>char(20)</td><td></td><td></td><td>ä¹¦ç±ç±»å‹</td></tr><tr><td>book_boutime</td><td>datetime</td><td></td><td></td><td>è´­ä¹°æ—¶é—´</td></tr><tr><td>book_pubtime</td><td>datetime</td><td></td><td></td><td>å‡ºç‰ˆæ—¶é—´</td></tr></tbody></table><h3 id="åŸºæœ¬é¡µé¢æ¡†æ¶"><a href="#åŸºæœ¬é¡µé¢æ¡†æ¶" class="headerlink" title="åŸºæœ¬é¡µé¢æ¡†æ¶"></a>åŸºæœ¬é¡µé¢æ¡†æ¶</h3><h4 id="åç«¯"><a href="#åç«¯" class="headerlink" title="åç«¯"></a>åç«¯</h4><ul><li><h4 id="å¢åŠ æ¥å£"><a href="#å¢åŠ æ¥å£" class="headerlink" title="å¢åŠ æ¥å£"></a>å¢åŠ æ¥å£</h4></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> redlib.backend.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> redlib.backend.dto.BookDTO;</span><br><span class="line"><span class="keyword">import</span> redlib.backend.dto.query.BookQueryDTO;</span><br><span class="line"><span class="keyword">import</span> redlib.backend.model.Page;</span><br><span class="line"><span class="keyword">import</span> redlib.backend.vo.BookVO;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">BookService</span> &#123;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">insert</span><span class="params">(BookDTO bookDTO)</span>;</span><br><span class="line">    Page&lt;BookVO&gt; <span class="title function_">listByPage</span><span class="params">(BookQueryDTO queryDTO)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><h4 id="Implä¸­å®ç°Service"><a href="#Implä¸­å®ç°Service" class="headerlink" title="Implä¸­å®ç°Service"></a>Implä¸­å®ç°Service</h4></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> redlib.backend.service.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.BeanUtils;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"><span class="keyword">import</span> org.springframework.util.Assert;</span><br><span class="line"><span class="keyword">import</span> redlib.backend.dao.BookMapper;</span><br><span class="line"><span class="keyword">import</span> redlib.backend.dto.BookDTO;</span><br><span class="line"><span class="keyword">import</span> redlib.backend.dto.query.BookQueryDTO;</span><br><span class="line"><span class="keyword">import</span> redlib.backend.model.Book;</span><br><span class="line"><span class="keyword">import</span> redlib.backend.model.Page;</span><br><span class="line"><span class="keyword">import</span> redlib.backend.service.AdminService;</span><br><span class="line"><span class="keyword">import</span> redlib.backend.service.BookService;</span><br><span class="line"><span class="keyword">import</span> redlib.backend.service.utils.BookUtils;</span><br><span class="line"><span class="keyword">import</span> redlib.backend.utils.FormatUtils;</span><br><span class="line"><span class="keyword">import</span> redlib.backend.utils.PageUtils;</span><br><span class="line"><span class="keyword">import</span> redlib.backend.vo.BookVO;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"><span class="keyword">import</span> java.util.Set;</span><br><span class="line"><span class="keyword">import</span> java.util.stream.Collectors;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">BookService</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> BookMapper bookMapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> AdminService adminService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">insert</span><span class="params">(BookDTO bookDTO)</span> &#123;</span><br><span class="line">        <span class="type">Book</span> <span class="variable">book</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Book</span>();</span><br><span class="line">        book.setBookName(bookDTO.getBookName());</span><br><span class="line">        book.setIsbn(bookDTO.getISBN());</span><br><span class="line">        book.setBookAuthor(bookDTO.getBookAuthor());</span><br><span class="line">        book.setBookPublish(bookDTO.getBookPublish());</span><br><span class="line">        book.setBookPrice(bookDTO.getBookPrice());</span><br><span class="line">        book.setBookType(bookDTO.getBookType());</span><br><span class="line">        book.setBookBoutime(bookDTO.getBookBoutime());</span><br><span class="line">        book.setBookPubtime(bookDTO.getBookPubtime());</span><br><span class="line">        bookMapper.insert(book);</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Page&lt;BookVO&gt; <span class="title function_">listByPage</span><span class="params">(BookQueryDTO queryDTO)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (queryDTO == <span class="literal">null</span>) &#123;</span><br><span class="line">            queryDTO = <span class="keyword">new</span> <span class="title class_">BookQueryDTO</span>();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//æ¨¡ç³ŠæŸ¥è¯¢</span></span><br><span class="line">        queryDTO.setBookName(FormatUtils.makeFuzzySearchTerm(queryDTO.getBookName()));</span><br><span class="line">        <span class="comment">//å°†æŸ¥è¯¢æ¡ä»¶å‘é€ç»™daoæ¥å£ï¼Œå…ˆæŸ¥è¯¢å‘½ä¸­ä¸ªæ•°</span></span><br><span class="line">        <span class="type">Integer</span> <span class="variable">size</span> <span class="operator">=</span> bookMapper.count(queryDTO);</span><br><span class="line">        <span class="type">PageUtils</span> <span class="variable">pageUtils</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">PageUtils</span>(queryDTO.getCurrent(), queryDTO.getPageSize(), size);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (size == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="comment">// æ²¡æœ‰å‘½ä¸­ï¼Œåˆ™è¿”å›ç©ºæ•°æ®ã€‚</span></span><br><span class="line">            <span class="keyword">return</span> pageUtils.getNullPage();</span><br><span class="line">        &#125;</span><br><span class="line">        List&lt;Book&gt; list = bookMapper.list(queryDTO, pageUtils.getOffset(), pageUtils.getLimit());</span><br><span class="line">        Set&lt;String&gt; adminIds = list.stream().map(Book::getBookName).collect(Collectors.toSet());</span><br><span class="line">        adminIds.addAll(list.stream().map(Book::getBookAuthor).collect(Collectors.toSet()));</span><br><span class="line">        <span class="comment">//Map&lt;String, String&gt; nameMap = adminService.getNameMap(adminIds);</span></span><br><span class="line"></span><br><span class="line">        List&lt;BookVO&gt; voList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (Book book : list) &#123;</span><br><span class="line">            <span class="type">BookVO</span> <span class="variable">vo</span> <span class="operator">=</span> BookUtils.convertToVO(book);</span><br><span class="line">            voList.add(vo);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//æŒ‰ç…§å‰ç«¯æ”¯æŒçš„æ ¼å¼è¿”å›ç»™å‰ç«¯</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Page</span>&lt;&gt;(pageUtils.getCurrent(), pageUtils.getPageSize(), pageUtils.getTotal(), voList);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><h5 id="æ–°å¢BookUtils-javaå°è£…å„ç§åŠŸèƒ½"><a href="#æ–°å¢BookUtils-javaå°è£…å„ç§åŠŸèƒ½" class="headerlink" title="æ–°å¢BookUtils.javaå°è£…å„ç§åŠŸèƒ½"></a>æ–°å¢BookUtils.javaå°è£…å„ç§åŠŸèƒ½</h5></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> redlib.backend.service.utils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.BeanUtils;</span><br><span class="line"><span class="keyword">import</span> org.springframework.util.Assert;</span><br><span class="line"><span class="keyword">import</span> redlib.backend.dto.BookDTO;</span><br><span class="line"><span class="keyword">import</span> redlib.backend.model.Book;</span><br><span class="line"><span class="keyword">import</span> redlib.backend.utils.FormatUtils;</span><br><span class="line"><span class="keyword">import</span> redlib.backend.vo.BookVO;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookUtils</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è§„èŒƒå¹¶æ ¡éªŒbookDTO</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> bookDTO å®ä½“å¯¹è±¡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">validateBook</span><span class="params">(BookDTO bookDTO)</span> &#123;</span><br><span class="line">        FormatUtils.trimFieldToNull(bookDTO);</span><br><span class="line">        Assert.notNull(bookDTO, <span class="string">&quot;ä¹¦ç±æ•°æ®ä¸èƒ½ä¸ºç©º&quot;</span>);</span><br><span class="line">        Assert.hasText(bookDTO.getBookName(), <span class="string">&quot;ä¹¦åä¸èƒ½ä¸ºç©º&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> BookVO <span class="title function_">convertToVO</span><span class="params">(Book book)</span> &#123;</span><br><span class="line">        <span class="type">BookVO</span> <span class="variable">bookVO</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BookVO</span>();</span><br><span class="line">        BeanUtils.copyProperties(book, bookVO);</span><br><span class="line">        <span class="keyword">return</span> bookVO;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><h5 id="åœ¨BookMapper-javaä¸­æ·»åŠ "><a href="#åœ¨BookMapper-javaä¸­æ·»åŠ " class="headerlink" title="åœ¨BookMapper.javaä¸­æ·»åŠ "></a>åœ¨BookMapper.javaä¸­æ·»åŠ </h5></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Book&gt; <span class="title function_">list</span><span class="params">(<span class="meta">@Param(&quot;queryDTO&quot;)</span> BookQueryDTO queryDTO, <span class="meta">@Param(&quot;offset&quot;)</span> Integer offset, <span class="meta">@Param(&quot;limit&quot;)</span> Integer limit)</span>;</span><br><span class="line"></span><br><span class="line">Integer <span class="title function_">count</span><span class="params">(BookQueryDTO queryDTO)</span>;</span><br></pre></td></tr></table></figure><ul><li><h5 id="xmlä¸­æ·»åŠ -1"><a href="#xmlä¸­æ·»åŠ -1" class="headerlink" title="xmlä¸­æ·»åŠ "></a>xmlä¸­æ·»åŠ </h5></li></ul> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- è·å–åå­—ä¸ªæ•°(åˆ†é¡µ) --&gt;</span><br><span class="line">&lt;select id=<span class="string">&quot;count&quot;</span> resultType=<span class="string">&quot;integer&quot;</span>&gt;</span><br><span class="line">  select <span class="title function_">count</span><span class="params">(*)</span></span><br><span class="line">  from book</span><br><span class="line">  &lt;where&gt;</span><br><span class="line">    &lt;<span class="keyword">if</span> test=<span class="string">&quot;bookName != null&quot;</span>&gt;</span><br><span class="line">      book_name like #&#123;bookName&#125;</span><br><span class="line">    &lt;/<span class="keyword">if</span>&gt;</span><br><span class="line">  &lt;/where&gt;</span><br><span class="line">&lt;/select&gt;</span><br><span class="line">  </span><br><span class="line">&lt;!-- è·å–éƒ¨é—¨(åˆ†é¡µ) --&gt;</span><br><span class="line">&lt;select id=<span class="string">&quot;list&quot;</span> resultMap=<span class="string">&quot;BaseResultMap&quot;</span>&gt;</span><br><span class="line">  select</span><br><span class="line">  &lt;include refid=<span class="string">&quot;Base_Column_List&quot;</span>/&gt;</span><br><span class="line">  from book</span><br><span class="line">  &lt;where&gt;</span><br><span class="line">    &lt;<span class="keyword">if</span> test=<span class="string">&quot;queryDTO.bookName != null&quot;</span>&gt;</span><br><span class="line">      Book_name like #&#123;queryDTO.bookName&#125;</span><br><span class="line">    &lt;/<span class="keyword">if</span>&gt;</span><br><span class="line">  &lt;/where&gt;</span><br><span class="line">  limit #&#123;offset&#125;, #&#123;limit&#125;</span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></table></figure><ul><li><h5 id="BookController-javaä¸­æ·»åŠ "><a href="#BookController-javaä¸­æ·»åŠ " class="headerlink" title="BookController.javaä¸­æ·»åŠ "></a>BookController.javaä¸­æ·»åŠ </h5></li></ul> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> BookService bookService;</span><br><span class="line"> </span><br><span class="line"><span class="meta">@PostMapping(&quot;listBook&quot;)</span></span><br><span class="line"><span class="meta">@Privilege(&quot;page&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Page&lt;BookVO&gt; <span class="title function_">listBook</span><span class="params">(<span class="meta">@RequestBody</span> BookQueryDTO queryDTO)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> bookService.listByPage(queryDTO);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><h5 id="æ·»åŠ BookQueryDTO-javaæ¨¡ç³ŠæŸ¥è¯¢"><a href="#æ·»åŠ BookQueryDTO-javaæ¨¡ç³ŠæŸ¥è¯¢" class="headerlink" title="æ·»åŠ BookQueryDTO.javaæ¨¡ç³ŠæŸ¥è¯¢"></a>æ·»åŠ BookQueryDTO.javaæ¨¡ç³ŠæŸ¥è¯¢</h5></li></ul> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> redlib.backend.dto.query;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookQueryDTO</span> <span class="keyword">extends</span> <span class="title class_">PageQueryDTO</span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä¹¦ç±åç§°ï¼Œæ¨¡ç³ŠåŒ¹é…</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String bookName;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="å‰ç«¯"><a href="#å‰ç«¯" class="headerlink" title="å‰ç«¯"></a>å‰ç«¯</h4><ul><li><h5 id="routes-tsä¸­æ·»åŠ é¡µé¢è·¯ç”±"><a href="#routes-tsä¸­æ·»åŠ é¡µé¢è·¯ç”±" class="headerlink" title="routes.tsä¸­æ·»åŠ é¡µé¢è·¯ç”±"></a>routes.tsä¸­æ·»åŠ é¡µé¢è·¯ç”±</h5></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">        path: &#x27;/base/book&#x27;,</span><br><span class="line">        name: &#x27;book&#x27;,</span><br><span class="line">        component: &#x27;./base/book&#x27;,</span><br><span class="line">        access: &#x27;hasPrivilege&#x27;</span><br><span class="line">      &#125;,</span><br></pre></td></tr></table></figure><ul><li><h5 id="åœ¨-src-locales-zh-CN-menu-tsä¿®æ”¹ç»´æŠ¤èœå•ä¸­æ–‡åç§°"><a href="#åœ¨-src-locales-zh-CN-menu-tsä¿®æ”¹ç»´æŠ¤èœå•ä¸­æ–‡åç§°" class="headerlink" title="åœ¨\src\locales\zh-CN\menu.tsä¿®æ”¹ç»´æŠ¤èœå•ä¸­æ–‡åç§°"></a>åœ¨\src\locales\zh-CN\menu.tsä¿®æ”¹ç»´æŠ¤èœå•ä¸­æ–‡åç§°</h5></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x27;menu.base.book&#x27;: &#x27;ä¹¦ç±ç®¡ç†&#x27;,</span><br></pre></td></tr></table></figure><ul><li><h5 id="åˆ›å»º-src-pages-base-book-index-tsx"><a href="#åˆ›å»º-src-pages-base-book-index-tsx" class="headerlink" title="åˆ›å»º \src\pages\base\book\index.tsx"></a>åˆ›å»º \src\pages\base\book\index.tsx</h5></li></ul><p><img src="E:\Files\Projects\CXCollege\software\Image\2.png" alt="2"></p><ul><li><h5 id="è¿è¡ŒOpenapi"><a href="#è¿è¡ŒOpenapi" class="headerlink" title="è¿è¡ŒOpenapi"></a>è¿è¡ŒOpenapi</h5></li></ul><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run openapi</span><br></pre></td></tr></table></figure><ul><li><h5 id="åŸºæœ¬æ¡†æ¶ä»£ç "><a href="#åŸºæœ¬æ¡†æ¶ä»£ç " class="headerlink" title="åŸºæœ¬æ¡†æ¶ä»£ç "></a>åŸºæœ¬æ¡†æ¶ä»£ç </h5></li></ul><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; deleteBook, listBook &#125; <span class="keyword">from</span> <span class="string">&#x27;@/services/api/book&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; convertPageData &#125; <span class="keyword">from</span> <span class="string">&#x27;@/utils/request&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; openConfirm &#125; <span class="keyword">from</span> <span class="string">&#x27;@/utils/ui&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">PlusOutlined</span>, <span class="title class_">DeleteOutlined</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@ant-design/icons&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">ActionType</span>, <span class="title class_">PageContainer</span>, <span class="title class_">ProColumns</span>, <span class="title class_">ProTable</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@ant-design/pro-components&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Button</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;antd&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; useRef, useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">InputDialog</span> <span class="keyword">from</span> <span class="string">&#x27;./InputDialog&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> () =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> refAction = useRef&lt;<span class="title class_">ActionType</span>&gt;(<span class="literal">null</span>);</span><br><span class="line">  <span class="comment">//å£°æ˜ä¸¤ä¸ªå¸¸é‡ï¼Œå˜é‡åä¸ºselectedRowKeysï¼Œæ”¹å˜å˜é‡å€¼çš„æ–¹æ³•ä¸ºselectRow</span></span><br><span class="line">  <span class="keyword">const</span> [selectedRowKeys, selectRow] = useState&lt;<span class="built_in">number</span>[]&gt;([]);</span><br><span class="line">  <span class="comment">//å£°æ˜é¡µé¢çº§çŠ¶æ€å˜é‡ï¼Œå°†å˜é‡ä¼ é€’ç»™å¯¹è¯æ¡†ï¼Œ&lt;&gt;å†…è¡¨ç¤ºæ˜¯ä»€ä¹ˆç±»å‹çš„æ•°æ®ï¼Œ()ä¸ºç©ºè¡¨ç¤ºä¸å¯¹å…¶åˆå§‹åŒ–</span></span><br><span class="line">  <span class="keyword">const</span> [book, setBook] = useState&lt;<span class="variable constant_">API</span>.<span class="property">BookVO</span>&gt;();</span><br><span class="line">  <span class="keyword">const</span> [visible, setVisible] = <span class="title function_">useState</span>(<span class="literal">false</span>);</span><br><span class="line">  <span class="comment">//å®šä¹‰ä¸€ä¸ªDeleteçš„å›è°ƒå‡½æ•°</span></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">handleDelete</span> = <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span> (!selectedRowKeys?.<span class="property">length</span>) <span class="keyword">return</span>;</span><br><span class="line">    <span class="title function_">openConfirm</span>(<span class="string">`æ‚¨ç¡®å®šåˆ é™¤<span class="subst">$&#123;selectedRowKeys.length&#125;</span>æ¡è®°å½•å—`</span>, <span class="keyword">async</span> () =&gt; &#123;</span><br><span class="line">      <span class="comment">// await deleteBook(selectedRowKeys);</span></span><br><span class="line">      refAction.<span class="property">current</span>?.<span class="title function_">reload</span>();</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">const</span> <span class="attr">columns</span>: <span class="title class_">ProColumns</span>&lt;<span class="variable constant_">API</span>.<span class="property">BookVO</span>&gt;[] = [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">title</span>: <span class="string">&#x27;ID&#x27;</span>,</span><br><span class="line">      <span class="attr">dataIndex</span>: <span class="string">&#x27;bookId&#x27;</span>,</span><br><span class="line">      <span class="attr">width</span>: <span class="number">100</span>,</span><br><span class="line">      <span class="attr">search</span>: <span class="literal">false</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">title</span>: <span class="string">&#x27;ä¹¦å&#x27;</span>,</span><br><span class="line">      <span class="attr">dataIndex</span>: <span class="string">&#x27;bookName&#x27;</span>,</span><br><span class="line">      <span class="attr">width</span>: <span class="number">100</span>,</span><br><span class="line">      <span class="attr">render</span>: <span class="function">(<span class="params">dom, record</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">          <span class="language-xml"><span class="tag">&lt;<span class="name">a</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-xml">              setBook(record);</span></span><br><span class="line"><span class="language-xml">              setVisible(true);</span></span><br><span class="line"><span class="language-xml">            &#125;&#125;</span></span><br><span class="line"><span class="language-xml">          &gt;</span></span><br><span class="line"><span class="language-xml">            &#123;dom&#125;</span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span><br><span class="line">        );</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">title</span>: <span class="string">&#x27;ISBN&#x27;</span>,</span><br><span class="line">      <span class="attr">dataIndex</span>: <span class="string">&#x27;isbn&#x27;</span>,</span><br><span class="line">      <span class="attr">width</span>: <span class="number">100</span>,</span><br><span class="line">      <span class="attr">search</span>: <span class="literal">false</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">title</span>: <span class="string">&#x27;åˆ†ç±»å·&#x27;</span>,</span><br><span class="line">      <span class="attr">dataIndex</span>: <span class="string">&#x27;bookType&#x27;</span>,</span><br><span class="line">      <span class="attr">width</span>: <span class="number">100</span>,</span><br><span class="line">      <span class="attr">search</span>: <span class="literal">false</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">title</span>: <span class="string">&#x27;ä½œè€…&#x27;</span>,</span><br><span class="line">      <span class="attr">dataIndex</span>: <span class="string">&#x27;bookAuthor&#x27;</span>,</span><br><span class="line">      <span class="attr">width</span>: <span class="number">100</span>,</span><br><span class="line">      <span class="attr">search</span>: <span class="literal">false</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">title</span>: <span class="string">&#x27;å‡ºç‰ˆç¤¾&#x27;</span>,</span><br><span class="line">      <span class="attr">dataIndex</span>: <span class="string">&#x27;bookPublish&#x27;</span>,</span><br><span class="line">      <span class="attr">width</span>: <span class="number">100</span>,</span><br><span class="line">      <span class="attr">search</span>: <span class="literal">false</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">title</span>: <span class="string">&#x27;å‡ºç‰ˆæ—¶é—´&#x27;</span>,</span><br><span class="line">      <span class="attr">dataIndex</span>: <span class="string">&#x27;bookPubtime&#x27;</span>,</span><br><span class="line">      <span class="attr">width</span>: <span class="number">100</span>,</span><br><span class="line">      <span class="attr">search</span>: <span class="literal">false</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">title</span>: <span class="string">&#x27;ä»·æ ¼&#x27;</span>,</span><br><span class="line">      <span class="attr">dataIndex</span>: <span class="string">&#x27;bookPrice&#x27;</span>,</span><br><span class="line">      <span class="attr">width</span>: <span class="number">100</span>,</span><br><span class="line">      <span class="attr">search</span>: <span class="literal">false</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">title</span>: <span class="string">&#x27;è´­ä¹°æ—¶é—´&#x27;</span>,</span><br><span class="line">      <span class="attr">dataIndex</span>: <span class="string">&#x27;bookBoutime&#x27;</span>,</span><br><span class="line">      <span class="attr">width</span>: <span class="number">100</span>,</span><br><span class="line">      <span class="attr">search</span>: <span class="literal">false</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  ];</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">PageContainer</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      &lt;ProTable<span class="tag">&lt;<span class="name">API.BookVO</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        actionRef=&#123;refAction&#125;</span></span><br><span class="line"><span class="language-xml">        rowKey=&quot;id&quot;</span></span><br><span class="line"><span class="language-xml">        //paramsä¸ºåˆ†é¡µä¿¡æ¯ï¼Œprotableè‡ªåŠ¨å°†paramsä¼ é€’ç»™listBookï¼Œ</span></span><br><span class="line"><span class="language-xml">        //æ•°æ®ç”±convertPageDataè½¬æ¢ä¸ºantd protableçš„æ•°æ®æ ¼å¼</span></span><br><span class="line"><span class="language-xml">        request=&#123;async (params = &#123;&#125;) =&gt; &#123;</span></span><br><span class="line"><span class="language-xml">          return convertPageData(await listBook(params));</span></span><br><span class="line"><span class="language-xml">        &#125;&#125;</span></span><br><span class="line"><span class="language-xml">        toolBarRender=&#123;() =&gt; [</span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">Button</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">key</span>=<span class="string">&quot;primary&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-xml">              setBook(undefined);</span></span><br><span class="line"><span class="language-xml">              setVisible(true);</span></span><br><span class="line"><span class="language-xml">            &#125;&#125;</span></span><br><span class="line"><span class="language-xml">          &gt;</span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">PlusOutlined</span> /&gt;</span> æ–°å»º</span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;/<span class="name">Button</span>&gt;</span>,</span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">Button</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">key</span>=<span class="string">&quot;primary&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">danger</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">onClick</span>=<span class="string">&#123;handleDelete&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">disabled</span>=<span class="string">&#123;!selectedRowKeys?.length&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          &gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">DeleteOutlined</span> /&gt;</span> åˆ é™¤</span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;/<span class="name">Button</span>&gt;</span>,</span></span><br><span class="line"><span class="language-xml">        ]&#125;</span></span><br><span class="line"><span class="language-xml">        columns=&#123;columns&#125;</span></span><br><span class="line"><span class="language-xml">        rowSelection=&#123;&#123;</span></span><br><span class="line"><span class="language-xml">          onChange: (rowKeys) =&gt; &#123;</span></span><br><span class="line"><span class="language-xml">            selectRow(rowKeys as number[]);</span></span><br><span class="line"><span class="language-xml">          &#125;,</span></span><br><span class="line"><span class="language-xml">        &#125;&#125;</span></span><br><span class="line"><span class="language-xml">      /&gt;</span></span><br><span class="line"><span class="language-xml">      //é€šè¿‡visibleæ§åˆ¶çŠ¶æ€æ¡†æ˜¯å¦æ˜¾ç¤º</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">InputDialog</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">detailData</span>=<span class="string">&#123;book&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">onClose</span>=<span class="string">&#123;(result)</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-xml">          setVisible(false);</span></span><br><span class="line"><span class="language-xml">          result &amp;&amp; refAction.current?.reload();</span></span><br><span class="line"><span class="language-xml">        &#125;&#125;</span></span><br><span class="line"><span class="language-xml">        visible=&#123;visible&#125;</span></span><br><span class="line"><span class="language-xml">      /&gt;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">PageContainer</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  );</span></span><br><span class="line"><span class="language-xml">&#125;;</span></span><br></pre></td></tr></table></figure><ul><li><h5 id="å®ŒæˆåŸºæœ¬é¡µé¢æ˜¾ç¤º"><a href="#å®ŒæˆåŸºæœ¬é¡µé¢æ˜¾ç¤º" class="headerlink" title="å®ŒæˆåŸºæœ¬é¡µé¢æ˜¾ç¤º"></a>å®ŒæˆåŸºæœ¬é¡µé¢æ˜¾ç¤º</h5></li></ul><p><img src="E:\Files\Projects\CXCollege\software\Image\6.png" alt="5"></p><hr><h3 id="ä¸ºBookå¢åŠ åŠŸèƒ½"><a href="#ä¸ºBookå¢åŠ åŠŸèƒ½" class="headerlink" title="ä¸ºBookå¢åŠ åŠŸèƒ½"></a>ä¸ºBookå¢åŠ åŠŸèƒ½</h3><h4 id="åç«¯-1"><a href="#åç«¯-1" class="headerlink" title="åç«¯"></a>åç«¯</h4><h5 id="1-addBook"><a href="#1-addBook" class="headerlink" title="1.addBook"></a>1.addBook</h5><ul><li><h5 id="å¢åŠ æ¥å£-1"><a href="#å¢åŠ æ¥å£-1" class="headerlink" title="å¢åŠ æ¥å£"></a>å¢åŠ æ¥å£</h5></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Integer <span class="title function_">addBook</span><span class="params">(BookDTO bookDTO)</span>;</span><br></pre></td></tr></table></figure><ul><li><h5 id="BookController-javaä¸­æ·»åŠ -1"><a href="#BookController-javaä¸­æ·»åŠ -1" class="headerlink" title="BookController.javaä¸­æ·»åŠ "></a>BookController.javaä¸­æ·»åŠ </h5></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@PostMapping(&quot;addBook&quot;)</span></span><br><span class="line"><span class="meta">@NeedNoPrivilege</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addBook</span><span class="params">(<span class="meta">@RequestBody</span> BookDTO bookDTO)</span>&#123;</span><br><span class="line">    bookService.addBook(bookDTO);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><h5 id="æ·»åŠ BookQueryDTO-java"><a href="#æ·»åŠ BookQueryDTO-java" class="headerlink" title="æ·»åŠ BookQueryDTO.java"></a>æ·»åŠ BookQueryDTO.java</h5></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> redlib.backend.dto.query;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookQueryDTO</span> <span class="keyword">extends</span> <span class="title class_">PageQueryDTO</span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * ä¹¦ç±åç§°ï¼Œæ¨¡ç³ŠåŒ¹é…</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">    <span class="keyword">private</span> String bookName;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><h5 id="å®Œå–„Implå®ç°"><a href="#å®Œå–„Implå®ç°" class="headerlink" title="å®Œå–„Implå®ç°"></a>å®Œå–„Implå®ç°</h5></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> Integer <span class="title function_">addBook</span><span class="params">(BookDTO bookDTO)</span>&#123;</span><br><span class="line">    <span class="comment">// æ ¡éªŒè¾“å…¥æ•°æ®æ­£ç¡®æ€§</span></span><br><span class="line">    BookUtils.validateBook(bookDTO);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">             * æ­¤å¤„åç»­å¯ä»¥å¢åŠ æ¡ä»¶</span></span><br><span class="line"><span class="comment">             *   ç›¸åŒåç§°çš„ä¹¦ç±å¯èƒ½å¯ä»¥å…±å­˜ï¼ˆä¸åŒISBNï¼‰</span></span><br><span class="line"><span class="comment">             * */</span></span><br><span class="line">    <span class="comment">//        Assert.isNull(bookMapper.getByName(bookDTO.getBook_name()),&quot;ä¹¦ç±å·²ç»å­˜åœ¨&quot;);</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ›å»ºå®ä½“å¯¹è±¡ï¼Œç”¨ä»¥ä¿å­˜åˆ°æ•°æ®åº“</span></span><br><span class="line">    <span class="type">Book</span> <span class="variable">book</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Book</span>();</span><br><span class="line">    <span class="comment">// å°†è¾“å…¥çš„å­—æ®µå…¨éƒ¨å¤åˆ¶åˆ°å®ä½“å¯¹è±¡ä¸­</span></span><br><span class="line">    BeanUtils.copyProperties(bookDTO, book);</span><br><span class="line">    <span class="comment">// è°ƒç”¨DAOæ–¹æ³•ä¿å­˜åˆ°æ•°æ®åº“è¡¨</span></span><br><span class="line">    bookMapper.insert(book);</span><br><span class="line">    <span class="keyword">return</span> book.getBookId();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h6 id="æè¿°"><a href="#æè¿°" class="headerlink" title="æè¿°"></a>æè¿°</h6><p>æ¥å£åœ°å€ï¼šbook&#x2F;addBook</p><p>è¯·æ±‚æ–¹æ³•: POST</p><p>å…¥å‚ï¼š</p><table><thead><tr><th>å‚æ•°å</th><th>å‚æ•°æè¿°</th><th>æ•°æ®ç±»å‹</th><th>å¿…å¡«</th><th>ç¤ºä¾‹&#x2F;å¤‡æ³¨</th></tr></thead><tbody><tr><td>bookName</td><td>åç§°</td><td>String</td><td>M</td><td>ä¹¦å</td></tr><tr><td>isbn</td><td>ISBN</td><td>String</td><td>M</td><td>1234567891234</td></tr><tr><td>bookAuthor</td><td>ä½œè€…</td><td>String</td><td>M</td><td>ä½œè€…</td></tr><tr><td>bookPublish</td><td>å‡ºç‰ˆç¤¾</td><td>String</td><td>M</td><td>å±±å¤§</td></tr><tr><td>bookPrice</td><td>ä»·æ ¼</td><td>Double</td><td>O</td><td>23.13</td></tr><tr><td>bookPubtime</td><td>å‡ºç‰ˆæ—¶é—´</td><td>String</td><td>O</td><td>2021-08-09</td></tr><tr><td>bookBoutime</td><td>è´­ä¹°æ—¶é—´</td><td>String</td><td>O</td><td>2021-08-09</td></tr><tr><td>bookType</td><td>åˆ†ç±»å·</td><td>String</td><td>O</td><td>GV943</td></tr></tbody></table><p><strong>å‡ºå‚ï¼š</strong>æ— </p><p>ç¤ºä¾‹ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span><span class="attr">&quot;code&quot;</span><span class="punctuation">:</span><span class="number">200</span><span class="punctuation">,</span><span class="attr">&quot;data&quot;</span><span class="punctuation">:</span><span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span><span class="attr">&quot;message&quot;</span><span class="punctuation">:</span><span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span><span class="attr">&quot;success&quot;</span><span class="punctuation">:</span><span class="literal"><span class="keyword">true</span></span><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>æ¥å£æè¿°ï¼š</p><p>1ã€ æ ¡éªŒå¿…å¡«é¡¹ä¸èƒ½ä¸ºç©º</p><p>2ã€ å°†å…¥å‚ä¿å­˜è‡³bookè¡¨å„å¯¹åº”å­—æ®µ</p><h6 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h6><p>æˆåŠŸæ–°å¢ä¿¡å·ä¸ç³»ç»Ÿ</p><p><img src="E:\Files\Projects\CXCollege\software\Image\12.png" alt="12"></p><p><img src="E:\Files\Projects\CXCollege\software\Image\13.png" alt="13"></p><h5 id="2-updateBook"><a href="#2-updateBook" class="headerlink" title="2.updateBook"></a>2.updateBook</h5><ul><li><h5 id="å¢åŠ æ¥å£-2"><a href="#å¢åŠ æ¥å£-2" class="headerlink" title="å¢åŠ æ¥å£"></a>å¢åŠ æ¥å£</h5></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Integer <span class="title function_">updateBook</span><span class="params">(BookDTO bookDTO)</span>;</span><br></pre></td></tr></table></figure><ul><li><h5 id="BookController-javaä¸­æ·»åŠ -2"><a href="#BookController-javaä¸­æ·»åŠ -2" class="headerlink" title="BookController.javaä¸­æ·»åŠ "></a>BookController.javaä¸­æ·»åŠ </h5></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@PostMapping(&quot;updateBook&quot;)</span></span><br><span class="line"><span class="meta">@Privilege(&quot;update&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Integer <span class="title function_">updateBook</span><span class="params">(<span class="meta">@RequestBody</span> BookDTO bookDTO)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> bookService.updateBook(bookDTO);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><h5 id="å®Œå–„Implå®ç°-1"><a href="#å®Œå–„Implå®ç°-1" class="headerlink" title="å®Œå–„Implå®ç°"></a>å®Œå–„Implå®ç°</h5></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> Integer <span class="title function_">updateBook</span><span class="params">(BookDTO bookDTO)</span> &#123;</span><br><span class="line">    <span class="comment">// æ ¡éªŒè¾“å…¥æ•°æ®æ­£ç¡®æ€§</span></span><br><span class="line">    <span class="type">Token</span> <span class="variable">token</span> <span class="operator">=</span> ThreadContextHolder.getToken();</span><br><span class="line">    BookUtils.validateBook(bookDTO);</span><br><span class="line">    Assert.notNull(bookDTO.getBookId(), <span class="string">&quot;ä¹¦ç±idä¸èƒ½ä¸ºç©º&quot;</span>);</span><br><span class="line">    <span class="type">Book</span> <span class="variable">book</span> <span class="operator">=</span> bookMapper.selectByPrimaryKey(bookDTO.getBookId());</span><br><span class="line">    Assert.notNull(book, <span class="string">&quot;æ²¡æœ‰æ‰¾åˆ°ä¹¦ç±ï¼ŒIdä¸ºï¼š&quot;</span> + bookDTO.getBookId());</span><br><span class="line"></span><br><span class="line">    BeanUtils.copyProperties(bookDTO, book);</span><br><span class="line">    bookMapper.updateByPrimaryKey(book);</span><br><span class="line">    <span class="keyword">return</span> book.getBookId();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h6 id="æè¿°-1"><a href="#æè¿°-1" class="headerlink" title="æè¿°"></a>æè¿°</h6><p>æ¥å£åœ°å€ï¼šbook&#x2F;updateBook</p><p>è¯·æ±‚æ–¹æ³•: POST</p><p>å…¥å‚ï¼šä¹¦ç±id</p><table><thead><tr><th>å‚æ•°å</th><th>å‚æ•°æè¿°</th><th>æ•°æ®ç±»å‹</th><th>å¿…å¡«</th><th>ç¤ºä¾‹&#x2F;å¤‡æ³¨</th></tr></thead><tbody><tr><td>bookName</td><td>åç§°</td><td>String</td><td>M</td><td>ä¹¦å</td></tr><tr><td>isbn</td><td>ISBN</td><td>String</td><td>M</td><td>1234567891234</td></tr><tr><td>bookAuthor</td><td>ä½œè€…</td><td>String</td><td>M</td><td>ä½œè€…</td></tr><tr><td>bookPublish</td><td>å‡ºç‰ˆç¤¾</td><td>String</td><td>M</td><td>å±±å¤§</td></tr><tr><td>bookPrice</td><td>ä»·æ ¼</td><td>Double</td><td>O</td><td>23.13</td></tr><tr><td>bookPubtime</td><td>å‡ºç‰ˆæ—¶é—´</td><td>String</td><td>O</td><td>2021-08-09</td></tr><tr><td>bookBoutime</td><td>è´­ä¹°æ—¶é—´</td><td>String</td><td>O</td><td>2021-08-09</td></tr><tr><td>bookType</td><td>åˆ†ç±»å·</td><td>String</td><td>O</td><td>GV943</td></tr></tbody></table><p><strong>å‡ºå‚ï¼š</strong>æ— </p><p>ç¤ºä¾‹ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span><span class="attr">&quot;code&quot;</span><span class="punctuation">:</span><span class="number">200</span><span class="punctuation">,</span><span class="attr">&quot;data&quot;</span><span class="punctuation">:</span><span class="number">1</span><span class="punctuation">,</span><span class="attr">&quot;message&quot;</span><span class="punctuation">:</span><span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span><span class="attr">&quot;success&quot;</span><span class="punctuation">:</span><span class="literal"><span class="keyword">true</span></span><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>æ¥å£æè¿°ï¼š</p><p>1ã€ æ ¡éªŒå¿…å¡«é¡¹ä¸èƒ½ä¸ºç©º</p><h6 id="æµ‹è¯•-1"><a href="#æµ‹è¯•-1" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h6><p>å±±å¤§â€”&gt;ç§‘å­¦å‡ºç‰ˆç¤¾ï¼ŒæˆåŠŸä¿®æ”¹</p><p><img src="E:\Files\Projects\CXCollege\software\Image\9.png" alt="9"></p><p><img src="E:\Files\Projects\CXCollege\software\Image\10.png" alt="10"></p><p><img src="E:\Files\Projects\CXCollege\software\Image\11.png" alt="11"></p><h5 id="3-deleteByCodes"><a href="#3-deleteByCodes" class="headerlink" title="3.deleteByCodes"></a>3.deleteByCodes</h5><ul><li><h5 id="å¢åŠ æ¥å£-3"><a href="#å¢åŠ æ¥å£-3" class="headerlink" title="å¢åŠ æ¥å£"></a>å¢åŠ æ¥å£</h5></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> <span class="title function_">deleteByCodes</span><span class="params">(List&lt;Integer&gt; ids)</span>;</span><br></pre></td></tr></table></figure><ul><li><h5 id="BookController-javaä¸­æ·»åŠ -3"><a href="#BookController-javaä¸­æ·»åŠ -3" class="headerlink" title="BookController.javaä¸­æ·»åŠ "></a>BookController.javaä¸­æ·»åŠ </h5></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@PostMapping(&quot;deleteBook&quot;)</span></span><br><span class="line"><span class="meta">@Privilege(&quot;delete&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">deleteBook</span><span class="params">(<span class="meta">@RequestBody</span> List&lt;Integer&gt; ids)</span> &#123;</span><br><span class="line">    bookService.deleteByCodes(ids);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><h5 id="å®Œå–„Implå®ç°-2"><a href="#å®Œå–„Implå®ç°-2" class="headerlink" title="å®Œå–„Implå®ç°"></a>å®Œå–„Implå®ç°</h5></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> Integer <span class="title function_">updateBook</span><span class="params">(BookDTO bookDTO)</span> &#123;</span><br><span class="line">    <span class="comment">// æ ¡éªŒè¾“å…¥æ•°æ®æ­£ç¡®æ€§</span></span><br><span class="line">    <span class="type">Token</span> <span class="variable">token</span> <span class="operator">=</span> ThreadContextHolder.getToken();</span><br><span class="line">    BookUtils.validateBook(bookDTO);</span><br><span class="line">    Assert.notNull(bookDTO.getBookId(), <span class="string">&quot;ä¹¦ç±idä¸èƒ½ä¸ºç©º&quot;</span>);</span><br><span class="line">    <span class="type">Book</span> <span class="variable">book</span> <span class="operator">=</span> bookMapper.selectByPrimaryKey(bookDTO.getBookId());</span><br><span class="line">    Assert.notNull(book, <span class="string">&quot;æ²¡æœ‰æ‰¾åˆ°ä¹¦ç±ï¼ŒIdä¸ºï¼š&quot;</span> + bookDTO.getBookId());</span><br><span class="line"></span><br><span class="line">    BeanUtils.copyProperties(bookDTO, book);</span><br><span class="line">    bookMapper.updateByPrimaryKey(book);</span><br><span class="line">    <span class="keyword">return</span> book.getBookId();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><h5 id="æ·»åŠ BookMapper-java"><a href="#æ·»åŠ BookMapper-java" class="headerlink" title="æ·»åŠ BookMapper.java"></a>æ·»åŠ BookMapper.java</h5></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> <span class="title function_">deleteByCodes</span><span class="params">(<span class="meta">@Param(&quot;codeList&quot;)</span> List&lt;Integer&gt; codeList)</span>;</span><br></pre></td></tr></table></figure><ul><li><h5 id="æ·»åŠ BookMapper-xml"><a href="#æ·»åŠ BookMapper-xml" class="headerlink" title="æ·»åŠ BookMapper.xml"></a>æ·»åŠ BookMapper.xml</h5></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- æ‰¹é‡åˆ é™¤ --&gt;</span><br><span class="line">  &lt;update id=&quot;deleteByCodes&quot;&gt;</span><br><span class="line">    delete from book</span><br><span class="line">    where book_id in</span><br><span class="line">    &lt;foreach item=&quot;item&quot; index=&quot;index&quot; collection=&quot;codeList&quot; open=&quot;(&quot; separator=&quot;,&quot; close=&quot;)&quot;&gt;</span><br><span class="line">      #&#123;item&#125;</span><br><span class="line">    &lt;/foreach&gt;</span><br></pre></td></tr></table></figure><h6 id="æè¿°-2"><a href="#æè¿°-2" class="headerlink" title="æè¿°"></a>æè¿°</h6><p>æ¥å£åœ°å€ï¼šbook&#x2F;deleteBook</p><p>è¯·æ±‚æ–¹æ³•: POST</p><p>å…¥å‚ï¼š</p><table><thead><tr><th>å‚æ•°å</th><th>å‚æ•°æè¿°</th><th>æ•°æ®ç±»å‹</th><th>å¿…å¡«</th><th>ç¤ºä¾‹&#x2F;å¤‡æ³¨</th></tr></thead><tbody><tr><td>0</td><td>ä¹¦ç±ID</td><td>Integer</td><td>M</td><td>0: 57</td></tr></tbody></table><p><strong>å‡ºå‚ï¼š</strong>æ— </p><p>ç¤ºä¾‹ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span><span class="attr">&quot;code&quot;</span><span class="punctuation">:</span><span class="number">200</span><span class="punctuation">,</span><span class="attr">&quot;data&quot;</span><span class="punctuation">:</span><span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span><span class="attr">&quot;message&quot;</span><span class="punctuation">:</span><span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span><span class="attr">&quot;success&quot;</span><span class="punctuation">:</span><span class="literal"><span class="keyword">true</span></span><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>æ¥å£æè¿°ï¼šæš‚æ— </p><h6 id="æµ‹è¯•-2"><a href="#æµ‹è¯•-2" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h6><p>æˆåŠŸåˆ é™¤ã€Šé©¬åŸã€‹</p><p><img src="E:\Files\Projects\CXCollege\software\Image\14.png" alt="14"></p><p><img src="E:\Files\Projects\CXCollege\software\Image\15.png" alt="15"></p><h5 id="4-å¤šç§æ¨¡ç³ŠæŸ¥è¯¢"><a href="#4-å¤šç§æ¨¡ç³ŠæŸ¥è¯¢" class="headerlink" title="4.å¤šç§æ¨¡ç³ŠæŸ¥è¯¢"></a>4.å¤šç§æ¨¡ç³ŠæŸ¥è¯¢</h5><ul><li><h5 id="BookQueryDTO-java"><a href="#BookQueryDTO-java" class="headerlink" title="BookQueryDTO.java"></a>BookQueryDTO.java</h5></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> String isbn;</span><br><span class="line"><span class="keyword">private</span> String author;</span><br><span class="line"><span class="keyword">private</span> String publisher;</span><br><span class="line"><span class="keyword">private</span> String category;</span><br><span class="line"><span class="keyword">private</span> String status;</span><br></pre></td></tr></table></figure><ul><li><h5 id="å®Œå–„Implå®ç°-3"><a href="#å®Œå–„Implå®ç°-3" class="headerlink" title="å®Œå–„Implå®ç°"></a>å®Œå–„Implå®ç°</h5></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">queryDTO.setName(FormatUtils.makeFuzzySearchTerm(queryDTO.getName()));</span><br><span class="line">queryDTO.setIsbn(FormatUtils.makeFuzzySearchTerm(queryDTO.getIsbn()));</span><br><span class="line">queryDTO.setAuthor(FormatUtils.makeFuzzySearchTerm(queryDTO.getAuthor()));</span><br><span class="line">queryDTO.setPublisher(FormatUtils.makeFuzzySearchTerm(queryDTO.getPublisher()));</span><br><span class="line">queryDTO.setCategory(FormatUtils.makeFuzzySearchTerm(queryDTO.getCategory()));</span><br><span class="line">queryDTO.setStatus(FormatUtils.makeFuzzySearchTerm(queryDTO.getStatus()));</span><br></pre></td></tr></table></figure><ul><li><h5 id="æ·»åŠ BookMapper-xml-1"><a href="#æ·»åŠ BookMapper-xml-1" class="headerlink" title="æ·»åŠ BookMapper.xml"></a>æ·»åŠ BookMapper.xml</h5></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;select id=&quot;list&quot; resultMap=&quot;BaseResultMap&quot;&gt;</span><br><span class="line">    select</span><br><span class="line">    &lt;include refid=&quot;Base_Column_List&quot;/&gt;</span><br><span class="line">    from book</span><br><span class="line">    &lt;where&gt;</span><br><span class="line">      &lt;if test=&quot;queryDTO.name != null&quot;&gt;</span><br><span class="line">        name like #&#123;queryDTO.name&#125;</span><br><span class="line">      &lt;/if&gt;</span><br><span class="line">      &lt;if test=&quot;queryDTO.isbn != null&quot;&gt;</span><br><span class="line">        isbn like #&#123;queryDTO.isbn&#125;</span><br><span class="line">      &lt;/if&gt;</span><br><span class="line">      &lt;if test=&quot;queryDTO.author != null&quot;&gt;</span><br><span class="line">        author like #&#123;queryDTO.author&#125;</span><br><span class="line">      &lt;/if&gt;</span><br><span class="line">      &lt;if test=&quot;queryDTO.publisher != null&quot;&gt;</span><br><span class="line">        publisher like #&#123;queryDTO.publisher&#125;</span><br><span class="line">      &lt;/if&gt;</span><br><span class="line">      &lt;if test=&quot;queryDTO.category != null&quot;&gt;</span><br><span class="line">        category like #&#123;queryDTO.category&#125;</span><br><span class="line">      &lt;/if&gt;</span><br><span class="line">      &lt;if test=&quot;queryDTO.status != null&quot;&gt;</span><br><span class="line">        status like #&#123;queryDTO.status&#125;</span><br><span class="line">      &lt;/if&gt;</span><br><span class="line">    &lt;/where&gt;</span><br><span class="line">    limit #&#123;offset&#125;, #&#123;limit&#125;</span><br><span class="line">  &lt;/select&gt;</span><br></pre></td></tr></table></figure><h4 id="å‰ç«¯-1"><a href="#å‰ç«¯-1" class="headerlink" title="å‰ç«¯"></a>å‰ç«¯</h4><p>ä¿®æ”¹ src\pages\base\book\InputDialog\index.tsx æ–‡ä»¶</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">ModalForm</span>, <span class="title class_">ProForm</span>, <span class="title class_">ProFormInstance</span>, <span class="title class_">ProFormText</span>, <span class="title class_">ProFormDatePicker</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@ant-design/pro-components&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; message &#125; <span class="keyword">from</span> <span class="string">&#x27;antd&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; useEffect, useRef &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; waitTime &#125; <span class="keyword">from</span> <span class="string">&#x27;@/utils/request&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; addBook, updateBook &#125; <span class="keyword">from</span> <span class="string">&#x27;@/services/api/book&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> moment <span class="keyword">from</span> <span class="string">&#x27;dayjs&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">InputDialogProps</span> &#123;</span><br><span class="line">  detailData?: <span class="variable constant_">API</span>.<span class="property">BookDTO</span>;</span><br><span class="line">  <span class="attr">visible</span>: <span class="built_in">boolean</span>;</span><br><span class="line">  <span class="attr">onClose</span>: <span class="function">(<span class="params">result: <span class="built_in">boolean</span></span>) =&gt;</span> <span class="built_in">void</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">InputDialog</span>(<span class="params">props: InputDialogProps</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> form = useRef&lt;<span class="title class_">ProFormInstance</span>&gt;(<span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">  <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">waitTime</span>().<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (props.<span class="property">detailData</span>) &#123;</span><br><span class="line">        form?.<span class="property">current</span>?.<span class="title function_">setFieldsValue</span>(props.<span class="property">detailData</span>);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        form?.<span class="property">current</span>?.<span class="title function_">resetFields</span>();</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;, [props.<span class="property">detailData</span>, props.<span class="property">visible</span>]);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">onFinish</span> = <span class="keyword">async</span> (<span class="params">values: <span class="built_in">any</span></span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; bookName, isbn, bookAuthor, bookPublish, bookPrice, bookType, bookBoutime, bookPubtime &#125; = values;</span><br><span class="line">    <span class="keyword">const</span> <span class="attr">data</span>: <span class="variable constant_">API</span>.<span class="property">BookDTO</span> = &#123;</span><br><span class="line">      <span class="attr">bookId</span>: props.<span class="property">detailData</span>?.<span class="property">bookId</span>,</span><br><span class="line">      bookName,</span><br><span class="line">      isbn,</span><br><span class="line">      bookAuthor,</span><br><span class="line">      bookPublish,</span><br><span class="line">      bookPrice,</span><br><span class="line">      bookType,</span><br><span class="line">      bookBoutime,</span><br><span class="line">      bookPubtime,</span><br><span class="line"></span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">if</span> (props.<span class="property">detailData</span>) &#123;</span><br><span class="line">      <span class="keyword">await</span> <span class="title function_">updateBook</span>(data);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">await</span> <span class="title function_">addBook</span>(data);</span><br><span class="line">    &#125;</span><br><span class="line">    message.<span class="title function_">success</span>(<span class="string">&#x27;ä¿å­˜æˆåŠŸ&#x27;</span>);</span><br><span class="line">    props.<span class="title function_">onClose</span>(<span class="literal">true</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="comment">//è¿”å›ä¸€ä¸ªæ¨¡æ€å¯¹è¯æ¡†</span></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">ModalForm</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">width</span>=<span class="string">&#123;600&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">onFinish</span>=<span class="string">&#123;onFinish&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">formRef</span>=<span class="string">&#123;form&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">modalProps</span>=<span class="string">&#123;&#123;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">destroyOnClose:</span> <span class="attr">true</span>,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">onCancel:</span> () =&gt;</span> props.onClose(false),</span></span><br><span class="line"><span class="language-xml">      &#125;&#125;</span></span><br><span class="line"><span class="language-xml">      title=&#123;props.detailData ? &#x27;ä¿®æ”¹ä¹¦ç±&#x27; : &#x27;æ–°å¢ä¹¦ç±&#x27;&#125;</span></span><br><span class="line"><span class="language-xml">      open=&#123;props.visible&#125;</span></span><br><span class="line"><span class="language-xml">    &gt;</span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">ProForm.Group</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">ProFormText</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">name</span>=<span class="string">&quot;bookName&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">label</span>=<span class="string">&quot;ä¹¦ç±åç§°&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">rules</span>=<span class="string">&#123;[</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            &#123;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">              <span class="attr">required:</span> <span class="attr">true</span>,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">              <span class="attr">message:</span> &#x27;<span class="attr">è¯·è¾“å…¥ä¹¦ç±åç§°</span>ï¼&#x27;,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            &#125;,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          ]&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        /&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">ProFormText</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">name</span>=<span class="string">&quot;isbn&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">label</span>=<span class="string">&quot;ISBN&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">rules</span>=<span class="string">&#123;[</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            &#123;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">              <span class="attr">required:</span> <span class="attr">true</span>,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">              <span class="attr">message:</span> &#x27;<span class="attr">è¯·è¾“å…¥ISBNå·</span>ï¼&#x27;,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            &#125;,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          ]&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">ProForm.Group</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">ProForm.Group</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">ProFormText</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">name</span>=<span class="string">&quot;bookPublish&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">label</span>=<span class="string">&quot;å‡ºç‰ˆç¤¾&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">rules</span>=<span class="string">&#123;[</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            &#123;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">              <span class="attr">required:</span> <span class="attr">true</span>,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">              <span class="attr">message:</span> &#x27;<span class="attr">è¯·è¾“å…¥å‡ºç‰ˆç¤¾åç§°</span>ï¼&#x27;,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            &#125;,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          ]&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        /&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">ProFormText</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">name</span>=<span class="string">&quot;bookAuthor&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">label</span>=<span class="string">&quot;ä½œè€…&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">rules</span>=<span class="string">&#123;[</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            &#123;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">              <span class="attr">required:</span> <span class="attr">true</span>,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">              <span class="attr">message:</span> &#x27;<span class="attr">è¯·è¾“å…¥ä½œè€…åç§°</span>ï¼&#x27;,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            &#125;,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          ]&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">ProForm.Group</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">ProForm.Group</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">ProFormText</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">name</span>=<span class="string">&quot;bookPrice&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">label</span>=<span class="string">&quot;ä¹¦ç±ä»·æ ¼&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        /&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">ProFormText</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">name</span>=<span class="string">&quot;bookType&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">label</span>=<span class="string">&quot;åˆ†ç±»å·&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">ProForm.Group</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">ProForm.Group</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">ProFormDatePicker</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">name</span>=<span class="string">&quot;bookBoutime&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">label</span>=<span class="string">&quot;è´­ä¹°æ—¶é—´&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">width</span>=<span class="string">&#123;200&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">initialValue</span>=<span class="string">&#123;moment(</span>&#x27;<span class="attr">2021-08-09</span>&#x27;)&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        /&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">ProFormDatePicker</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">name</span>=<span class="string">&quot;bookPubtime&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">label</span>=<span class="string">&quot;å‡ºç‰ˆæ—¶é—´&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">width</span>=<span class="string">&#123;200&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">initialValue</span>=<span class="string">&#123;moment(</span>&#x27;<span class="attr">2021-08-09</span>&#x27;)&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">ProForm.Group</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">ModalForm</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åˆ é™¤ search&#x3D;false å®ç°å¤šç§æ¨¡ç³ŠæŸ¥è¯¢</p><h3 id="å€Ÿé˜…æ—¥å¿—"><a href="#å€Ÿé˜…æ—¥å¿—" class="headerlink" title="å€Ÿé˜…æ—¥å¿—"></a>å€Ÿé˜…æ—¥å¿—</h3><h4 id="å€Ÿé˜…æ—¥å¿—è¡¨"><a href="#å€Ÿé˜…æ—¥å¿—è¡¨" class="headerlink" title="å€Ÿé˜…æ—¥å¿—è¡¨"></a>å€Ÿé˜…æ—¥å¿—è¡¨</h4><p>å€Ÿé˜…æ—¥å¿—è¡¨ <em>book_log</em></p><table><thead><tr><th align="center">å­—æ®µåç§°</th><th align="center">æ•°æ®ç±»å‹</th><th align="center">ç´¢å¼•</th><th align="center">æ ·ä¾‹</th><th align="center">è¯´æ˜</th></tr></thead><tbody><tr><td align="center">id</td><td align="center">int(11)</td><td align="center">Primary Key</td><td align="center">1234</td><td align="center">è‡ªå¢idä¸»é”®</td></tr><tr><td align="center">reader_name</td><td align="center">char(255)</td><td align="center"></td><td align="center">å¼ ä¸‰</td><td align="center">å€Ÿé˜…äºº</td></tr><tr><td align="center">book_id</td><td align="center">int(11)</td><td align="center"></td><td align="center">23</td><td align="center">ä¹¦ç±ID</td></tr><tr><td align="center">book_name</td><td align="center">char(255)</td><td align="center"></td><td align="center">ä¿¡å·ä¸ç³»ç»Ÿ</td><td align="center">ä¹¦å</td></tr><tr><td align="center">book_isbn</td><td align="center">char(255)</td><td align="center"></td><td align="center">1234567891234</td><td align="center">ä¹¦ç±ISBNï¼Œå¿…é¡»ä¸º13ä½</td></tr><tr><td align="center">borrowed_time</td><td align="center">date</td><td align="center"></td><td align="center">2023-04-01</td><td align="center">å€Ÿé˜…æ—¶é—´</td></tr><tr><td align="center">return_time</td><td align="center">date</td><td align="center"></td><td align="center">TX001</td><td align="center">è¿˜ä¹¦æ—¶é—´ï¼Œå¯ä»¥ä¸ºNULL</td></tr></tbody></table><h4 id="æ¥å£è®¾è®¡"><a href="#æ¥å£è®¾è®¡" class="headerlink" title="æ¥å£è®¾è®¡"></a>æ¥å£è®¾è®¡</h4><h5 id="1-å±•ç¤ºé¡µé¢"><a href="#1-å±•ç¤ºé¡µé¢" class="headerlink" title="1.å±•ç¤ºé¡µé¢"></a>1.å±•ç¤ºé¡µé¢</h5><p><strong>æ¥å£åœ°å€</strong>ï¼šbookLog&#x2F;listBookLog</p><p><strong>è¯·æ±‚æ–¹æ³•</strong>: POST</p><p><strong>å…¥å‚</strong></p><table><thead><tr><th align="left">å‚æ•°å</th><th align="left">å‚æ•°æè¿°</th><th align="left">æ•°æ®ç±»å‹</th><th align="left">å¿…å¡«</th><th align="left">ç¤ºä¾‹&#x2F;å¤‡æ³¨</th></tr></thead><tbody><tr><td align="left">current</td><td align="left">å½“å‰é¡µé¢</td><td align="left">Integer</td><td align="left">M</td><td align="left">1</td></tr><tr><td align="left">pageSize</td><td align="left">é¡µé¢å¤§å°</td><td align="left">Integer</td><td align="left">M</td><td align="left">1</td></tr></tbody></table><p><strong>å‡ºå‚ï¼š</strong></p><table><thead><tr><th>å‚æ•°å</th><th>å‚æ•°æè¿°</th><th>æ•°æ®ç±»å‹</th><th>å¿…å¡«</th><th>ç¤ºä¾‹&#x2F;å¤‡æ³¨</th></tr></thead><tbody><tr><td>data</td><td>è¿”å›æ•°æ®</td><td>List  of Object</td><td>M</td><td></td></tr><tr><td>â”œâ”€  current</td><td>å½“å‰é¡µé¢</td><td>Integer</td><td>M</td><td>è¿‡æ»¤æ¡ä»¶</td></tr><tr><td>â”œâ”€  list</td><td>è¿”å›åˆ—è¡¨</td><td>List  of Object</td><td>O</td><td></td></tr><tr><td>â”œâ”€â”€  bookId</td><td>ä¹¦ç±id</td><td>Integer</td><td>O</td><td></td></tr><tr><td>â”œâ”€â”€ bookIsbn</td><td>ä¹¦ç±isbn</td><td>String</td><td>O</td><td></td></tr><tr><td>â”œâ”€â”€ bookName</td><td>ä¹¦å</td><td>String</td><td>O</td><td></td></tr><tr><td>â”œâ”€â”€ borrowedTime</td><td>å€Ÿé˜…æ—¶é—´</td><td>date</td><td>O</td><td></td></tr><tr><td>â”œâ”€â”€ id</td><td>id</td><td>Integer</td><td>O</td><td>ä¸»é”®</td></tr><tr><td>â”œâ”€â”€ readerName</td><td>å€Ÿé˜…äººå§“å</td><td>String</td><td>O</td><td></td></tr><tr><td>â”œâ”€â”€ returnTime</td><td>å½’è¿˜æ—¶é—´</td><td>date</td><td>O</td><td></td></tr><tr><td>â”œâ”€  pageSize</td><td>é¡µé¢å¤§å°</td><td>Integer</td><td>M</td><td>è¿‡æ»¤æ¡ä»¶</td></tr><tr><td>â”œâ”€  total</td><td>æ€»å‘½ä¸­æ•°</td><td>Integer</td><td>M</td><td></td></tr></tbody></table><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;code&quot;</span><span class="punctuation">:</span> <span class="number">200</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;data&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;current&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;pageSize&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;total&quot;</span><span class="punctuation">:</span> <span class="number">5</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;list&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;string&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;isbn&quot;</span><span class="punctuation">:</span> <span class="string">&quot;1234314234323&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;author&quot;</span><span class="punctuation">:</span> <span class="string">&quot;string&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;publisher&quot;</span><span class="punctuation">:</span> <span class="string">&quot;string&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;price&quot;</span><span class="punctuation">:</span> <span class="number">321</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;category&quot;</span><span class="punctuation">:</span> <span class="string">&quot;string&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;boughtTime&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2023-04-01&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;publishedTime&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2023-04-01&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;status&quot;</span><span class="punctuation">:</span> <span class="string">&quot;å€Ÿå‡º&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;classification&quot;</span><span class="punctuation">:</span> <span class="string">&quot;æ¼«ç”»&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;message&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;success&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p><strong>æ¥å£æè¿°ï¼š</strong></p><p> æŸ¥è¯¢MySQLä¸­book_logè¡¨æ•°æ®ã€‚</p><h4 id="1-å®ç°åŸºç¡€åŠŸèƒ½ï¼Œåˆ†é¡µï¼Œæ›´æ–°ï¼Œåˆ é™¤ã€å¢åŠ "><a href="#1-å®ç°åŸºç¡€åŠŸèƒ½ï¼Œåˆ†é¡µï¼Œæ›´æ–°ï¼Œåˆ é™¤ã€å¢åŠ " class="headerlink" title="1.å®ç°åŸºç¡€åŠŸèƒ½ï¼Œåˆ†é¡µï¼Œæ›´æ–°ï¼Œåˆ é™¤ã€å¢åŠ "></a>1.å®ç°åŸºç¡€åŠŸèƒ½ï¼Œåˆ†é¡µï¼Œæ›´æ–°ï¼Œåˆ é™¤ã€å¢åŠ </h4><h5 id="åç«¯-2"><a href="#åç«¯-2" class="headerlink" title="åç«¯"></a>åç«¯</h5><p>BookLogServiceImpl.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> redlib.backend.service.impl;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.BeanUtils;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"><span class="keyword">import</span> org.springframework.util.Assert;</span><br><span class="line"><span class="keyword">import</span> redlib.backend.dao.BookLogMapper;</span><br><span class="line"><span class="keyword">import</span> redlib.backend.dao.BookMapper;</span><br><span class="line"><span class="keyword">import</span> redlib.backend.dto.BookDTO;</span><br><span class="line"><span class="keyword">import</span> redlib.backend.dto.BookLogDTO;</span><br><span class="line"><span class="keyword">import</span> redlib.backend.dto.query.BookLogQueryDTO;</span><br><span class="line"><span class="keyword">import</span> redlib.backend.dto.query.BookQueryDTO;</span><br><span class="line"><span class="keyword">import</span> redlib.backend.model.Book;</span><br><span class="line"><span class="keyword">import</span> redlib.backend.model.BookLog;</span><br><span class="line"><span class="keyword">import</span> redlib.backend.model.Page;</span><br><span class="line"><span class="keyword">import</span> redlib.backend.service.AdminService;</span><br><span class="line"><span class="keyword">import</span> redlib.backend.service.BookLogService;</span><br><span class="line"><span class="keyword">import</span> redlib.backend.service.utils.BookLogUtils;</span><br><span class="line"><span class="keyword">import</span> redlib.backend.service.utils.BookUtils;</span><br><span class="line"><span class="keyword">import</span> redlib.backend.utils.FormatUtils;</span><br><span class="line"><span class="keyword">import</span> redlib.backend.utils.PageUtils;</span><br><span class="line"><span class="keyword">import</span> redlib.backend.vo.BookLogVO;</span><br><span class="line"><span class="keyword">import</span> redlib.backend.vo.BookVO;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookLogServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">BookLogService</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> BookLogMapper bookLogMapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> AdminService adminService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Integer <span class="title function_">addBookLog</span><span class="params">(BookLogDTO bookLogDTO)</span>&#123;</span><br><span class="line">        <span class="comment">// æ ¡éªŒè¾“å…¥æ•°æ®æ­£ç¡®æ€§</span></span><br><span class="line">        BookLogUtils.validateBookLog(bookLogDTO);</span><br><span class="line">        <span class="comment">// åˆ›å»ºå®ä½“å¯¹è±¡ï¼Œç”¨ä»¥ä¿å­˜åˆ°æ•°æ®åº“</span></span><br><span class="line">        <span class="type">BookLog</span> <span class="variable">bookLog</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BookLog</span>();</span><br><span class="line">        <span class="comment">// å°†è¾“å…¥çš„å­—æ®µå…¨éƒ¨å¤åˆ¶åˆ°å®ä½“å¯¹è±¡ä¸­</span></span><br><span class="line">        BeanUtils.copyProperties(bookLogDTO, bookLog);</span><br><span class="line">        <span class="comment">// è°ƒç”¨DAOæ–¹æ³•ä¿å­˜åˆ°æ•°æ®åº“è¡¨</span></span><br><span class="line">        bookLogMapper.insert(bookLog);</span><br><span class="line">        <span class="keyword">return</span> bookLog.getId();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Integer <span class="title function_">updateBookLog</span><span class="params">(BookLogDTO bookLogDTO)</span> &#123;</span><br><span class="line">        <span class="comment">// æ ¡éªŒè¾“å…¥æ•°æ®æ­£ç¡®æ€§</span></span><br><span class="line">        BookLogUtils.validateBookLog(bookLogDTO);</span><br><span class="line">        Assert.notNull(bookLogDTO.getBookId(), <span class="string">&quot;ä¹¦ç±idä¸èƒ½ä¸ºç©º&quot;</span>);</span><br><span class="line">        <span class="type">BookLog</span> <span class="variable">bookLog</span> <span class="operator">=</span> bookLogMapper.selectByPrimaryKey(bookLogDTO.getBookId());</span><br><span class="line">        Assert.notNull(bookLog, <span class="string">&quot;æ²¡æœ‰æ‰¾åˆ°ä¹¦ç±ï¼ŒIdä¸ºï¼š&quot;</span> + bookLogDTO.getBookId());</span><br><span class="line"></span><br><span class="line">        BeanUtils.copyProperties(bookLogDTO, bookLog);</span><br><span class="line">        bookLogMapper.updateByPrimaryKey(bookLog);</span><br><span class="line">        <span class="keyword">return</span> bookLog.getId();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Page&lt;BookLogVO&gt; <span class="title function_">listByPage</span><span class="params">(BookLogQueryDTO queryDTO)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (queryDTO == <span class="literal">null</span>) &#123;</span><br><span class="line">            queryDTO = <span class="keyword">new</span> <span class="title class_">BookLogQueryDTO</span>();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//æ¨¡ç³ŠæŸ¥è¯¢</span></span><br><span class="line">        queryDTO.setBookName(FormatUtils.makeFuzzySearchTerm(queryDTO.getBookName()));</span><br><span class="line">        queryDTO.setOrderBy(FormatUtils.formatOrderBy(queryDTO.getOrderBy()));</span><br><span class="line">        <span class="comment">//å°†æŸ¥è¯¢æ¡ä»¶å‘é€ç»™daoæ¥å£ï¼Œå…ˆæŸ¥è¯¢å‘½ä¸­ä¸ªæ•°</span></span><br><span class="line">        <span class="type">Integer</span> <span class="variable">size</span> <span class="operator">=</span> bookLogMapper.count(queryDTO);</span><br><span class="line">        <span class="type">PageUtils</span> <span class="variable">pageUtils</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">PageUtils</span>(queryDTO.getCurrent(), queryDTO.getPageSize(), size);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (size == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="comment">// æ²¡æœ‰å‘½ä¸­ï¼Œåˆ™è¿”å›ç©ºæ•°æ®ã€‚</span></span><br><span class="line">            <span class="keyword">return</span> pageUtils.getNullPage();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        List&lt;BookLog&gt; list = bookLogMapper.list(queryDTO, pageUtils.getOffset(), pageUtils.getLimit());</span><br><span class="line"></span><br><span class="line">        List&lt;BookLogVO&gt; voList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (BookLog bookLog : list) &#123;</span><br><span class="line">            <span class="type">BookLogVO</span> <span class="variable">vo</span> <span class="operator">=</span> BookLogUtils.convertToVO(bookLog);</span><br><span class="line">            voList.add(vo);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Page</span>&lt;&gt;(pageUtils.getCurrent(), pageUtils.getPageSize(), pageUtils.getTotal(), voList);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">deleteByCodes</span><span class="params">(List&lt;Integer&gt; ids)</span> &#123;</span><br><span class="line">        Assert.notEmpty(ids, <span class="string">&quot;ä¹¦ç±idåˆ—è¡¨ä¸èƒ½ä¸ºç©º&quot;</span>);</span><br><span class="line">        bookLogMapper.deleteByCodes(ids);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>BookLogService.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> redlib.backend.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> redlib.backend.dto.BookLogDTO;</span><br><span class="line"><span class="keyword">import</span> redlib.backend.dto.query.BookLogQueryDTO;</span><br><span class="line"><span class="keyword">import</span> redlib.backend.model.Page;</span><br><span class="line"><span class="keyword">import</span> redlib.backend.vo.BookLogVO;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">BookLogService</span> &#123;</span><br><span class="line">    Integer <span class="title function_">addBookLog</span><span class="params">(BookLogDTO bookLogDTO)</span>;</span><br><span class="line"></span><br><span class="line">    Page&lt;BookLogVO&gt; <span class="title function_">listByPage</span><span class="params">(BookLogQueryDTO queryDTO)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ›´æ–°éƒ¨é—¨æ•°æ®</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> bookLogDTO éƒ¨é—¨è¾“å…¥å¯¹è±¡</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> éƒ¨é—¨ç¼–ç </span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    Integer <span class="title function_">updateBookLog</span><span class="params">(BookLogDTO bookLogDTO)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ®ç¼–ç åˆ—è¡¨ï¼Œæ‰¹é‡åˆ é™¤ä¹¦ç±</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> ids ç¼–ç åˆ—è¡¨</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">deleteByCodes</span><span class="params">(List&lt;Integer&gt; ids)</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>BookLogMapper.xmlæ·»åŠ </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;!-- è·å–åå­—ä¸ªæ•°(åˆ†é¡µ) --&gt;</span><br><span class="line">&lt;select id=&quot;count&quot; resultType=&quot;integer&quot;&gt;</span><br><span class="line">  select count(*)</span><br><span class="line">  from book_log</span><br><span class="line">  &lt;where&gt;</span><br><span class="line">    &lt;if test=&quot;bookName != null&quot;&gt;</span><br><span class="line">      book_name like #&#123;bookName&#125;</span><br><span class="line">    &lt;/if&gt;</span><br><span class="line">  &lt;/where&gt;</span><br><span class="line">&lt;/select&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- è·å–ä¹¦ç±(åˆ†é¡µ) --&gt;</span><br><span class="line">&lt;select id=&quot;list&quot; resultMap=&quot;BaseResultMap&quot;&gt;</span><br><span class="line">  select</span><br><span class="line">  &lt;include refid=&quot;Base_Column_List&quot;/&gt;</span><br><span class="line">  from book_log</span><br><span class="line">  &lt;where&gt;</span><br><span class="line">    &lt;if test=&quot;queryDTO.readerName != null&quot;&gt;</span><br><span class="line">      and reader_name like #&#123;queryDTO.readerName&#125;</span><br><span class="line">    &lt;/if&gt;</span><br><span class="line">    &lt;if test=&quot;queryDTO.bookIsbn != null&quot;&gt;</span><br><span class="line">      and book_isbn like #&#123;queryDTO.bookIsbn&#125;</span><br><span class="line">    &lt;/if&gt;</span><br><span class="line">    &lt;if test=&quot;queryDTO.bookId != null&quot;&gt;</span><br><span class="line">      and book_id like #&#123;queryDTO.bookId&#125;</span><br><span class="line">    &lt;/if&gt;</span><br><span class="line">    &lt;if test=&quot;queryDTO.bookName != null&quot;&gt;</span><br><span class="line">      and book_name like #&#123;queryDTO.bookName&#125;</span><br><span class="line">    &lt;/if&gt;</span><br><span class="line">  &lt;/where&gt;</span><br><span class="line">  &lt;if test=&quot;queryDTO.orderBy != null&quot;&gt;</span><br><span class="line">    order by $&#123;queryDTO.orderBy&#125;</span><br><span class="line">  &lt;/if&gt;</span><br><span class="line">  &lt;if test=&quot;queryDTO.orderBy == null&quot;&gt;</span><br><span class="line">    order by id desc</span><br><span class="line">  &lt;/if&gt;</span><br><span class="line">  limit #&#123;offset&#125;, #&#123;limit&#125;</span><br><span class="line">&lt;/select&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- æ‰¹é‡åˆ é™¤ --&gt;</span><br><span class="line">&lt;update id=&quot;deleteByCodes&quot;&gt;</span><br><span class="line">  delete from book_log</span><br><span class="line">  where id in</span><br><span class="line">  &lt;foreach item=&quot;item&quot; index=&quot;index&quot; collection=&quot;codeList&quot; open=&quot;(&quot; separator=&quot;,&quot; close=&quot;)&quot;&gt;</span><br><span class="line">    #&#123;item&#125;</span><br><span class="line">  &lt;/foreach&gt;</span><br><span class="line">&lt;/update&gt;</span><br></pre></td></tr></table></figure><p>BookLogMapper.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> redlib.backend.dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Param;</span><br><span class="line"><span class="keyword">import</span> redlib.backend.dto.query.BookLogQueryDTO;</span><br><span class="line"><span class="keyword">import</span> redlib.backend.model.BookLog;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">BookLogMapper</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="title function_">deleteByPrimaryKey</span><span class="params">(Integer id)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> <span class="title function_">insert</span><span class="params">(BookLog record)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> <span class="title function_">insertSelective</span><span class="params">(BookLog record)</span>;</span><br><span class="line"></span><br><span class="line">    BookLog <span class="title function_">selectByPrimaryKey</span><span class="params">(Integer id)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> <span class="title function_">updateByPrimaryKeySelective</span><span class="params">(BookLog record)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> <span class="title function_">updateByPrimaryKey</span><span class="params">(BookLog record)</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    List&lt;BookLog&gt; <span class="title function_">list</span><span class="params">(<span class="meta">@Param(&quot;queryDTO&quot;)</span> BookLogQueryDTO queryDTO,</span></span><br><span class="line"><span class="params">                       <span class="meta">@Param(&quot;offset&quot;)</span> Integer offset,</span></span><br><span class="line"><span class="params">                       <span class="meta">@Param(&quot;limit&quot;)</span> Integer limit)</span>;</span><br><span class="line"></span><br><span class="line">    Integer <span class="title function_">count</span><span class="params">(BookLogQueryDTO queryDTO)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ®ä»£ç åˆ—è¡¨æ‰¹é‡åˆ é™¤ä¹¦ç±</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> codeList idåˆ—è¡¨</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">deleteByCodes</span><span class="params">(<span class="meta">@Param(&quot;codeList&quot;)</span> List&lt;Integer&gt; codeList)</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>BookLogController.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> redlib.backend.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.PostMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestBody;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"><span class="keyword">import</span> redlib.backend.annotation.BackendModule;</span><br><span class="line"><span class="keyword">import</span> redlib.backend.annotation.NeedNoPrivilege;</span><br><span class="line"><span class="keyword">import</span> redlib.backend.annotation.Privilege;</span><br><span class="line"><span class="keyword">import</span> redlib.backend.dto.BookDTO;</span><br><span class="line"><span class="keyword">import</span> redlib.backend.dto.BookLogDTO;</span><br><span class="line"><span class="keyword">import</span> redlib.backend.dto.query.BookLogQueryDTO;</span><br><span class="line"><span class="keyword">import</span> redlib.backend.dto.query.BookQueryDTO;</span><br><span class="line"><span class="keyword">import</span> redlib.backend.model.Page;</span><br><span class="line"><span class="keyword">import</span> redlib.backend.service.BookLogService;</span><br><span class="line"><span class="keyword">import</span> redlib.backend.service.BookService;</span><br><span class="line"><span class="keyword">import</span> redlib.backend.vo.BookLogVO;</span><br><span class="line"><span class="keyword">import</span> redlib.backend.vo.BookVO;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/api/bookLog&quot;)</span></span><br><span class="line"><span class="meta">@BackendModule(&#123;&quot;page:é¡µé¢&quot;&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookLogController</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> BookLogService bookLogService;</span><br><span class="line">    <span class="meta">@PostMapping(&quot;addBookLog&quot;)</span></span><br><span class="line">    <span class="meta">@NeedNoPrivilege</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addBookLog</span><span class="params">(<span class="meta">@RequestBody</span> BookLogDTO bookLogDTO)</span>&#123;</span><br><span class="line">        bookLogService.addBookLog(bookLogDTO);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostMapping(&quot;listBookLog&quot;)</span></span><br><span class="line"><span class="comment">//    @Privilege(&quot;page&quot;)</span></span><br><span class="line">    <span class="meta">@NeedNoPrivilege</span></span><br><span class="line">    <span class="keyword">public</span> Page&lt;BookLogVO&gt; <span class="title function_">listBookLog</span><span class="params">(<span class="meta">@RequestBody</span> BookLogQueryDTO queryDTO)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> bookLogService.listByPage(queryDTO);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostMapping(&quot;updateBookLog&quot;)</span></span><br><span class="line">    <span class="meta">@Privilege(&quot;update&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Integer <span class="title function_">updateBookLog</span><span class="params">(<span class="meta">@RequestBody</span> BookLogDTO bookLogDTO)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> bookLogService.updateBookLog(bookLogDTO);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostMapping(&quot;deleteBookLog&quot;)</span></span><br><span class="line">    <span class="meta">@Privilege(&quot;delete&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">deleteBookLog</span><span class="params">(<span class="meta">@RequestBody</span> List&lt;Integer&gt; ids)</span> &#123;</span><br><span class="line">        bookLogService.deleteByCodes(ids);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>BookLogQueryDTO.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> redlib.backend.dto.query;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> bsgbs</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookLogQueryDTO</span> <span class="keyword">extends</span> <span class="title class_">PageQueryDTO</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Integer readerId;</span><br><span class="line">    <span class="keyword">private</span> String readerName;</span><br><span class="line">    <span class="keyword">private</span> Integer bookId;</span><br><span class="line">    <span class="keyword">private</span> String bookIsbn;</span><br><span class="line">    <span class="keyword">private</span> String bookName;</span><br><span class="line">    <span class="keyword">private</span> String orderBy;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>BookLogDTO.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> redlib.backend.dto;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.fasterxml.jackson.annotation.JsonFormat;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookLogDTO</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String readerName;</span><br><span class="line">    <span class="keyword">private</span> Integer bookId;</span><br><span class="line">    <span class="keyword">private</span> String bookName;</span><br><span class="line">    <span class="keyword">private</span> String bookIsbn;</span><br><span class="line">    <span class="meta">@JsonFormat(pattern = &quot;yyyy-MM-dd&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Date borrowedTime;</span><br><span class="line">    <span class="meta">@JsonFormat(pattern = &quot;yyyy-MM-dd&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Date returnTime;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>BookLogVO.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> redlib.backend.vo;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> redlib.backend.model.BookLog;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> bsgbs</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookLogVO</span> <span class="keyword">extends</span> <span class="title class_">BookLog</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="å‰ç«¯-2"><a href="#å‰ç«¯-2" class="headerlink" title="å‰ç«¯"></a>å‰ç«¯</h5><h6 id="indexä¸»é¡µé¢"><a href="#indexä¸»é¡µé¢" class="headerlink" title="indexä¸»é¡µé¢"></a>indexä¸»é¡µé¢</h6><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;  deleteBookLog,listBookLog &#125; <span class="keyword">from</span> <span class="string">&#x27;@/services/api/bookLog&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; convertPageData,orderBy &#125; <span class="keyword">from</span> <span class="string">&#x27;@/utils/request&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; openConfirm &#125; <span class="keyword">from</span> <span class="string">&#x27;@/utils/ui&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">PlusOutlined</span>, <span class="title class_">DeleteOutlined</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@ant-design/icons&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">ActionType</span>, <span class="title class_">PageContainer</span>, <span class="title class_">ProColumns</span>, <span class="title class_">ProTable</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@ant-design/pro-components&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Button</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;antd&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; useRef, useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">InputDialog</span> <span class="keyword">from</span> <span class="string">&#x27;./InputDialog&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> () =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> refAction = useRef&lt;<span class="title class_">ActionType</span>&gt;(<span class="literal">null</span>);</span><br><span class="line">  <span class="comment">//å£°æ˜ä¸¤ä¸ªå¸¸é‡ï¼Œå˜é‡åä¸ºselectedRowKeysï¼Œæ”¹å˜å˜é‡å€¼çš„æ–¹æ³•ä¸ºselectRow</span></span><br><span class="line">  <span class="keyword">const</span> [selectedRowKeys, selectRow] = useState&lt;<span class="built_in">number</span>[]&gt;([]);</span><br><span class="line">  <span class="comment">//å£°æ˜é¡µé¢çº§çŠ¶æ€å˜é‡ï¼Œå°†å˜é‡ä¼ é€’ç»™å¯¹è¯æ¡†ï¼Œ&lt;&gt;å†…è¡¨ç¤ºæ˜¯ä»€ä¹ˆç±»å‹çš„æ•°æ®ï¼Œ()ä¸ºç©ºè¡¨ç¤ºä¸å¯¹å…¶åˆå§‹åŒ–</span></span><br><span class="line">  <span class="keyword">const</span> [book, setBook] = useState&lt;<span class="variable constant_">API</span>.<span class="property">BookLogVO</span>&gt;();</span><br><span class="line">  <span class="keyword">const</span> [visible, setVisible] = <span class="title function_">useState</span>(<span class="literal">false</span>);</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">const</span> <span class="attr">columns</span>: <span class="title class_">ProColumns</span>&lt;<span class="variable constant_">API</span>.<span class="property">BookLogVO</span>&gt;[] = [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">title</span>: <span class="string">&#x27;ä¹¦ç±ID&#x27;</span>,</span><br><span class="line">      <span class="attr">dataIndex</span>: <span class="string">&#x27;bookId&#x27;</span>,</span><br><span class="line">      <span class="attr">sorter</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="attr">fixed</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="attr">width</span>: <span class="number">50</span>,</span><br><span class="line">      <span class="attr">search</span>: <span class="literal">false</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">title</span>: <span class="string">&#x27;ä¹¦å&#x27;</span>,</span><br><span class="line">      <span class="attr">dataIndex</span>: <span class="string">&#x27;bookName&#x27;</span>,</span><br><span class="line">      <span class="attr">width</span>: <span class="number">100</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">title</span>: <span class="string">&#x27;å€Ÿé˜…äºº&#x27;</span>,</span><br><span class="line">      <span class="attr">dataIndex</span>: <span class="string">&#x27;readerName&#x27;</span>,</span><br><span class="line">      <span class="attr">fixed</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="attr">width</span>: <span class="number">100</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">title</span>: <span class="string">&#x27;ISBN&#x27;</span>,</span><br><span class="line">      <span class="attr">dataIndex</span>: <span class="string">&#x27;bookIsbn&#x27;</span>,</span><br><span class="line">      <span class="attr">width</span>: <span class="number">100</span>,</span><br><span class="line">      <span class="attr">search</span>: <span class="literal">false</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">title</span>: <span class="string">&#x27;å€Ÿé˜…æ—¥æœŸ&#x27;</span>,</span><br><span class="line">      <span class="attr">width</span>: <span class="number">100</span>,</span><br><span class="line">      <span class="attr">sorter</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="attr">dataIndex</span>: <span class="string">&#x27;borrowedTime&#x27;</span>,</span><br><span class="line">      <span class="attr">valueType</span>: <span class="string">&#x27;date&#x27;</span>,</span><br><span class="line">      <span class="attr">search</span>: <span class="literal">false</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">title</span>: <span class="string">&#x27;è¿˜ä¹¦æ—¥æœŸ&#x27;</span>,</span><br><span class="line">      <span class="attr">dataIndex</span>: <span class="string">&#x27;returnTime&#x27;</span>,</span><br><span class="line">      <span class="attr">key</span>: <span class="string">&#x27;returnTime&#x27;</span>,</span><br><span class="line">      <span class="attr">valueType</span>: <span class="string">&#x27;date&#x27;</span>,</span><br><span class="line">      <span class="attr">width</span>: <span class="number">100</span>,</span><br><span class="line">      <span class="attr">search</span>: <span class="literal">false</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  ];</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">PageContainer</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      &lt;ProTable<span class="tag">&lt;<span class="name">API.BookLogVO</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        actionRef=&#123;refAction&#125;</span></span><br><span class="line"><span class="language-xml">        rowKey=&quot;id&quot;</span></span><br><span class="line"><span class="language-xml">        pagination=&#123;&#123;</span></span><br><span class="line"><span class="language-xml">          defaultPageSize: 10,</span></span><br><span class="line"><span class="language-xml">        &#125;&#125;</span></span><br><span class="line"><span class="language-xml">        search=&#123;&#123;</span></span><br><span class="line"><span class="language-xml">          labelWidth: 120,</span></span><br><span class="line"><span class="language-xml">        &#125;&#125;</span></span><br><span class="line"><span class="language-xml">        scroll=&#123;&#123; x: 100 &#125;&#125;</span></span><br><span class="line"><span class="language-xml">        request=&#123;async (params = &#123;&#125;, sort) =&gt; &#123;</span></span><br><span class="line"><span class="language-xml">          console.log(sort);</span></span><br><span class="line"><span class="language-xml">          return convertPageData(await listBookLog(&#123; ...params, orderBy: orderBy(sort) &#125;));</span></span><br><span class="line"><span class="language-xml">        &#125;&#125;</span></span><br><span class="line"><span class="language-xml">        columns=&#123;columns&#125;</span></span><br><span class="line"><span class="language-xml">      /&gt;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">PageContainer</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  );</span></span><br><span class="line"><span class="language-xml">&#125;;</span></span><br></pre></td></tr></table></figure><h6 id="inputdialogé¡µé¢"><a href="#inputdialogé¡µé¢" class="headerlink" title="inputdialogé¡µé¢"></a>inputdialogé¡µé¢</h6><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">ModalForm</span>, <span class="title class_">ProForm</span>, <span class="title class_">ProFormInstance</span>, <span class="title class_">ProFormSelect</span>, <span class="title class_">ProFormText</span>, <span class="title class_">ProFormDatePicker</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@ant-design/pro-components&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; message, <span class="title class_">Switch</span>, <span class="title class_">Tooltip</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;antd&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; useEffect, useRef, useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; waitTime &#125; <span class="keyword">from</span> <span class="string">&#x27;@/utils/request&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; addBook, updateBook &#125; <span class="keyword">from</span> <span class="string">&#x27;@/services/api/book&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> moment <span class="keyword">from</span> <span class="string">&#x27;dayjs&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">InputDialogProps</span> &#123;</span><br><span class="line">  detailData?: <span class="variable constant_">API</span>.<span class="property">BookDTO</span>;</span><br><span class="line">  <span class="attr">visible</span>: <span class="built_in">boolean</span>;</span><br><span class="line">  <span class="attr">onClose</span>: <span class="function">(<span class="params">result: <span class="built_in">boolean</span></span>) =&gt;</span> <span class="built_in">void</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">InputDialog</span>(<span class="params">props: InputDialogProps</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> form = useRef&lt;<span class="title class_">ProFormInstance</span>&gt;(<span class="literal">null</span>);</span><br><span class="line">  <span class="keyword">const</span> [<span class="keyword">readonly</span>, setReadonly] = <span class="title function_">useState</span>(<span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line">  <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">waitTime</span>().<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (props.<span class="property">detailData</span>) &#123;</span><br><span class="line">        form?.<span class="property">current</span>?.<span class="title function_">setFieldsValue</span>(props.<span class="property">detailData</span>);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        form?.<span class="property">current</span>?.<span class="title function_">resetFields</span>();</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;, [props.<span class="property">detailData</span>, props.<span class="property">visible</span>]);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">onFinish</span> = <span class="keyword">async</span> (<span class="params">values: <span class="built_in">any</span></span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; name, isbn, author, publisher, price, category, boughtTime, publishedTime, status &#125; = values;</span><br><span class="line">    <span class="keyword">const</span> <span class="attr">data</span>: <span class="variable constant_">API</span>.<span class="property">BookDTO</span> = &#123;</span><br><span class="line">      <span class="attr">id</span>: props.<span class="property">detailData</span>?.<span class="property">id</span>,</span><br><span class="line">      name,</span><br><span class="line">      isbn,</span><br><span class="line">      author,</span><br><span class="line">      publisher,</span><br><span class="line">      price,</span><br><span class="line">      category,</span><br><span class="line">      boughtTime,</span><br><span class="line">      publishedTime,</span><br><span class="line">      status,</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (props.<span class="property">detailData</span>) &#123;</span><br><span class="line">      <span class="keyword">await</span> <span class="title function_">updateBook</span>(data);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">await</span> <span class="title function_">addBook</span>(data);</span><br><span class="line">    &#125;</span><br><span class="line">    message.<span class="title function_">success</span>(<span class="string">&#x27;ä¿å­˜æˆåŠŸ&#x27;</span>);</span><br><span class="line">    props.<span class="title function_">onClose</span>(<span class="literal">true</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="comment">//è¿”å›ä¸€ä¸ªæ¨¡æ€å¯¹è¯æ¡†</span></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">ModalForm</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">width</span>=<span class="string">&#123;600&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">onFinish</span>=<span class="string">&#123;onFinish&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">formRef</span>=<span class="string">&#123;form&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">modalProps</span>=<span class="string">&#123;&#123;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">destroyOnClose:</span> <span class="attr">true</span>,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">onCancel:</span> () =&gt;</span> props.onClose(false),</span></span><br><span class="line"><span class="language-xml">      &#125;&#125;</span></span><br><span class="line"><span class="language-xml">      title=&#123;props.detailData ? &#x27;ä¿®æ”¹ä¹¦ç±&#x27; : &#x27;æ–°å¢ä¹¦ç±&#x27;&#125;</span></span><br><span class="line"><span class="language-xml">      open=&#123;props.visible&#125;</span></span><br><span class="line"><span class="language-xml">    &gt;</span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">ProForm.Group</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">ProFormText</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">name</span>=<span class="string">&quot;name&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">label</span>=<span class="string">&quot;ä¹¦ç±åç§°&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">rules</span>=<span class="string">&#123;[</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            &#123;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">              <span class="attr">required:</span> <span class="attr">true</span>,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">              <span class="attr">message:</span> &#x27;<span class="attr">è¯·è¾“å…¥ä¹¦ç±åç§°</span>ï¼&#x27;,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            &#125;,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          ]&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        /&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">ProFormText</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">name</span>=<span class="string">&quot;isbn&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">label</span>=<span class="string">&quot;ISBN&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">tooltip</span>=<span class="string">&quot;è¾“å…¥å¿…é¡»ä¸º13ä½&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">rules</span>=<span class="string">&#123;[</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            &#123;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">              <span class="attr">required:</span> <span class="attr">true</span>,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">              <span class="attr">message:</span> &#x27;<span class="attr">è¯·è¾“å…¥ISBNå·</span>ï¼&#x27;,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            &#125;,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            &#123;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">              // <span class="attr">æ­¤å¤„è®¾ä¸ºfalseå¯ä»¥è§£å†³å¡«å†™åé€€æ ¼å¯¼è‡´ä¸¤ç§æŠ¥é”™çš„é—®é¢˜</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">              <span class="attr">required:</span> <span class="attr">false</span>,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">              <span class="attr">message:</span> &#x27;<span class="attr">ISBNæ ¼å¼ä¸ç¬¦åˆè¦æ±‚</span>ï¼&#x27;,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">              <span class="attr">max:</span> <span class="attr">13</span>,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">              <span class="attr">min:</span> <span class="attr">13</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            &#125;,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          ]&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">ProForm.Group</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">ProForm.Group</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">ProFormText</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">name</span>=<span class="string">&quot;publisher&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">label</span>=<span class="string">&quot;å‡ºç‰ˆç¤¾&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">rules</span>=<span class="string">&#123;[</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            &#123;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">              <span class="attr">required:</span> <span class="attr">true</span>,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">              <span class="attr">message:</span> &#x27;<span class="attr">è¯·è¾“å…¥å‡ºç‰ˆç¤¾åç§°</span>ï¼&#x27;,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            &#125;,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          ]&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        /&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">ProFormText</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">name</span>=<span class="string">&quot;author&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">label</span>=<span class="string">&quot;ä½œè€…&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">rules</span>=<span class="string">&#123;[</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            &#123;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">              <span class="attr">required:</span> <span class="attr">true</span>,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">              <span class="attr">message:</span> &#x27;<span class="attr">è¯·è¾“å…¥ä½œè€…åç§°</span>ï¼&#x27;,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            &#125;,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          ]&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">ProForm.Group</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">ProForm.Group</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">ProFormText</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">name</span>=<span class="string">&quot;price&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">label</span>=<span class="string">&quot;ä¹¦ç±ä»·æ ¼&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        /&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">ProFormText</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">name</span>=<span class="string">&quot;category&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">label</span>=<span class="string">&quot;åˆ†ç±»å·&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">ProForm.Group</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">ProForm.Group</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">ProFormDatePicker</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">name</span>=<span class="string">&quot;boughtTime&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">label</span>=<span class="string">&quot;è´­ä¹°æ—¶é—´&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">initialValue</span>=<span class="string">&#123;moment()&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        /&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">ProFormDatePicker</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">name</span>=<span class="string">&quot;publishedTime&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">label</span>=<span class="string">&quot;å‡ºç‰ˆæ—¶é—´&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">initialValue</span>=<span class="string">&#123;moment()&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        /&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">ProFormSelect</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">name</span>=<span class="string">&quot;status&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">label</span>=<span class="string">&quot;çŠ¶æ€&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">options</span>=<span class="string">&#123;[</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            &#123; <span class="attr">label:</span> &#x27;<span class="attr">åœ¨æ¶</span>&#x27;, <span class="attr">value:</span> &#x27;<span class="attr">åœ¨æ¶</span>&#x27; &#125;,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            &#123; <span class="attr">label:</span> &#x27;<span class="attr">å€Ÿå‡º</span>&#x27;, <span class="attr">value:</span> &#x27;<span class="attr">å€Ÿå‡º</span>&#x27; &#125;,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          ]&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">ProForm.Group</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    &lt;/ModalForm &gt;</span></span><br><span class="line"><span class="language-xml">  );</span></span><br><span class="line"><span class="language-xml">&#125;</span></span><br></pre></td></tr></table></figure><h4 id="2-åºå·åŠå€Ÿé˜…æ—¥æœŸæ’åº"><a href="#2-åºå·åŠå€Ÿé˜…æ—¥æœŸæ’åº" class="headerlink" title="2.åºå·åŠå€Ÿé˜…æ—¥æœŸæ’åº"></a>2.åºå·åŠå€Ÿé˜…æ—¥æœŸæ’åº</h4><h5 id="å‰ç«¯-3"><a href="#å‰ç«¯-3" class="headerlink" title="å‰ç«¯"></a>å‰ç«¯</h5><p>returnä¸­æ·»åŠ </p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="title class_">ProTable</span>&lt;<span class="variable constant_">API</span>.<span class="property">BookLogVO</span>&gt;</span><br><span class="line">        actionRef=&#123;refAction&#125;</span><br><span class="line">        rowKey=<span class="string">&quot;id&quot;</span></span><br><span class="line">        pagination=&#123;&#123;</span><br><span class="line">          <span class="attr">defaultPageSize</span>: <span class="number">10</span>,</span><br><span class="line">        &#125;&#125;</span><br><span class="line">        search=&#123;&#123;</span><br><span class="line">          <span class="attr">labelWidth</span>: <span class="number">120</span>,</span><br><span class="line">        &#125;&#125;</span><br><span class="line">        scroll=&#123;&#123; <span class="attr">x</span>: <span class="number">100</span> &#125;&#125;</span><br><span class="line">        request=&#123;<span class="keyword">async</span> (params = &#123;&#125;, sort) =&gt; &#123;</span><br><span class="line">          <span class="variable language_">console</span>.<span class="title function_">log</span>(sort);</span><br><span class="line">          <span class="keyword">return</span> <span class="title function_">convertPageData</span>(<span class="keyword">await</span> <span class="title function_">listBookLog</span>(&#123; ...params, <span class="attr">orderBy</span>: <span class="title function_">orderBy</span>(sort) &#125;));</span><br><span class="line">        &#125;&#125;</span><br><span class="line">        columns=&#123;columns&#125;</span><br><span class="line">      /&gt;</span><br></pre></td></tr></table></figure><h5 id="åç«¯-3"><a href="#åç«¯-3" class="headerlink" title="åç«¯"></a>åç«¯</h5><p>BookLogServiceImpl.javaä¸­æ·»åŠ </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">queryDTO.setOrderBy(FormatUtils.formatOrderBy(queryDTO.getOrderBy()));</span><br></pre></td></tr></table></figure><p>BookLogQueryDTO.javaä¸­æ·»åŠ </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> String orderBy;</span><br></pre></td></tr></table></figure><p>xmlä¸­</where>åæ·»åŠ </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;if test=&quot;queryDTO.orderBy != null&quot;&gt;</span><br><span class="line">      order by $&#123;queryDTO.orderBy&#125;</span><br><span class="line">    &lt;/if&gt;</span><br><span class="line">    &lt;if test=&quot;queryDTO.orderBy == null&quot;&gt;</span><br><span class="line">      order by id desc</span><br><span class="line">    &lt;/if&gt;</span><br></pre></td></tr></table></figure><h5 id="æµ‹è¯•-3"><a href="#æµ‹è¯•-3" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h5><p>ç‚¹å‡»ä¹¦ç±IDæ’åºå¦‚ä¸‹</p><p><img src="E:\Files\Projects\CXCollege\software\Image\19.png" alt="19"></p><p><img src="E:\Files\Projects\CXCollege\software\Image\20.png" alt="20"></p><h3 id="å€Ÿä¹¦"><a href="#å€Ÿä¹¦" class="headerlink" title="å€Ÿä¹¦"></a>å€Ÿä¹¦</h3><h4 id="æ¥å£è®¾è®¡-1"><a href="#æ¥å£è®¾è®¡-1" class="headerlink" title="æ¥å£è®¾è®¡"></a>æ¥å£è®¾è®¡</h4><h5 id="å€Ÿä¹¦-1"><a href="#å€Ÿä¹¦-1" class="headerlink" title="å€Ÿä¹¦"></a>å€Ÿä¹¦</h5><p><strong>æ¥å£åœ°å€</strong>ï¼šbook&#x2F;lendBook</p><p><strong>è¯·æ±‚æ–¹æ³•</strong>: POST</p><p><strong>å…¥å‚</strong></p><table><thead><tr><th>å‚æ•°å</th><th>å‚æ•°æè¿°</th><th>æ•°æ®ç±»å‹</th><th>å¿…å¡«</th><th>ç¤ºä¾‹&#x2F;å¤‡æ³¨</th></tr></thead><tbody><tr><td>bookDTO</td><td>BookDTOæ•°æ®</td><td>List  of Object</td><td>M</td><td></td></tr><tr><td>â”œâ”€ id</td><td>ä¹¦ç±id</td><td>Integer</td><td>M</td><td>ä¸»é”®</td></tr><tr><td>â”œâ”€ name</td><td>ä¹¦å</td><td>List  of Object</td><td>O</td><td></td></tr><tr><td>â”œâ”€ isbn</td><td>ä¹¦ç±isbn</td><td>String</td><td>O</td><td></td></tr><tr><td>â”œâ”€ author</td><td>ä¹¦ç±ä½œè€…</td><td>String</td><td>O</td><td></td></tr><tr><td>â”œâ”€ publisher</td><td>å‡ºç‰ˆç¤¾</td><td>String</td><td>O</td><td></td></tr><tr><td>â”œâ”€ price</td><td>ä¹¦ç±ä»·æ ¼</td><td>Double</td><td>O</td><td></td></tr><tr><td>â”œâ”€ category</td><td>ä¹¦ç±åˆ†ç±»å·</td><td>Integer</td><td>O</td><td></td></tr><tr><td>â”œâ”€ boughtTime</td><td>ä¹¦ç±è´­ä¹°æ—¶é—´</td><td>date</td><td>O</td><td></td></tr><tr><td>â”œâ”€ publishedTime</td><td>ä¹¦ç±å‡ºç‰ˆæ—¶é—´</td><td>date</td><td>O</td><td></td></tr><tr><td>â”œâ”€  status</td><td>ä¹¦ç±çŠ¶æ€</td><td>String</td><td>O</td><td>è¿‡æ»¤æ¡ä»¶</td></tr><tr><td>â”œâ”€  classification</td><td>ä¹¦ç±åˆ†ç±»</td><td>String</td><td>O</td><td></td></tr><tr><td>bookLogDTO</td><td>LogDTOæ•°æ®</td><td>List  of Object</td><td>M</td><td></td></tr><tr><td>â”œâ”€ readerName</td><td>å½“å‰é¡µé¢</td><td>String</td><td>M</td><td></td></tr><tr><td>â”œâ”€ borrowedTime</td><td>è¿”å›åˆ—è¡¨</td><td>date</td><td>O</td><td></td></tr></tbody></table><p><strong>å‡ºå‚ï¼š</strong>æ— </p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span><span class="attr">&quot;code&quot;</span><span class="punctuation">:</span><span class="number">200</span><span class="punctuation">,</span><span class="attr">&quot;data&quot;</span><span class="punctuation">:</span><span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span><span class="attr">&quot;message&quot;</span><span class="punctuation">:</span><span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span><span class="attr">&quot;success&quot;</span><span class="punctuation">:</span><span class="literal"><span class="keyword">true</span></span><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p><strong>æ¥å£æè¿°ï¼š</strong></p><p>1.å‰ç«¯å‘åç«¯å‘é€é€‰ä¸­ä¹¦ç±ä¿¡æ¯å’Œå€Ÿé˜…ä¿¡æ¯ï¼Œåç«¯å°†å€Ÿé˜…æ—¥å¿—æ‰€éœ€çš„ä¿¡æ¯ä»ä¹¦ç±ä¿¡æ¯ä¸­å¤åˆ¶è¿›æ¥ã€‚</p><p>2.åç«¯æ ¹æ®ä¹¦ç±idæ£€ç´¢ï¼Œè‡ªåŠ¨æ›´æ–°ä¹¦ç±çŠ¶æ€ä¸ºâ€œå€Ÿå‡ºâ€ï¼Œå¹¶ä¸”å¢åŠ ä¸€æ¡å€Ÿé˜…æ—¥å¿—ã€‚</p><h4 id="1-å®ç°å€Ÿä¹¦åŠŸèƒ½"><a href="#1-å®ç°å€Ÿä¹¦åŠŸèƒ½" class="headerlink" title="1.å®ç°å€Ÿä¹¦åŠŸèƒ½"></a>1.å®ç°å€Ÿä¹¦åŠŸèƒ½</h4><h5 id="åç«¯-4"><a href="#åç«¯-4" class="headerlink" title="åç«¯"></a>åç«¯</h5><p>å‚è€ƒDepartmentçš„å†™æ³•ï¼Œä¹‹å‰åœ¨æ·»åŠ éƒ¨é—¨ä¸­ä½¿ç”¨insertå‡½æ•°æ·»åŠ ï¼Œç†è®ºä¸Šåªè¦æ·»åŠ é€‚å½“çš„å‡½æ•°å³å¯åœ¨å€Ÿè¿˜ä¹¦ç±æ—¶åŒæ—¶ä¸ºlogä¸­æ·»åŠ è®°å½•</p><p><img src="E:\Files\Projects\CXCollege\software\Image\16.png" alt="16"></p><p>æ·»åŠ BookAndLogDTOç±»ç”¨äºæ¥æ”¶å‰ç«¯ä¼ é€’çš„å‚æ•°</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookAndLogDTO</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> BookDTO bookDTO;</span><br><span class="line">    <span class="keyword">private</span> BookLogDTO bookLogDTO;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>BookService.javaæ·»åŠ æ¥å£</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Integer <span class="title function_">lendBook</span><span class="params">(BookAndLogDTO bookAndLogDTO)</span>;</span><br></pre></td></tr></table></figure><p>Impl.javaä¸­å®Œå–„</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> Integer <span class="title function_">lendBook</span><span class="params">(BookAndLogDTO bookAndLogDTO)</span>&#123;</span><br><span class="line">    <span class="comment">// æ ¡éªŒè¾“å…¥æ•°æ®æ­£ç¡®æ€§</span></span><br><span class="line">    BookLogUtils.validateBookLog(bookAndLogDTO.getBookLogDTO());</span><br><span class="line">    BookUtils.validateBook(bookAndLogDTO.getBookDTO());</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ›å»ºå®ä½“å¯¹è±¡ï¼Œç”¨ä»¥ä¿å­˜åˆ°æ•°æ®åº“</span></span><br><span class="line">    <span class="type">BookLog</span> <span class="variable">log</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BookLog</span>();</span><br><span class="line">    <span class="type">Book</span> <span class="variable">book</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Book</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ä¿®æ”¹ä¹¦ç±çŠ¶æ€ä¸ºå€Ÿå‡º</span></span><br><span class="line">    bookAndLogDTO.getBookDTO().setStatus(<span class="string">&quot;å€Ÿå‡º&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å°†è¾“å…¥çš„å­—æ®µå…¨éƒ¨å¤åˆ¶åˆ°å®ä½“å¯¹è±¡ä¸­</span></span><br><span class="line">    <span class="comment">//å°†ä¸¤ä¸ªDTOä¸­çš„æ•°æ®ä¼ é€’åˆ°logä¸­ï¼Œä¾¿äºä½¿ç”¨bookLogMapperä¸­çš„insertå‡½æ•°</span></span><br><span class="line">    BeanUtils.copyProperties(BookLogUtils.convertToDTO(bookAndLogDTO),log);</span><br><span class="line">    <span class="comment">//å°†bookAndLogDTOç±»ä¸­çš„BookDTO()æ•°æ®ä¼ å…¥bookä¸­ç”¨äºæ›´æ–°çŠ¶æ€ä¸ºå€Ÿå‡º</span></span><br><span class="line">    BeanUtils.copyProperties(bookAndLogDTO.getBookDTO(), book);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è°ƒç”¨DAOæ–¹æ³•ä¿å­˜åˆ°æ•°æ®åº“è¡¨</span></span><br><span class="line">    bookLogMapper.insert(log);</span><br><span class="line">    <span class="comment">// æ›´æ–°ä¹¦ç±çŠ¶æ€</span></span><br><span class="line">    bookMapper.updateByPrimaryKey(book);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> log.getId();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>BookController.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@PostMapping(&quot;lendBook&quot;)</span></span><br><span class="line"><span class="meta">@Privilege(&quot;lend&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Integer <span class="title function_">lendBook</span><span class="params">(<span class="meta">@RequestBody</span> BookAndLogDTO bookAndLogDTO)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> bookService.lendBook(bookAndLogDTO);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>BookLogUtils.javaä¸­æ·»åŠ æ ¼å¼è½¬æ¢å‡½æ•°</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">    å°†ä¸¤ä¸ªDTOä¸­çš„æ•°æ®ä¼ é€’åˆ°logä¸­ï¼Œä¾¿äºä½¿ç”¨bookLogMapperä¸­çš„insertå‡½æ•°</span></span><br><span class="line"><span class="comment">    æ¥æ”¶BookAndLogDTOç±»å‹ï¼Œå¤åˆ¶å†…å®¹å¹¶è¾“å‡ºä¸ºbookLogDTOç±»å‹</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> BookLogDTO <span class="title function_">convertToDTO</span><span class="params">(BookAndLogDTO bookAndLogDTO)</span> &#123;</span><br><span class="line">    <span class="type">BookLogDTO</span> <span class="variable">bookLogDTO</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BookLogDTO</span>();</span><br><span class="line">    <span class="comment">//æ­¤å¤„æ— æ³•ç›´æ¥Copyï¼Œå› ä¸ºéœ€è¦æŠŠä¸¤ä¸ªä¸åŒçš„DTOä¸­çš„æ•°æ®ä¼ é€’åˆ°bookLogDTOä¸­</span></span><br><span class="line">    bookLogDTO.setBookId(bookAndLogDTO.getBookDTO().getId());</span><br><span class="line">    bookLogDTO.setBookName(bookAndLogDTO.getBookDTO().getName());</span><br><span class="line">    bookLogDTO.setBookIsbn(bookAndLogDTO.getBookDTO().getIsbn());</span><br><span class="line"></span><br><span class="line">    bookLogDTO.setBorrowedTime(bookAndLogDTO.getBookLogDTO().getBorrowedTime());</span><br><span class="line">    bookLogDTO.setReturnTime(bookAndLogDTO.getBookLogDTO().getReturnTime());</span><br><span class="line">    bookLogDTO.setReaderName(bookAndLogDTO.getBookLogDTO().getReaderName());</span><br><span class="line">    <span class="keyword">return</span> bookLogDTO;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="å‰ç«¯-4"><a href="#å‰ç«¯-4" class="headerlink" title="å‰ç«¯"></a>å‰ç«¯</h5><h6 id="ä¸»é¡µé¢æ·»åŠ å€Ÿä¹¦å¯¹è¯æ¡†"><a href="#ä¸»é¡µé¢æ·»åŠ å€Ÿä¹¦å¯¹è¯æ¡†" class="headerlink" title="ä¸»é¡µé¢æ·»åŠ å€Ÿä¹¦å¯¹è¯æ¡†"></a>ä¸»é¡µé¢æ·»åŠ å€Ÿä¹¦å¯¹è¯æ¡†</h6><p>å¯¼å…¥å¯¹è¯æ¡†ç»„ä»¶</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">InputDialog2</span> <span class="keyword">from</span> <span class="string">&#x27;./InputDialog2&#x27;</span>;</span><br></pre></td></tr></table></figure><p>å®šä¹‰å˜é‡</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> [bookLog, setBookLog] = useState&lt;<span class="variable constant_">API</span>.<span class="property">BookVO</span>&gt;();</span><br><span class="line"><span class="keyword">const</span> [lendVisible, setLendVisible] = <span class="title function_">useState</span>(<span class="literal">false</span>);</span><br></pre></td></tr></table></figure><p>å®ç°å¯¹è¯æ¡†äº¤äº’</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="title class_">InputDialog2</span></span><br><span class="line">detailData=&#123;bookLog&#125;</span><br><span class="line">onClose=&#123;<span class="function">(<span class="params">result</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">setLendVisible</span>(<span class="literal">false</span>);</span><br><span class="line">    result &amp;&amp; refAction.<span class="property">current</span>?.<span class="title function_">reload</span>();</span><br><span class="line">&#125;&#125;</span><br><span class="line">visible=&#123;lendVisible&#125;</span><br><span class="line">/&gt;</span><br></pre></td></tr></table></figure><p>å¯¹è¯æ¡†å®ç°æŒ‰é’®</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="title class_">Button</span></span><br><span class="line"><span class="keyword">type</span>=<span class="string">&quot;primary&quot;</span></span><br><span class="line">key=<span class="string">&quot;primary&quot;</span></span><br><span class="line">onClick=&#123;<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">setLendVisible</span>(<span class="literal">true</span>);</span><br><span class="line">&#125;&#125;</span><br><span class="line">disabled=&#123;!selectedRowKeys?.<span class="property">length</span>&#125;</span><br><span class="line">&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">LogoutOutlined</span> /&gt;</span></span> å€Ÿå‡º</span><br><span class="line">&lt;/<span class="title class_">Button</span>&gt;,</span><br></pre></td></tr></table></figure><h6 id="å€Ÿä¹¦æ€è·¯"><a href="#å€Ÿä¹¦æ€è·¯" class="headerlink" title="å€Ÿä¹¦æ€è·¯"></a><strong>å€Ÿä¹¦æ€è·¯</strong></h6><blockquote><ul><li>é€‰æ‹©æŸä¸€è¡Œï¼Œå¯ä»¥ç‚¹å‡»â€œå€Ÿé˜…â€æŒ‰é’®ï¼Œå®ç°å€Ÿä¹¦</li><li>ç‚¹å‡»å€Ÿä¹¦ï¼Œå¯¹è¯æ¡†å†…æ˜¾ç¤ºä¹¦ç±èµ„æ–™ï¼Œæ‰‹åŠ¨å¡«å…¥å€Ÿé˜…äººä¿¡æ¯</li><li>åç»­è€ƒè™‘æ‰©å±•ä¸ºé€‰æ‹©å¤šè¡Œä¹¦ç±ï¼ŒåŒæ—¶å€Ÿé˜…</li></ul></blockquote><p>é€šè¿‡æŸ¥è¯¢é€‰æ‹©è¡Œçš„ä»£ç ï¼Œå‘ç°**onChange()**å‡½æ•°ï¼Œå¯ä»¥è‡ªå¸¦ä¸¤ä¸ªå‚æ•°</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">onChange?: <span class="function">(<span class="params">selectedRowKeys: Key[], selectedRows: T[], info: &#123;</span></span></span><br><span class="line"><span class="params"><span class="function">    <span class="keyword">type</span>: RowSelectMethod;</span></span></span><br><span class="line"><span class="params"><span class="function">&#125;</span>) =&gt;</span> <span class="built_in">void</span>;</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºé€‰æ‹©è¡Œçš„ä¸»é”®ï¼ˆå³IDï¼‰ï¼Œç¬¬äºŒä¸ªå‚æ•°ä¸ºé€‰æ‹©è¡Œçš„åˆ—è¡¨<strong>ï¼ˆæ­¤ç‰¹æ€§ä¹Ÿä¸ºåç»­é€‰æ‹©å¤šè¡ŒåŒæ—¶å€Ÿé˜…æä¾›å¯èƒ½ï¼‰</strong></p><p>å› æ­¤ï¼Œå®ç°å€Ÿå‡ºä¸€æœ¬ä¹¦åªéœ€è¦ä¼ é€’records[0]åˆ°å¯¹è¯æ¡†å³å¯ï¼Œä»£ç å¦‚ä¸‹</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">rowSelection=&#123;&#123;</span><br><span class="line">    <span class="attr">onChange</span>: <span class="function">(<span class="params">rowKeys, records</span>) =&gt;</span> &#123;</span><br><span class="line"><span class="title function_">selectRow</span>(rowKeys <span class="keyword">as</span> <span class="built_in">number</span>[]);</span><br><span class="line">    <span class="title function_">setBookLog</span>(records[<span class="number">0</span>]);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;&#125;</span><br></pre></td></tr></table></figure><h6 id="inputdialogå¯¹è¯æ¡†"><a href="#inputdialogå¯¹è¯æ¡†" class="headerlink" title="inputdialogå¯¹è¯æ¡†"></a>inputdialogå¯¹è¯æ¡†</h6><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">ModalForm</span>, <span class="title class_">ProForm</span>, <span class="title class_">ProFormInstance</span>, <span class="title class_">ProFormSelect</span>, <span class="title class_">ProFormText</span>, <span class="title class_">ProFormDatePicker</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@ant-design/pro-components&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; message, <span class="title class_">Switch</span>, <span class="title class_">Tooltip</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;antd&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; useEffect, useRef, useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; waitTime &#125; <span class="keyword">from</span> <span class="string">&#x27;@/utils/request&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; addBook, updateBook, lendBook &#125; <span class="keyword">from</span> <span class="string">&#x27;@/services/api/book&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> moment <span class="keyword">from</span> <span class="string">&#x27;dayjs&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; addBookLog, updateBookLog &#125; <span class="keyword">from</span> <span class="string">&#x27;@/services/api/bookLog&#x27;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">InputDialogProps</span> &#123;</span><br><span class="line">  detailData?: <span class="variable constant_">API</span>.<span class="property">BookDTO</span>;</span><br><span class="line">  <span class="attr">visible</span>: <span class="built_in">boolean</span>;</span><br><span class="line">  <span class="attr">onClose</span>: <span class="function">(<span class="params">result: <span class="built_in">boolean</span></span>) =&gt;</span> <span class="built_in">void</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">InputDialog</span>(<span class="params">props: InputDialogProps</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> form = useRef&lt;<span class="title class_">ProFormInstance</span>&gt;(<span class="literal">null</span>);</span><br><span class="line">  <span class="keyword">const</span> [<span class="keyword">readonly</span>, setReadonly] = <span class="title function_">useState</span>(<span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line">  <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">waitTime</span>().<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (props.<span class="property">detailData</span>) &#123;</span><br><span class="line">        form?.<span class="property">current</span>?.<span class="title function_">setFieldsValue</span>(props.<span class="property">detailData</span>);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        form?.<span class="property">current</span>?.<span class="title function_">resetFields</span>();</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;, [props.<span class="property">detailData</span>, props.<span class="property">visible</span>]);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">onFinish</span> = <span class="keyword">async</span> (<span class="params">values: <span class="built_in">any</span></span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; name, isbn, author, publisher, price, category, boughtTime, publishedTime, status, classification,</span><br><span class="line">      readerName, bookId, bookName, bookIsbn, borrowedTime, returnTime &#125; = values;</span><br><span class="line">    <span class="keyword">const</span> <span class="attr">data</span>: <span class="variable constant_">API</span>.<span class="property">BookAndLogDTO</span> = &#123;</span><br><span class="line">      <span class="attr">bookDTO</span>: &#123;</span><br><span class="line">        <span class="attr">id</span>: props.<span class="property">detailData</span>?.<span class="property">id</span>,</span><br><span class="line">        name,</span><br><span class="line">        isbn,</span><br><span class="line">        author,</span><br><span class="line">        publisher,</span><br><span class="line">        price,</span><br><span class="line">        category,</span><br><span class="line">        boughtTime,</span><br><span class="line">        publishedTime,</span><br><span class="line">        status,</span><br><span class="line">        classification</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">bookLogDTO</span>: &#123;</span><br><span class="line">        readerName,</span><br><span class="line">        bookId,</span><br><span class="line">        bookName,</span><br><span class="line">        bookIsbn,</span><br><span class="line">        borrowedTime,</span><br><span class="line">        returnTime</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (props.<span class="property">detailData</span>) &#123;</span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">await</span> <span class="title function_">lendBook</span>(data);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">        message.<span class="title function_">success</span>(<span class="string">&#x27;å€Ÿå‡ºæˆåŠŸ&#x27;</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    props.<span class="title function_">onClose</span>(<span class="literal">true</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="comment">//è¿”å›ä¸€ä¸ªæ¨¡æ€å¯¹è¯æ¡†</span></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">ModalForm</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">width</span>=<span class="string">&#123;600&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">onFinish</span>=<span class="string">&#123;onFinish&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">formRef</span>=<span class="string">&#123;form&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">modalProps</span>=<span class="string">&#123;&#123;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">destroyOnClose:</span> <span class="attr">true</span>,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">onCancel:</span> () =&gt;</span> props.onClose(false),</span></span><br><span class="line"><span class="language-xml">      &#125;&#125;</span></span><br><span class="line"><span class="language-xml">      title=&#123;props.detailData ? &#x27;å€Ÿå‡º&#x27; : &#x27;å€Ÿå‡º&#x27;&#125;</span></span><br><span class="line"><span class="language-xml">      open=&#123;props.visible&#125;</span></span><br><span class="line"><span class="language-xml">    &gt;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">ProFormText</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">name</span>=<span class="string">&quot;category&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">label</span>=<span class="string">&quot;category&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">hidden</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">ProFormText</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">name</span>=<span class="string">&quot;boughtTime&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">label</span>=<span class="string">&quot;boughtTime&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">hidden</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">ProFormText</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">name</span>=<span class="string">&quot;publishedTime&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">label</span>=<span class="string">&quot;publishedTime&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">hidden</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">ProFormText</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">name</span>=<span class="string">&quot;classification&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">label</span>=<span class="string">&quot;classification&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">hidden</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      /&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">ProForm.Group</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">ProFormText</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">name</span>=<span class="string">&quot;name&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">label</span>=<span class="string">&quot;ä¹¦å&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        /&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">ProFormText</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">name</span>=<span class="string">&quot;isbn&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">label</span>=<span class="string">&quot;ISBN&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">ProForm.Group</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">ProForm.Group</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">ProFormText</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">name</span>=<span class="string">&quot;publisher&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">label</span>=<span class="string">&quot;å‡ºç‰ˆç¤¾&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        /&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">ProFormText</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">name</span>=<span class="string">&quot;author&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">label</span>=<span class="string">&quot;ä½œè€…&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">ProForm.Group</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">ProForm.Group</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">ProFormText</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">name</span>=<span class="string">&quot;price&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">label</span>=<span class="string">&quot;ä¹¦ç±ä»·æ ¼&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        /&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">ProFormText</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">name</span>=<span class="string">&quot;category&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">label</span>=<span class="string">&quot;åˆ†ç±»å·&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">ProForm.Group</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">ProForm.Group</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">ProFormSelect</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">name</span>=<span class="string">&quot;status&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">label</span>=<span class="string">&quot;çŠ¶æ€&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">options</span>=<span class="string">&#123;[</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            &#123; <span class="attr">label:</span> &#x27;<span class="attr">åœ¨æ¶</span>&#x27;, <span class="attr">value:</span> &#x27;<span class="attr">åœ¨æ¶</span>&#x27; &#125;,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            &#123; <span class="attr">label:</span> &#x27;<span class="attr">å€Ÿå‡º</span>&#x27;, <span class="attr">value:</span> &#x27;<span class="attr">å€Ÿå‡º</span>&#x27; &#125;,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          ]&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">ProForm.Group</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">ProForm.Group</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">ProFormText</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">name</span>=<span class="string">&quot;readerName&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">label</span>=<span class="string">&quot;å€Ÿé˜…äºº&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        /&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">ProFormDatePicker</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">name</span>=<span class="string">&quot;borrowedTime&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">label</span>=<span class="string">&quot;å€Ÿå‡ºæ—¥æœŸ&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">initialValue</span>=<span class="string">&#123;moment()&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">ProForm.Group</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    &lt;/ModalForm &gt;</span></span><br><span class="line"><span class="language-xml">  );</span></span><br><span class="line"><span class="language-xml">&#125;</span></span><br></pre></td></tr></table></figure><h6 id="æµ‹è¯•-4"><a href="#æµ‹è¯•-4" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h6><p>idä¸º1çš„ä¹¦ç±ç›®å‰åœ¨æ¶</p><p><img src="E:\Files\Projects\CXCollege\software\Image\21.png" alt="21"></p><p>é€‰æ‹©å€Ÿå‡ºï¼Œå¹¶æ·»åŠ å€Ÿé˜…äºº</p><p><img src="E:\Files\Projects\CXCollege\software\Image\22.png" alt="22"></p><p>ä¹¦ç±çŠ¶æ€å˜ä¸ºå€Ÿå‡ºï¼Œå¹¶ä¸”å€Ÿé˜…è®°å½•è¡¨æ ¼ä¸­æ–°å¢ä¸€æ¡è®°å½•</p><p><img src="E:\Files\Projects\CXCollege\software\Image\23.png" alt="23"></p><p><img src="E:\Files\Projects\CXCollege\software\Image\24.png" alt="24"></p><h4 id="2-åˆ¤æ–­å€Ÿä¹¦ä¸åˆç†çš„æ“ä½œ"><a href="#2-åˆ¤æ–­å€Ÿä¹¦ä¸åˆç†çš„æ“ä½œ" class="headerlink" title="2.åˆ¤æ–­å€Ÿä¹¦ä¸åˆç†çš„æ“ä½œ"></a>2.åˆ¤æ–­å€Ÿä¹¦ä¸åˆç†çš„æ“ä½œ</h4><h5 id="åç«¯-5"><a href="#åç«¯-5" class="headerlink" title="åç«¯"></a>åç«¯</h5><p>BookServiceImpl.javaä¸­çš„LendBook()å‡½æ•°å¼€å¤´æ·»åŠ </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ ¡éªŒè¾“å…¥æ•°æ®æ­£ç¡®æ€§</span></span><br><span class="line">BookLogUtils.validateBookLog(bookAndLogDTO.getBookLogDTO());</span><br><span class="line"><span class="comment">//ä¹¦ç±çŠ¶æ€ä¸æ˜¯â€œåœ¨æ¶â€ï¼Œåˆ™ä¸èƒ½å€Ÿå‡ºæ­¤ä¹¦</span></span><br><span class="line">Assert.isTrue(bookAndLogDTO.getBookDTO().getStatus()!=<span class="string">&quot;åœ¨æ¶&quot;</span>, <span class="string">&quot;ä¹¦ç±ä¸åœ¨æ¶&quot;</span>);</span><br><span class="line">BookUtils.validateBook(bookAndLogDTO.getBookDTO());</span><br></pre></td></tr></table></figure><p>BookLogUtils.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">validateBookLog</span><span class="params">(BookLogDTO bookLogDTO)</span> &#123;</span><br><span class="line">    FormatUtils.trimFieldToNull(bookLogDTO);</span><br><span class="line">    Assert.hasText(bookLogDTO.getReaderName(), <span class="string">&quot;å€Ÿé˜…äººä¸èƒ½ä¸ºç©º&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="å‰ç«¯-5"><a href="#å‰ç«¯-5" class="headerlink" title="å‰ç«¯"></a>å‰ç«¯</h5><p>å‰ç«¯è‹¥ä¸åšå¤„ç†ï¼Œè™½ç„¶åç«¯ä¼šassertæ–­è¨€é”™è¯¯ï¼Œä½†æ˜¯å‰ç«¯ä»ç„¶ä¼šæ˜¾ç¤ºâ€œå€Ÿå‡ºæˆåŠŸâ€ã€‚æ­¤æ—¶ï¼Œéœ€è¦å°†å…¶åšä»¥ä¸‹ä¿®æ”¹</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (props.<span class="property">detailData</span>) &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">await</span> <span class="title function_">lendBook</span>(data);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">        message.<span class="title function_">success</span>(<span class="string">&#x27;å€Ÿå‡ºæˆåŠŸ&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="3-ä¸€æ¬¡å€Ÿå¤šæœ¬ä¹¦"><a href="#3-ä¸€æ¬¡å€Ÿå¤šæœ¬ä¹¦" class="headerlink" title="3.ä¸€æ¬¡å€Ÿå¤šæœ¬ä¹¦"></a>3.ä¸€æ¬¡å€Ÿå¤šæœ¬ä¹¦</h4><h5 id="å‰ç«¯-6"><a href="#å‰ç«¯-6" class="headerlink" title="å‰ç«¯"></a>å‰ç«¯</h5><p>ä¸»é¡µé¢ä¿®æ”¹ä¹‹å‰æ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ ä¸ºæ‰€æœ‰æ•°ç»„</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">setBookLog</span>(records);</span><br></pre></td></tr></table></figure><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">ModalForm</span>, <span class="title class_">ProForm</span>, <span class="title class_">ProFormInstance</span>, <span class="title class_">ProFormSelect</span>, <span class="title class_">ProFormText</span>, <span class="title class_">ProFormDatePicker</span>, <span class="title class_">ProTable</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@ant-design/pro-components&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; message, <span class="title class_">Switch</span>, <span class="title class_">Tooltip</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;antd&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; useEffect, useRef, useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; waitTime &#125; <span class="keyword">from</span> <span class="string">&#x27;@/utils/request&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; lendBooks &#125; <span class="keyword">from</span> <span class="string">&#x27;@/services/api/book&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> moment <span class="keyword">from</span> <span class="string">&#x27;dayjs&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">InputDialogProps</span> &#123;</span><br><span class="line">  detailData?: <span class="variable constant_">API</span>.<span class="property">BookDTO</span>[];</span><br><span class="line">  <span class="attr">visible</span>: <span class="built_in">boolean</span>;</span><br><span class="line">  <span class="attr">onClose</span>: <span class="function">(<span class="params">result: <span class="built_in">boolean</span></span>) =&gt;</span> <span class="built_in">void</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">InputDialog</span>(<span class="params">props: InputDialogProps</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> form = useRef&lt;<span class="title class_">ProFormInstance</span>&gt;(<span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 222222222æ³¨æ„ä¸¤dialogä¸­æœ‰ä¸¤ç§ç±»å‹</span></span><br><span class="line">  <span class="comment">// æ³¨æ„ä¸åŒä½ç½®æ³¨é‡Šè¯­æ³•ä¸åŒï¼Œä¸è¦è¢«å‘äº†</span></span><br><span class="line">  <span class="keyword">const</span> [formData, setFormData] = useState&lt;<span class="variable constant_">API</span>.<span class="property">BookDTO</span>[]&gt;([]);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;formData&quot;</span>)</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(formData)</span><br><span class="line"></span><br><span class="line">  <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">waitTime</span>().<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (props.<span class="property">detailData</span>) &#123;</span><br><span class="line">        form?.<span class="property">current</span>?.<span class="title function_">setFieldsValue</span>(props.<span class="property">detailData</span>);</span><br><span class="line">        <span class="title function_">setFormData</span>(props.<span class="property">detailData</span>);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        form?.<span class="property">current</span>?.<span class="title function_">resetFields</span>();</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;, [props.<span class="property">detailData</span>, props.<span class="property">visible</span>]);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">onFinish</span> = <span class="keyword">async</span> (<span class="params">values: <span class="built_in">any</span></span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; readerName,borrowedTime,returnTime &#125; = values;</span><br><span class="line">    <span class="keyword">const</span> <span class="attr">bookDTOArray</span>: <span class="variable constant_">API</span>.<span class="property">BookDTO</span>[] = [];</span><br><span class="line">    <span class="keyword">const</span> <span class="attr">bookLogDTOArray</span>: <span class="variable constant_">API</span>.<span class="property">BookLogDTO</span>[] = [];</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä½¿ç”¨forEach()æ–¹æ³•éå†formDataæ•°ç»„ï¼Œå°†æ¯ä¸ªå…ƒç´ è½¬æ¢ä¸ºä¸€ä¸ªåŒ…å«ä¹¦ç±ä¿¡æ¯çš„DTOå¯¹è±¡ï¼ˆbookDTOï¼‰ï¼Œ</span></span><br><span class="line"><span class="comment">     * å¹¶å°†å…¶æ·»åŠ åˆ°bookDTOArrayæ•°ç»„ä¸­ã€‚</span></span><br><span class="line"><span class="comment">     * è¿˜å°†æ¯ä¸ªå…ƒç´ çš„å€Ÿé˜…æ—¥å¿—ä¿¡æ¯è½¬æ¢ä¸ºä¸€ä¸ªåŒ…å«å€Ÿé˜…æ—¥å¿—çš„DTOå¯¹è±¡ï¼ˆbookLogDTOï¼‰ï¼Œ</span></span><br><span class="line"><span class="comment">     * å¹¶å°†å…¶æ·»åŠ åˆ°bookLogDTOArrayæ•°ç»„ä¸­ã€‚</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    formData.<span class="title function_">forEach</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">//å°†ä¸€ä¸ªåŒ…å«ä¹¦ç±ä¿¡æ¯çš„DTOå¯¹è±¡æ·»åŠ åˆ°bookDTOArrayæ•°ç»„</span></span><br><span class="line">      bookDTOArray.<span class="title function_">push</span>(&#123;</span><br><span class="line">        <span class="attr">id</span>: item.<span class="property">id</span>,</span><br><span class="line">        <span class="attr">name</span>: item.<span class="property">name</span>,</span><br><span class="line">        <span class="attr">isbn</span>: item.<span class="property">isbn</span>,</span><br><span class="line">        <span class="attr">author</span>: item.<span class="property">author</span>,</span><br><span class="line">        <span class="attr">publisher</span>: item.<span class="property">publisher</span>,</span><br><span class="line">        <span class="attr">price</span>: item.<span class="property">price</span>,</span><br><span class="line">        <span class="attr">category</span>: item.<span class="property">category</span>,</span><br><span class="line">        <span class="attr">boughtTime</span>: item.<span class="property">boughtTime</span>,</span><br><span class="line">        <span class="attr">publishedTime</span>: item.<span class="property">publishedTime</span>,</span><br><span class="line">        <span class="attr">status</span>: item.<span class="property">status</span>,</span><br><span class="line">        <span class="attr">classification</span>: item.<span class="property">classification</span></span><br><span class="line">      &#125;);</span><br><span class="line"></span><br><span class="line">      bookLogDTOArray.<span class="title function_">push</span>(&#123;</span><br><span class="line">        readerName,</span><br><span class="line">        <span class="attr">bookId</span>: item.<span class="property">id</span>,</span><br><span class="line">        <span class="attr">bookName</span>: item.<span class="property">name</span>,</span><br><span class="line">        <span class="attr">bookIsbn</span>: item.<span class="property">isbn</span>,</span><br><span class="line">        <span class="attr">borrowedTime</span>:borrowedTime,</span><br><span class="line">        <span class="attr">returnTime</span>: returnTime||<span class="literal">null</span></span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * bookDTOArrayå’ŒbookLogDTOArrayæ•°ç»„ä¸­çš„å…ƒç´ ä¸€ä¸€å¯¹åº”ï¼Œ</span></span><br><span class="line"><span class="comment">     * å¯ä»¥é€šè¿‡å®ƒä»¬çš„ç´¢å¼•å€¼å°†å®ƒä»¬ç»„åˆæˆä¸€ä¸ªæ–°çš„DTOå¯¹è±¡ï¼ˆbookAndLogDTOï¼‰å¹¶è¿”å›ç»™åç«¯ã€‚</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">const</span> <span class="attr">data</span>: <span class="variable constant_">API</span>.<span class="property">BookAndLogDTO</span>[] = bookDTOArray.<span class="title function_">map</span>(<span class="function">(<span class="params">item, index</span>) =&gt;</span> (&#123;</span><br><span class="line">      <span class="attr">bookDTO</span>: item,</span><br><span class="line">      <span class="attr">bookLogDTO</span>: bookLogDTOArray[index]</span><br><span class="line">    &#125;));</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;data&quot;</span>)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(data)</span><br><span class="line">    <span class="comment">// 1111111111setFormData(props.detailData);</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (props.<span class="property">detailData</span>) &#123;</span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">await</span> <span class="title function_">lendBooks</span>(data);</span><br><span class="line">        <span class="comment">// setFormData([]);</span></span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">        message.<span class="title function_">error</span>(<span class="string">&#x27;å€Ÿå‡ºå¤±è´¥&#x27;</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line">    props.<span class="title function_">onClose</span>(<span class="literal">true</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">ModalForm</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">width</span>=<span class="string">&#123;700&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">onFinish</span>=<span class="string">&#123;onFinish&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">formRef</span>=<span class="string">&#123;form&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">modalProps</span>=<span class="string">&#123;&#123;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">destroyOnClose:</span> <span class="attr">true</span>,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">onCancel:</span> () =&gt;</span> props.onClose(false),</span></span><br><span class="line"><span class="language-xml">      &#125;&#125;</span></span><br><span class="line"><span class="language-xml">      title=&#123;props.detailData ? &#x27;å€Ÿå‡º&#x27; : &#x27;å€Ÿå‡º&#x27;&#125;</span></span><br><span class="line"><span class="language-xml">      open=&#123;props.visible&#125;</span></span><br><span class="line"><span class="language-xml">    &gt;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">ProForm.Group</span> &gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">ProFormText</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">name</span>=<span class="string">&#123;</span>`<span class="attr">readerName</span>`&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">label</span>=<span class="string">&quot;å€Ÿé˜…äºº&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">rules</span>=<span class="string">&#123;[</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            &#123;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">              <span class="attr">required:</span> <span class="attr">true</span>,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">              <span class="attr">message:</span> &#x27;<span class="attr">è¯·è¾“å…¥å€Ÿé˜…äººå§“å</span>ï¼&#x27;,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            &#125;,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          ]&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        /&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">ProFormDatePicker</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">name</span>=<span class="string">&#123;</span>`<span class="attr">borrowedTime</span>`&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">label</span>=<span class="string">&quot;å€Ÿå‡ºæ—¥æœŸ&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">initialValue</span>=<span class="string">&#123;moment()&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">ProForm.Group</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">ProTable</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">dataSource</span>=<span class="string">&#123;formData&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">columns</span>=<span class="string">&#123;[</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          &#123; <span class="attr">title:</span> &#x27;<span class="attr">ä¹¦å</span>&#x27;, <span class="attr">dataIndex:</span> &#x27;<span class="attr">name</span>&#x27; &#125;,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          &#123; <span class="attr">title:</span> &#x27;<span class="attr">å‡ºç‰ˆç¤¾</span>&#x27;, <span class="attr">dataIndex:</span> &#x27;<span class="attr">publisher</span>&#x27; &#125;,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          &#123; <span class="attr">title:</span> &#x27;<span class="attr">ä½œè€…</span>&#x27;, <span class="attr">dataIndex:</span> &#x27;<span class="attr">author</span>&#x27; &#125;,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          &#123; <span class="attr">title:</span> &#x27;<span class="attr">ISBN</span>&#x27;, <span class="attr">dataIndex:</span> &#x27;<span class="attr">isbn</span>&#x27; &#125;,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        ]&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">options</span>=<span class="string">&#123;false&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">search</span>=<span class="string">&#123;false&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">cardBordered</span>=<span class="string">&#123;false&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">ModalForm</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="åç«¯-6"><a href="#åç«¯-6" class="headerlink" title="åç«¯"></a>åç«¯</h5><p>ä¿®æ”¹lendBooksä¼ å…¥å‚æ•°ä¸ºä¸€ä¸ªæ•°ç»„ï¼Œé€šè¿‡forå¾ªç¯éå†ä¸€æ¬¡è¿˜ä¹¦</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">lendBooks</span><span class="params">(BookAndLogDTO[] bookAndLogDTO)</span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;bookAndLogDTO.length;i++)&#123;</span><br><span class="line">        <span class="type">BookAndLogDTO</span> <span class="variable">bookLogDTO</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BookAndLogDTO</span>();</span><br><span class="line">        BeanUtils.copyProperties(bookAndLogDTO[i], bookLogDTO);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//ä¹¦ç±çŠ¶æ€ä¸æ˜¯â€œåœ¨æ¶â€ï¼ŒæŠ¥é”™</span></span><br><span class="line">        Assert.isTrue(bookLogDTO.getBookDTO().getStatus().equals(<span class="string">&quot;åœ¨æ¶&quot;</span>),<span class="string">&quot;ä¹¦ç±ä¸åœ¨æ¶&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// åˆ›å»ºå®ä½“å¯¹è±¡ï¼Œç”¨ä»¥ä¿å­˜åˆ°æ•°æ®åº“</span></span><br><span class="line">        <span class="type">BookLog</span> <span class="variable">log</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BookLog</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å°†è¾“å…¥çš„å­—æ®µå…¨éƒ¨å¤åˆ¶åˆ°å®ä½“å¯¹è±¡ä¸­</span></span><br><span class="line">        <span class="comment">//å°†ä¸¤ä¸ªDTOä¸­çš„æ•°æ®ä¼ é€’åˆ°logä¸­ï¼Œä¾¿äºä½¿ç”¨bookLogMapperä¸­çš„insertå‡½æ•°</span></span><br><span class="line">        BeanUtils.copyProperties(BookLogUtils.convertToDTO(bookLogDTO),log);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è°ƒç”¨DAOæ–¹æ³•ä¿å­˜åˆ°æ•°æ®åº“è¡¨</span></span><br><span class="line">        bookLogMapper.insert(log);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//ä¿®æ”¹ä¹¦ç±çŠ¶æ€ä¸ºå€Ÿå‡º</span></span><br><span class="line">        bookLogDTO.getBookDTO().setStatus(<span class="string">&quot;å€Ÿå‡º&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ›´æ–°ä¹¦ç±çŠ¶æ€</span></span><br><span class="line">        updateBook(bookLogDTO.getBookDTO());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="è¿˜ä¹¦"><a href="#è¿˜ä¹¦" class="headerlink" title="è¿˜ä¹¦"></a>è¿˜ä¹¦</h3><p>å®ç°äº†ä¸€æ¬¡è¿˜å¤šæœ¬ä¹¦</p><h4 id="å‰ç«¯-7"><a href="#å‰ç«¯-7" class="headerlink" title="å‰ç«¯"></a>å‰ç«¯</h4><p>ä¸»é¡µé¢index</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å®šä¹‰ä¸€ä¸ªä¸€æ¬¡è¿˜å¤šæœ¬ä¹¦çš„çš„å›è°ƒå‡½æ•°</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">returnBooks</span> = <span class="keyword">async</span> (<span class="params">bookLog: <span class="built_in">any</span></span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; bookLog.<span class="property">length</span>; i++) &#123;</span><br><span class="line">        <span class="title function_">returnBook</span>(bookLog[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">selectRow</span>([]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å®šä¹‰ä¸€ä¸ªè¿˜ä¹¦çš„å›è°ƒå‡½æ•°</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">handleReturn</span> = <span class="keyword">async</span> (<span class="params">bookLog: <span class="built_in">any</span></span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span> (!selectedRowKeys?.<span class="property">length</span>) <span class="keyword">return</span>;</span><br><span class="line">    <span class="title function_">openConfirm</span>(<span class="string">`æ‚¨ç¡®å®šå½’è¿˜<span class="subst">$&#123;selectedRowKeys.length&#125;</span>æœ¬ä¹¦å—`</span>, <span class="keyword">async</span> () =&gt; &#123;</span><br><span class="line">        <span class="keyword">await</span> <span class="title function_">returnBooks</span>(bookLog);</span><br><span class="line">        refAction.<span class="property">current</span>?.<span class="title function_">reload</span>();</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="title class_">Button</span></span><br><span class="line"><span class="keyword">type</span>=<span class="string">&quot;primary&quot;</span></span><br><span class="line">key=<span class="string">&quot;primary&quot;</span></span><br><span class="line">onClick=&#123;<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">handleReturn</span>(bookLog);</span><br><span class="line">&#125;&#125;</span><br><span class="line">disabled=&#123;!selectedRowKeys?.<span class="property">length</span>&#125;</span><br><span class="line">&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">LoginOutlined</span> /&gt;</span></span>  è¿˜ä¹¦</span><br><span class="line">&lt;/<span class="title class_">Button</span>&gt;,</span><br></pre></td></tr></table></figure><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">rowSelection=&#123;&#123;</span><br><span class="line">              <span class="attr">onChange</span>: <span class="function">(<span class="params">rowKeys, records</span>) =&gt;</span> &#123;</span><br><span class="line">                  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;records&quot;</span>);</span><br><span class="line">                  <span class="variable language_">console</span>.<span class="title function_">log</span>(records);</span><br><span class="line">                  <span class="title function_">setBookLog</span>(records);</span><br><span class="line">                  <span class="title function_">selectRow</span>(rowKeys <span class="keyword">as</span> <span class="built_in">number</span>[]);</span><br><span class="line">              &#125;,</span><br><span class="line">&#125;&#125;</span><br></pre></td></tr></table></figure><p>InputDialog.tsxä¿®æ”¹ä¸ºå¦‚ä¸‹</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">ModalForm</span>, <span class="title class_">ProForm</span>, <span class="title class_">ProFormInstance</span>, <span class="title class_">ProFormSelect</span>, <span class="title class_">ProFormText</span>, <span class="title class_">ProFormDatePicker</span>, <span class="title class_">ProTable</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@ant-design/pro-components&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; message, <span class="title class_">Switch</span>, <span class="title class_">Tooltip</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;antd&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; useEffect, useRef, useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; waitTime &#125; <span class="keyword">from</span> <span class="string">&#x27;@/utils/request&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; lendBook, lendBooks &#125; <span class="keyword">from</span> <span class="string">&#x27;@/services/api/book&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> moment <span class="keyword">from</span> <span class="string">&#x27;dayjs&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">InputDialogProps</span> &#123;</span><br><span class="line">  detailData?: <span class="variable constant_">API</span>.<span class="property">BookDTO</span>[];</span><br><span class="line">  <span class="attr">visible</span>: <span class="built_in">boolean</span>;</span><br><span class="line">  <span class="attr">onClose</span>: <span class="function">(<span class="params">result: <span class="built_in">boolean</span></span>) =&gt;</span> <span class="built_in">void</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">InputDialog</span>(<span class="params">props: InputDialogProps</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> form = useRef&lt;<span class="title class_">ProFormInstance</span>&gt;(<span class="literal">null</span>);</span><br><span class="line">  <span class="keyword">const</span> [<span class="keyword">readonly</span>, setReadonly] = <span class="title function_">useState</span>(<span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 222222222æ³¨æ„ä¸¤dialogä¸­æœ‰ä¸¤ç§ç±»å‹</span></span><br><span class="line">  <span class="comment">// æ³¨æ„ä¸åŒä½ç½®æ³¨é‡Šè¯­æ³•ä¸åŒï¼Œä¸è¦è¢«å‘äº†</span></span><br><span class="line">  <span class="keyword">const</span> [formData, setFormData] = useState&lt;<span class="variable constant_">API</span>.<span class="property">BookDTO</span>[]&gt;([]);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;formData&quot;</span>)</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(formData)</span><br><span class="line"></span><br><span class="line">  <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">waitTime</span>().<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (props.<span class="property">detailData</span>) &#123;</span><br><span class="line">        form?.<span class="property">current</span>?.<span class="title function_">setFieldsValue</span>(props.<span class="property">detailData</span>);</span><br><span class="line">        <span class="title function_">setFormData</span>(props.<span class="property">detailData</span>);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        form?.<span class="property">current</span>?.<span class="title function_">resetFields</span>();</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;, [props.<span class="property">detailData</span>, props.<span class="property">visible</span>]);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">onFinish</span> = <span class="keyword">async</span> (<span class="params">values: <span class="built_in">any</span></span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; readerName,borrowedTime,returnTime &#125; = values;</span><br><span class="line">    <span class="keyword">const</span> <span class="attr">bookDTOArray</span>: <span class="variable constant_">API</span>.<span class="property">BookDTO</span>[] = [];</span><br><span class="line">    <span class="keyword">const</span> <span class="attr">bookLogDTOArray</span>: <span class="variable constant_">API</span>.<span class="property">BookLogDTO</span>[] = [];</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä½¿ç”¨forEach()æ–¹æ³•éå†formDataæ•°ç»„ï¼Œå°†æ¯ä¸ªå…ƒç´ è½¬æ¢ä¸ºä¸€ä¸ªåŒ…å«ä¹¦ç±ä¿¡æ¯çš„DTOå¯¹è±¡ï¼ˆbookDTOï¼‰ï¼Œ</span></span><br><span class="line"><span class="comment">     * å¹¶å°†å…¶æ·»åŠ åˆ°bookDTOArrayæ•°ç»„ä¸­ã€‚</span></span><br><span class="line"><span class="comment">     * è¿˜å°†æ¯ä¸ªå…ƒç´ çš„å€Ÿé˜…æ—¥å¿—ä¿¡æ¯è½¬æ¢ä¸ºä¸€ä¸ªåŒ…å«å€Ÿé˜…æ—¥å¿—çš„DTOå¯¹è±¡ï¼ˆbookLogDTOï¼‰ï¼Œ</span></span><br><span class="line"><span class="comment">     * å¹¶å°†å…¶æ·»åŠ åˆ°bookLogDTOArrayæ•°ç»„ä¸­ã€‚</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    formData.<span class="title function_">forEach</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">//å°†ä¸€ä¸ªåŒ…å«ä¹¦ç±ä¿¡æ¯çš„DTOå¯¹è±¡æ·»åŠ åˆ°bookDTOArrayæ•°ç»„</span></span><br><span class="line">      bookDTOArray.<span class="title function_">push</span>(&#123;</span><br><span class="line">        <span class="attr">id</span>: item.<span class="property">id</span>,</span><br><span class="line">        <span class="attr">name</span>: item.<span class="property">name</span>,</span><br><span class="line">        <span class="attr">isbn</span>: item.<span class="property">isbn</span>,</span><br><span class="line">        <span class="attr">author</span>: item.<span class="property">author</span>,</span><br><span class="line">        <span class="attr">publisher</span>: item.<span class="property">publisher</span>,</span><br><span class="line">        <span class="attr">price</span>: item.<span class="property">price</span>,</span><br><span class="line">        <span class="attr">category</span>: item.<span class="property">category</span>,</span><br><span class="line">        <span class="attr">boughtTime</span>: item.<span class="property">boughtTime</span>,</span><br><span class="line">        <span class="attr">publishedTime</span>: item.<span class="property">publishedTime</span>,</span><br><span class="line">        <span class="attr">status</span>: item.<span class="property">status</span>,</span><br><span class="line">        <span class="attr">classification</span>: item.<span class="property">classification</span></span><br><span class="line">      &#125;);</span><br><span class="line"></span><br><span class="line">      bookLogDTOArray.<span class="title function_">push</span>(&#123;</span><br><span class="line">        readerName,</span><br><span class="line">        <span class="attr">bookId</span>: item.<span class="property">id</span>,</span><br><span class="line">        <span class="attr">bookName</span>: item.<span class="property">name</span>,</span><br><span class="line">        <span class="attr">bookIsbn</span>: item.<span class="property">isbn</span>,</span><br><span class="line">        <span class="attr">borrowedTime</span>:borrowedTime,</span><br><span class="line">        <span class="attr">returnTime</span>: returnTime||<span class="literal">null</span></span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * bookDTOArrayå’ŒbookLogDTOArrayæ•°ç»„ä¸­çš„å…ƒç´ ä¸€ä¸€å¯¹åº”ï¼Œ</span></span><br><span class="line"><span class="comment">     * å¯ä»¥é€šè¿‡å®ƒä»¬çš„ç´¢å¼•å€¼å°†å®ƒä»¬ç»„åˆæˆä¸€ä¸ªæ–°çš„DTOå¯¹è±¡ï¼ˆbookAndLogDTOï¼‰å¹¶è¿”å›ç»™åç«¯ã€‚</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">const</span> <span class="attr">data</span>: <span class="variable constant_">API</span>.<span class="property">BookAndLogDTO</span>[] = bookDTOArray.<span class="title function_">map</span>(<span class="function">(<span class="params">item, index</span>) =&gt;</span> (&#123;</span><br><span class="line">      <span class="attr">bookDTO</span>: item,</span><br><span class="line">      <span class="attr">bookLogDTO</span>: bookLogDTOArray[index]</span><br><span class="line">    &#125;));</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;data&quot;</span>)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(data)</span><br><span class="line">    <span class="comment">// 1111111111setFormData(props.detailData);</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (props.<span class="property">detailData</span>) &#123;</span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">await</span> <span class="title function_">lendBooks</span>(data);</span><br><span class="line">        <span class="comment">// setFormData([]);</span></span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">        message.<span class="title function_">error</span>(<span class="string">&#x27;å€Ÿå‡ºå¤±è´¥&#x27;</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line">    props.<span class="title function_">onClose</span>(<span class="literal">true</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">ModalForm</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">width</span>=<span class="string">&#123;700&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">onFinish</span>=<span class="string">&#123;onFinish&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">formRef</span>=<span class="string">&#123;form&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">modalProps</span>=<span class="string">&#123;&#123;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">destroyOnClose:</span> <span class="attr">true</span>,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">onCancel:</span> () =&gt;</span> props.onClose(false),</span></span><br><span class="line"><span class="language-xml">      &#125;&#125;</span></span><br><span class="line"><span class="language-xml">      title=&#123;props.detailData ? &#x27;å€Ÿå‡º&#x27; : &#x27;å€Ÿå‡º&#x27;&#125;</span></span><br><span class="line"><span class="language-xml">      open=&#123;props.visible&#125;</span></span><br><span class="line"><span class="language-xml">    &gt;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">ProForm.Group</span> &gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">ProFormText</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">name</span>=<span class="string">&#123;</span>`<span class="attr">readerName</span>`&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">label</span>=<span class="string">&quot;å€Ÿé˜…äºº&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">rules</span>=<span class="string">&#123;[</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            &#123;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">              <span class="attr">required:</span> <span class="attr">true</span>,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">              <span class="attr">message:</span> &#x27;<span class="attr">è¯·è¾“å…¥å€Ÿé˜…äººå§“å</span>ï¼&#x27;,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            &#125;,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          ]&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        /&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">ProFormDatePicker</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">name</span>=<span class="string">&#123;</span>`<span class="attr">borrowedTime</span>`&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">label</span>=<span class="string">&quot;å€Ÿå‡ºæ—¥æœŸ&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">initialValue</span>=<span class="string">&#123;moment()&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">ProForm.Group</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">ProTable</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">dataSource</span>=<span class="string">&#123;formData&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">columns</span>=<span class="string">&#123;[</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          &#123; <span class="attr">title:</span> &#x27;<span class="attr">ä¹¦å</span>&#x27;, <span class="attr">dataIndex:</span> &#x27;<span class="attr">name</span>&#x27; &#125;,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          &#123; <span class="attr">title:</span> &#x27;<span class="attr">å‡ºç‰ˆç¤¾</span>&#x27;, <span class="attr">dataIndex:</span> &#x27;<span class="attr">publisher</span>&#x27; &#125;,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          &#123; <span class="attr">title:</span> &#x27;<span class="attr">ä½œè€…</span>&#x27;, <span class="attr">dataIndex:</span> &#x27;<span class="attr">author</span>&#x27; &#125;,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          &#123; <span class="attr">title:</span> &#x27;<span class="attr">ISBN</span>&#x27;, <span class="attr">dataIndex:</span> &#x27;<span class="attr">isbn</span>&#x27; &#125;,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        ]&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">options</span>=<span class="string">&#123;false&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">search</span>=<span class="string">&#123;false&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">cardBordered</span>=<span class="string">&#123;false&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">ModalForm</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="åç«¯-7"><a href="#åç«¯-7" class="headerlink" title="åç«¯"></a>åç«¯</h4><p>BookService.javaæ·»åŠ </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> <span class="title function_">lendBook</span><span class="params">(BookAndLogDTO bookAndLogDTO)</span>;</span><br></pre></td></tr></table></figure><p>Impl.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">returnBook</span><span class="params">(BookDTO bookDTO)</span>&#123;</span><br><span class="line">    <span class="comment">//åªæœ‰ä¹¦ç±çŠ¶æ€ä¸æ˜¯â€œå€Ÿå‡ºâ€ï¼Œåˆ™æŠ¥é”™</span></span><br><span class="line">    Assert.isTrue(bookDTO.getStatus().equals(<span class="string">&quot;å€Ÿå‡º&quot;</span>), <span class="string">&quot;ä¹¦ç±æœªå€Ÿå‡º&quot;</span>);</span><br><span class="line">    <span class="comment">//ä¿®æ”¹ä¹¦ç±çŠ¶æ€ä¸ºå€Ÿå‡º</span></span><br><span class="line">    bookDTO.setStatus(<span class="string">&quot;åœ¨æ¶&quot;</span>);</span><br><span class="line">    <span class="comment">//æ›´æ–°ä¹¦ç±çŠ¶æ€</span></span><br><span class="line">    updateBook(bookDTO);</span><br><span class="line">    <span class="comment">//è¡¥å……å¯¹åº”å€Ÿé˜…æ—¥å¿—çš„è¿˜ä¹¦æ—¥æœŸ</span></span><br><span class="line">    bookLogMapper.insertTime(bookDTO);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>BookController.javaæ·»åŠ </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@PostMapping(&quot;returnBook&quot;)</span></span><br><span class="line"><span class="meta">@Privilege(&quot;return&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">returnBook</span><span class="params">(<span class="meta">@RequestBody</span> BookDTO bookDTO)</span> &#123;</span><br><span class="line">    bookService.returnBook(bookDTO);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>BookLogMapper.xmlä¸­æ·»åŠ å¯¹åº”è¯­å¥ï¼Œå®ç°è‡ªåŠ¨ä¸ºåŒ¹é…çš„æœ€æ–°çš„å¯¹åº”ä¹¦ç±æ·»åŠ è¿˜ä¹¦æ—¥æœŸ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- è·å–å¯¹åº”å€Ÿå‡ºä¹¦ç±çš„æ—¥å¿—è®°å½• --&gt;</span><br><span class="line">&lt;update id=&quot;insertTime&quot; parameterType=&quot;java.lang.Integer&quot;&gt;</span><br><span class="line">  update book_log</span><br><span class="line">  set return_time = now()</span><br><span class="line">  where book_id = #&#123;id,jdbcType=INTEGER&#125;</span><br><span class="line">  order by id desc</span><br><span class="line">  limit 1</span><br><span class="line">&lt;/update&gt;</span><br></pre></td></tr></table></figure><p>BookLogMapper.javaä¸­æ·»åŠ </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ›´æ–°éƒ¨é—¨æ•°æ®</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> bookDTO éƒ¨é—¨è¾“å…¥å¯¹è±¡</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> éƒ¨é—¨ç¼–ç </span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">Integer <span class="title function_">insertTime</span><span class="params">(BookDTO bookDTO)</span>;</span><br></pre></td></tr></table></figure><h3 id="å›¾è¡¨å±•ç¤º"><a href="#å›¾è¡¨å±•ç¤º" class="headerlink" title="å›¾è¡¨å±•ç¤º"></a>å›¾è¡¨å±•ç¤º</h3><p>tsç›´æ¥è¿æ¥mysqlè¡¨æ ¼</p><h2 id="5-é—®é¢˜"><a href="#5-é—®é¢˜" class="headerlink" title="5.é—®é¢˜"></a>5.é—®é¢˜</h2><h3 id="1-åˆ†é¡µæŸ¥è¯¢åç«¯xmlä¿®æ”¹é”™è¯¯"><a href="#1-åˆ†é¡µæŸ¥è¯¢åç«¯xmlä¿®æ”¹é”™è¯¯" class="headerlink" title="1.åˆ†é¡µæŸ¥è¯¢åç«¯xmlä¿®æ”¹é”™è¯¯"></a>1.<del>åˆ†é¡µæŸ¥è¯¢åç«¯xmlä¿®æ”¹é”™è¯¯</del></h3><p>ç…§ç€è¯¾ç¨‹è§†é¢‘è·‘åˆ†é¡µæŸ¥è¯¢çš„æ—¶å€™å‡ºç°äº†å¦‚å›¾æŠ¥é”™ï¼Œåç«¯åˆšå¼€å§‹å°±ä¼šåœæ­¢æ‰§è¡Œ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- è·å–åå­— --&gt;</span><br><span class="line">    &lt;select id=&quot;getByName&quot; resultType=&quot;BaseResultMap&quot;&gt;</span><br><span class="line">        select  *</span><br><span class="line">        from department</span><br><span class="line">        where department_name = *&#123;name&#125;</span><br><span class="line">    &lt;/select&gt;</span><br></pre></td></tr></table></figure><p><img src="E:\Files\Projects\CXCollege\software\Image\8.png" alt="8"></p><h4 id="è§£å†³æ–¹æ¡ˆ"><a href="#è§£å†³æ–¹æ¡ˆ" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h4><ul><li><h5 id="ä½¿ç”¨reultMap-æ—¶å¯ä»¥ç”¨-â€œBaseResultMapâ€"><a href="#ä½¿ç”¨reultMap-æ—¶å¯ä»¥ç”¨-â€œBaseResultMapâ€" class="headerlink" title="ä½¿ç”¨reultMap æ—¶å¯ä»¥ç”¨ â€œBaseResultMapâ€"></a>ä½¿ç”¨reultMap æ—¶å¯ä»¥ç”¨ â€œBaseResultMapâ€</h5></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">reultMap =&quot;BaseResultMap&quot;</span><br></pre></td></tr></table></figure><ul><li><h5 id="æˆ–ä½¿ç”¨-resultType-è¦å†™ç±»çš„å…¨åï¼ˆåŒ…å«åŒ…åï¼‰"><a href="#æˆ–ä½¿ç”¨-resultType-è¦å†™ç±»çš„å…¨åï¼ˆåŒ…å«åŒ…åï¼‰" class="headerlink" title="æˆ–ä½¿ç”¨ resultType è¦å†™ç±»çš„å…¨åï¼ˆåŒ…å«åŒ…åï¼‰"></a>æˆ–ä½¿ç”¨ resultType è¦å†™ç±»çš„å…¨åï¼ˆåŒ…å«åŒ…åï¼‰</h5></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">resultType=&quot;redlib.backend.model.Book&quot;</span><br></pre></td></tr></table></figure><h3 id="2-æ—¶é—´æ ¼å¼ä¸æ­£ç¡®"><a href="#2-æ—¶é—´æ ¼å¼ä¸æ­£ç¡®" class="headerlink" title="2.æ—¶é—´æ ¼å¼ä¸æ­£ç¡®"></a>2.<del>æ—¶é—´æ ¼å¼ä¸æ­£ç¡®</del></h3><p>ä½¿ç”¨ä»¥ä¸‹æ–¹æ³•æ·»åŠ æ³¨è§£çš„æ—¶å€™ï¼ŒSwaggerä¸­ä¼šå‡ºç°å¤šæ¡æ—¶é—´çš„jsonä¿¡æ¯</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@JsonFormat(pattern = &quot;yyyy-MM-dd&quot;)</span></span><br><span class="line"><span class="keyword">private</span> Date BookBoutime;</span><br></pre></td></tr></table></figure><img src="E:\Files\Projects\CXCollege\software\Image\4.png" alt="4" style="zoom:125%;" /><p>æ­¤å¤–ï¼Œåœ¨å‰ç«¯ç”ŸæˆDTOç±»æ—¶ä¹Ÿå‘ç°ä¼šç”Ÿæˆå¤šæ¡æ—¶é—´</p><img src="E:\Files\Projects\CXCollege\software\Image\7.png" alt="7"  /><h4 id="åŸå› "><a href="#åŸå› " class="headerlink" title="åŸå› "></a>åŸå› </h4><p>åç«¯DTOå‘½åä¸è§„èŒƒ</p><h4 id="è§£å†³æ–¹æ¡ˆ-1"><a href="#è§£å†³æ–¹æ¡ˆ-1" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h4><p>å°†å˜é‡å‘½åä½¿ç”¨é©¼å³°ç»“æ„ï¼Œä¸Book.javaåŒæ­¥ä¹‹åè§£å†³é—®é¢˜ï¼ˆä»¥ä¸Šæ‰€æœ‰ä»£ç é€‚å½“å¾®è°ƒï¼‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> redlib.backend.dto;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.fasterxml.jackson.annotation.JsonFormat;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.math.BigDecimal;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookDTO</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String isbn;</span><br><span class="line">    <span class="keyword">private</span> String author;</span><br><span class="line">    <span class="keyword">private</span> String publisher;</span><br><span class="line">    <span class="keyword">private</span> Double price;</span><br><span class="line">    <span class="keyword">private</span> String category;</span><br><span class="line">    <span class="meta">@JsonFormat(pattern = &quot;yyyy-MM-dd&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Date boughtTime;</span><br><span class="line">    <span class="meta">@JsonFormat(pattern = &quot;yyyy-MM-dd&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Date publishedTime;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-selectedRowKeysåˆ é™¤é—®é¢˜"><a href="#3-selectedRowKeysåˆ é™¤é—®é¢˜" class="headerlink" title="3.selectedRowKeysåˆ é™¤é—®é¢˜"></a>3.<del>selectedRowKeysåˆ é™¤é—®é¢˜</del></h3><p>æµ‹è¯•å‰ç«¯æ—¶å‘ç°åˆ é™¤æŸä¸€è¡Œæ—¶ä¼šé€‰ä¸­æ‰€æœ‰å›¾ä¹¦</p><h4 id="åŸå› -1"><a href="#åŸå› -1" class="headerlink" title="åŸå› "></a>åŸå› </h4><p>ç”±äºåœ¨ InputDialog\index.tsx ä¸­ä¿®æ”¹ä¸º</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="attr">data</span>: <span class="variable constant_">API</span>.<span class="property">BookDTO</span> = &#123;</span><br><span class="line">    <span class="attr">bookId</span>: props.<span class="property">detailData</span>?.<span class="property">bookId</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h4 id="è§£å†³æ–¹æ¡ˆ-2"><a href="#è§£å†³æ–¹æ¡ˆ-2" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h4><p>éœ€è¦ä¿®æ”¹ rowKey å¦‚ä¸‹</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">actionRef=&#123;refAction&#125;</span><br><span class="line">rowKey=<span class="string">&quot;bookId&quot;</span></span><br></pre></td></tr></table></figure><h3 id="4-ä»·æ ¼ä½¿ç”¨Decimalæ— æ³•æ˜¾ç¤º"><a href="#4-ä»·æ ¼ä½¿ç”¨Decimalæ— æ³•æ˜¾ç¤º" class="headerlink" title="4.ä»·æ ¼ä½¿ç”¨Decimalæ— æ³•æ˜¾ç¤º"></a>4.<del>ä»·æ ¼ä½¿ç”¨Decimalæ— æ³•æ˜¾ç¤º</del></h3><p>ä¹¦ç±ä»·æ ¼ä½¿ç”¨Decimalç±»å‹çš„æ—¶å€™ï¼Œå‰ç«¯æ–°å¢æ­£å¸¸ï¼Œä½†æ˜¯å¯¹æŸä¸€æœ¬ä¹¦ä¿®æ”¹å‚æ•°æ—¶ï¼Œæ— æ³•æ˜¾ç¤ºä»·æ ¼</p><h4 id="è§£å†³æ–¹æ¡ˆ-3"><a href="#è§£å†³æ–¹æ¡ˆ-3" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h4><p>åŸå› æœªçŸ¥ï¼Œæœ‰ä¸¤ç§ä¿®æ”¹æ–¹æ³•</p><p>1.MySQLï¼Œå‰åç«¯åŒæ—¶ä¿®æ”¹ä¸ºIntegerï¼Œå°è¯•è®¾ç½®å°æ•°ä½æ•°ä¸º2ï¼Œå¯ä»¥è§£å†³æ˜¾ç¤ºé—®é¢˜ï¼Œä½†æ— æ³•æ˜¾ç¤ºå°æ•°ã€‚</p><p>2.MySQLï¼Œå‰åç«¯åŒæ—¶ä¿®æ”¹ä¸ºDoubleï¼ŒåŒæ—¶è®¾ç½®å°æ•°ä½æ•°ä¸º2ï¼Œæµ‹è¯•å‘ç°å¯ä»¥è§£å†³æ˜¾ç¤ºé—®é¢˜ï¼Œå¹¶è§£å†³ä»·æ ¼æ— æ³•æ˜¾ç¤ºå°æ•°é—®é¢˜ã€‚</p><h3 id="5-Mysqlè®¾ç½®ä¸»é”®è‡ªå¢ï¼Œåˆ é™¤æ•°æ®åï¼Œä¸»é”®idä¾ç„¶ä»åˆ é™¤ä½ç½®å¢åŠ "><a href="#5-Mysqlè®¾ç½®ä¸»é”®è‡ªå¢ï¼Œåˆ é™¤æ•°æ®åï¼Œä¸»é”®idä¾ç„¶ä»åˆ é™¤ä½ç½®å¢åŠ " class="headerlink" title="5.Mysqlè®¾ç½®ä¸»é”®è‡ªå¢ï¼Œåˆ é™¤æ•°æ®åï¼Œä¸»é”®idä¾ç„¶ä»åˆ é™¤ä½ç½®å¢åŠ "></a>5.<del>Mysqlè®¾ç½®ä¸»é”®è‡ªå¢ï¼Œåˆ é™¤æ•°æ®åï¼Œä¸»é”®idä¾ç„¶ä»åˆ é™¤ä½ç½®å¢åŠ </del></h3><h4 id="ä¸æ˜¯é—®é¢˜ï¼Œæ— éœ€è§£å†³"><a href="#ä¸æ˜¯é—®é¢˜ï¼Œæ— éœ€è§£å†³" class="headerlink" title="ä¸æ˜¯é—®é¢˜ï¼Œæ— éœ€è§£å†³"></a>ä¸æ˜¯é—®é¢˜ï¼Œæ— éœ€è§£å†³</h4><h3 id="6-å‰ç«¯æ— æ³•å®ç°æŸ¥è¯¢ä¹¦ç±"><a href="#6-å‰ç«¯æ— æ³•å®ç°æŸ¥è¯¢ä¹¦ç±" class="headerlink" title="6.å‰ç«¯æ— æ³•å®ç°æŸ¥è¯¢ä¹¦ç±"></a>6.<del>å‰ç«¯æ— æ³•å®ç°æŸ¥è¯¢ä¹¦ç±</del></h3><h4 id="åŸå› -2"><a href="#åŸå› -2" class="headerlink" title="åŸå› "></a>åŸå› </h4><p>ä¿®æ”¹MySQLè¡¨æ ¼æ—¶ï¼Œxmlæ–‡ä»¶å¿˜è®°åŒæ­¥æ›´æ”¹ï¼Œä¿®æ”¹åæˆåŠŸå®ç°æŸ¥è¯¢</p><h4 id="è§£å†³æ–¹æ¡ˆ-4"><a href="#è§£å†³æ–¹æ¡ˆ-4" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- è·å–åå­—ä¸ªæ•°(åˆ†é¡µ) --&gt;</span><br><span class="line"> &lt;select id=&quot;count&quot; resultType=&quot;integer&quot;&gt;</span><br><span class="line">   select count(*)</span><br><span class="line">   from book</span><br><span class="line">   &lt;where&gt;</span><br><span class="line">     &lt;if test=&quot;name != null&quot;&gt;</span><br><span class="line">       name like #&#123;name&#125;</span><br><span class="line">     &lt;/if&gt;</span><br><span class="line">   &lt;/where&gt;</span><br><span class="line"> &lt;/select&gt;</span><br><span class="line"></span><br><span class="line"> &lt;!-- è·å–ä¹¦ç±(åˆ†é¡µ) --&gt;</span><br><span class="line"> &lt;select id=&quot;list&quot; resultMap=&quot;BaseResultMap&quot;&gt;</span><br><span class="line">   select</span><br><span class="line">   &lt;include refid=&quot;Base_Column_List&quot;/&gt;</span><br><span class="line">   from book</span><br><span class="line">   &lt;where&gt;</span><br><span class="line">     &lt;if test=&quot;queryDTO.name != null&quot;&gt;</span><br><span class="line">       name like #&#123;queryDTO.name&#125;</span><br><span class="line">     &lt;/if&gt;</span><br><span class="line">   &lt;/where&gt;</span><br><span class="line">   limit #&#123;offset&#125;, #&#123;limit&#125;</span><br><span class="line"> &lt;/select&gt;</span><br></pre></td></tr></table></figure><h3 id="7-BookLogä¸­listæ–¹æ³•æ‰§è¡Œæ—¶æŠ¥é”™"><a href="#7-BookLogä¸­listæ–¹æ³•æ‰§è¡Œæ—¶æŠ¥é”™" class="headerlink" title="7.BookLogä¸­listæ–¹æ³•æ‰§è¡Œæ—¶æŠ¥é”™"></a>7.<del>BookLogä¸­listæ–¹æ³•æ‰§è¡Œæ—¶æŠ¥é”™</del></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">There is no getter <span class="keyword">for</span> property named <span class="string">&#x27;book_id&#x27;</span> in <span class="string">&#x27;class redlib.backend.dto.query.BookLogQueryDTO</span></span><br></pre></td></tr></table></figure><h4 id="åŸå› -3"><a href="#åŸå› -3" class="headerlink" title="åŸå› "></a>åŸå› </h4><p>MySQLä¸­åˆ†é¡µæŸ¥è¯¢å‚æ•°è®¾ç½®é”™è¯¯</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- è·å–åå­—ä¸ªæ•°(åˆ†é¡µ) --&gt;</span><br><span class="line">&lt;select id=&quot;count&quot; resultType=&quot;integer&quot;&gt;</span><br><span class="line">  select count(*)</span><br><span class="line">  from book_log</span><br><span class="line">  &lt;where&gt;</span><br><span class="line">    &lt;if test=&quot;id != null&quot;&gt;</span><br><span class="line">      id like #&#123;id&#125;</span><br><span class="line">    &lt;/if&gt;</span><br><span class="line">  &lt;/where&gt;</span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></table></figure><h4 id="è§£å†³æ–¹æ¡ˆ-5"><a href="#è§£å†³æ–¹æ¡ˆ-5" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h4><p>ä¿®æ”¹ä¸ºbook_logåˆ—è¡¨ä¸­çš„idæ”¹ä¸ºbookNameå­—æ®µ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- è·å–åå­—ä¸ªæ•°(åˆ†é¡µ) --&gt;</span><br><span class="line">&lt;select id=&quot;count&quot; resultType=&quot;integer&quot;&gt;</span><br><span class="line">  select count(*)</span><br><span class="line">  from book_log</span><br><span class="line">  &lt;where&gt;</span><br><span class="line">    &lt;if test=&quot;bookName != null&quot;&gt;</span><br><span class="line">      book_name like #&#123;bookName&#125;</span><br><span class="line">    &lt;/if&gt;</span><br><span class="line">  &lt;/where&gt;</span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></table></figure><h3 id="8-swaggerä¸­æµ‹è¯•åˆ é™¤booklogæ—¶æŠ¥é”™"><a href="#8-swaggerä¸­æµ‹è¯•åˆ é™¤booklogæ—¶æŠ¥é”™" class="headerlink" title="8.swaggerä¸­æµ‹è¯•åˆ é™¤booklogæ—¶æŠ¥é”™"></a>8.<del>swaggerä¸­æµ‹è¯•åˆ é™¤booklogæ—¶æŠ¥é”™</del></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Invalid bound <span class="title function_">statement</span> <span class="params">(not found)</span>: redlib.backend.dao.BookLogMapper.deleteByCodes</span><br></pre></td></tr></table></figure><h4 id="åŸå› -4"><a href="#åŸå› -4" class="headerlink" title="åŸå› "></a>åŸå› </h4><p>xmlæ–‡ä»¶ä¸­å¿˜è®°æ·»åŠ MySQLè¯­å¥</p><h4 id="è§£å†³æ–¹æ¡ˆ-6"><a href="#è§£å†³æ–¹æ¡ˆ-6" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- æ‰¹é‡åˆ é™¤ --&gt;</span><br><span class="line">&lt;update id=&quot;deleteByCodes&quot;&gt;</span><br><span class="line">  delete from book</span><br><span class="line">  where id in</span><br><span class="line">  &lt;foreach item=&quot;item&quot; index=&quot;index&quot; collection=&quot;codeList&quot; open=&quot;(&quot; separator=&quot;,&quot; close=&quot;)&quot;&gt;</span><br><span class="line">    #&#123;item&#125;</span><br><span class="line">  &lt;/foreach&gt;</span><br><span class="line">&lt;/update&gt;</span><br></pre></td></tr></table></figure><h4 id="æ³¨é‡Š"><a href="#æ³¨é‡Š" class="headerlink" title="æ³¨é‡Š"></a>æ³¨é‡Š</h4><p>æ­¤å‡½æ•°åœ¨æ—¥å¿—è®°å½•ä¸­ä¸å¤ªéœ€è¦ï¼Œåç»­è€ƒè™‘åˆ é™¤</p><h3 id="9-åˆ†é¡µæŸ¥è¯¢ï¼Œå¤šç§æ¡ä»¶åŒæ—¶æŸ¥æ‰¾æ—¶æ²¡æ‰¾åˆ°å¯¹è±¡ä¼šæŠ¥é”™"><a href="#9-åˆ†é¡µæŸ¥è¯¢ï¼Œå¤šç§æ¡ä»¶åŒæ—¶æŸ¥æ‰¾æ—¶æ²¡æ‰¾åˆ°å¯¹è±¡ä¼šæŠ¥é”™" class="headerlink" title="9.åˆ†é¡µæŸ¥è¯¢ï¼Œå¤šç§æ¡ä»¶åŒæ—¶æŸ¥æ‰¾æ—¶æ²¡æ‰¾åˆ°å¯¹è±¡ä¼šæŠ¥é”™"></a>9.<del>åˆ†é¡µæŸ¥è¯¢ï¼Œå¤šç§æ¡ä»¶åŒæ—¶æŸ¥æ‰¾æ—¶æ²¡æ‰¾åˆ°å¯¹è±¡ä¼šæŠ¥é”™</del></h3><h4 id="åŸå› -5"><a href="#åŸå› -5" class="headerlink" title="åŸå› "></a>åŸå› </h4><p>sqlè¯­å¥ä¸­ï¼Œå½“ä¸¤ä¸ªif éƒ½ä¸ç­‰äºnullçš„æ—¶å€™ï¼Œä¸¤ä¸ªsqlè¯­å¥ç”±äºæ²¡æœ‰ä¸œè¥¿è¿æ¥èµ·æ¥ï¼Œä¼šäº§ç”ŸæŠ¥é”™</p><h4 id="è§£å†³æ–¹æ¡ˆ-7"><a href="#è§£å†³æ–¹æ¡ˆ-7" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h4><p>åœ¨æ¯ä¸ªæ£€ç´¢çš„ sql è¯­å¥å‰æ·»åŠ ä½¿ç”¨ and è¿æ¥</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;select id=&quot;list&quot; resultMap=&quot;BaseResultMap&quot;&gt;</span><br><span class="line">  select</span><br><span class="line">  &lt;include refid=&quot;Base_Column_List&quot;/&gt;</span><br><span class="line">  from book_log</span><br><span class="line">  &lt;where&gt;</span><br><span class="line">    &lt;if test=&quot;queryDTO.readerName != null&quot;&gt;</span><br><span class="line">      and reader_name like #&#123;queryDTO.readerName&#125;</span><br><span class="line">    &lt;/if&gt;</span><br><span class="line">    &lt;if test=&quot;queryDTO.bookIsbn != null&quot;&gt;</span><br><span class="line">      and book_isbn like #&#123;queryDTO.bookIsbn&#125;</span><br><span class="line">    &lt;/if&gt;</span><br><span class="line">    &lt;if test=&quot;queryDTO.bookId != null&quot;&gt;</span><br><span class="line">      and book_id like #&#123;queryDTO.bookId&#125;</span><br><span class="line">    &lt;/if&gt;</span><br><span class="line">    &lt;if test=&quot;queryDTO.bookName != null&quot;&gt;</span><br><span class="line">      and book_name like #&#123;queryDTO.bookName&#125;</span><br><span class="line">    &lt;/if&gt;</span><br><span class="line">  &lt;/where&gt;</span><br><span class="line">  &lt;if test=&quot;queryDTO.orderBy != null&quot;&gt;</span><br><span class="line">    order by $&#123;queryDTO.orderBy&#125;</span><br><span class="line">  &lt;/if&gt;</span><br><span class="line">  &lt;if test=&quot;queryDTO.orderBy == null&quot;&gt;</span><br><span class="line">    order by id desc</span><br><span class="line">  &lt;/if&gt;</span><br><span class="line">  limit #&#123;offset&#125;, #&#123;limit&#125;</span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></table></figure><h3 id="10-ä¹¦ç±ç‚¹å€Ÿé˜…ä¹‹åç¡®å®šï¼Œå‘ç°ä¸¤ä¸ªè¡¨æ ¼ä¸­éƒ½ä¼šæœ‰å­—æ®µä¸¢å¤±"><a href="#10-ä¹¦ç±ç‚¹å€Ÿé˜…ä¹‹åç¡®å®šï¼Œå‘ç°ä¸¤ä¸ªè¡¨æ ¼ä¸­éƒ½ä¼šæœ‰å­—æ®µä¸¢å¤±" class="headerlink" title="10.ä¹¦ç±ç‚¹å€Ÿé˜…ä¹‹åç¡®å®šï¼Œå‘ç°ä¸¤ä¸ªè¡¨æ ¼ä¸­éƒ½ä¼šæœ‰å­—æ®µä¸¢å¤±"></a>10.<del>ä¹¦ç±ç‚¹å€Ÿé˜…ä¹‹åç¡®å®šï¼Œå‘ç°ä¸¤ä¸ªè¡¨æ ¼ä¸­éƒ½ä¼šæœ‰å­—æ®µä¸¢å¤±</del></h3><h4 id="åŸå› -6"><a href="#åŸå› -6" class="headerlink" title="åŸå› "></a>åŸå› </h4><p>å‰ç«¯ä»£ç åº•å±‚ä¸ºå°†é€‰ä¸­è¡Œä¸­çš„æ•°æ®ä¼ é€’ç»™å¯¹è¯æ¡†ï¼Œç„¶åå¯¹è¯æ¡†å†ä¼ é€’ç»™åç«¯è¿›è¡Œæ›´æ–°</p><h4 id="è§£å†³æ–¹æ¡ˆ-8"><a href="#è§£å†³æ–¹æ¡ˆ-8" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h4><p>ä¸»é¡µé¢å‘å¯¹è¯æ¡†ä¸­ä¼ é€’æ•°æ®æ—¶ä¼ é€’å…¨éƒ¨æ•°æ®ï¼Œåç«¯ä½¿ç”¨hiddenå±æ€§ï¼Œéšè—ä¸éœ€è¦çš„è¡¨æ ¼ï¼Œå³å¯å®ç°ä¼ é€’æ•°æ®åˆä¸æ˜¾ç¤º</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="title class_">ProFormText</span></span><br><span class="line">name=<span class="string">&quot;classification&quot;</span></span><br><span class="line">label=<span class="string">&quot;classification&quot;</span></span><br><span class="line">hidden</span><br><span class="line">/&gt;</span><br></pre></td></tr></table></figure><h3 id="11-å€Ÿä¹¦æ—¶æ— æ³•å‘å¯¹è¯æ¡†ä¼ é€’å‚æ•°"><a href="#11-å€Ÿä¹¦æ—¶æ— æ³•å‘å¯¹è¯æ¡†ä¼ é€’å‚æ•°" class="headerlink" title="11.å€Ÿä¹¦æ—¶æ— æ³•å‘å¯¹è¯æ¡†ä¼ é€’å‚æ•°"></a>11.<del>å€Ÿä¹¦æ—¶æ— æ³•å‘å¯¹è¯æ¡†ä¼ é€’å‚æ•°</del></h3><h4 id="åŸå› -7"><a href="#åŸå› -7" class="headerlink" title="åŸå› "></a>åŸå› </h4><p>ä¸€å¼€å§‹å°†typescriptsåˆ—è¡¨çš„èµ·å§‹ä¸‹æ ‡ä¸MySQLè®°æ··ï¼Œä»¥ä¸ºä¹Ÿæ˜¯ä»1å¼€å§‹ï¼Œä»£ç å¦‚ä¸‹</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">setBookLog</span>(records[<span class="number">1</span>]);</span><br></pre></td></tr></table></figure><h4 id="è§£å†³æ–¹æ¡ˆ-9"><a href="#è§£å†³æ–¹æ¡ˆ-9" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h4><p>typescriptsåˆ—è¡¨çš„èµ·å§‹ä¸‹æ ‡ä»0å¼€å§‹ï¼Œä¿®æ”¹recordsä¸‹æ ‡ä¸º0ï¼ˆé¦–ä¸ªå…ƒç´ ï¼‰</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">setBookLog</span>(records[<span class="number">0</span>]);</span><br></pre></td></tr></table></figure><h3 id="12-å¤šä½™æ¥å£åˆ é™¤ï¼ˆæš‚æœªè§£å†³ï¼Œåéœ€è€ƒè™‘ï¼‰"><a href="#12-å¤šä½™æ¥å£åˆ é™¤ï¼ˆæš‚æœªè§£å†³ï¼Œåéœ€è€ƒè™‘ï¼‰" class="headerlink" title="12.å¤šä½™æ¥å£åˆ é™¤ï¼ˆæš‚æœªè§£å†³ï¼Œåéœ€è€ƒè™‘ï¼‰"></a>12.<del>å¤šä½™æ¥å£åˆ é™¤ï¼ˆæš‚æœªè§£å†³ï¼Œåéœ€è€ƒè™‘ï¼‰</del></h3><p>ç”±äºBookLogåç«¯æ¡†æ¶ä¸ºBookå¤åˆ¶ä¿®æ”¹ï¼Œè®¸å¤šæ²¡å¿…è¦å­˜åœ¨çš„æ¥å£åç»­è€ƒè™‘åˆ é™¤ï¼ˆæ­¤å¤„å°±æš‚æ—¶æœªå†™æ¥å£æ–‡æ¡£ï¼‰</p><h3 id="13-lendBookå‡½æ•°æŠ¥é”™"><a href="#13-lendBookå‡½æ•°æŠ¥é”™" class="headerlink" title="13.lendBookå‡½æ•°æŠ¥é”™"></a>13.<del>lendBookå‡½æ•°æŠ¥é”™</del></h3><p>æŠ¥é”™å¦‚ä¸‹</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">org.springframework.validation.BeanPropertyBindingResult<span class="punctuation">:</span> <span class="number">2</span> errors Field error in object &#x27;bookDTO&#x27; on field &#x27;boughtTime&#x27;<span class="punctuation">:</span> rejected value <span class="punctuation">[</span><span class="number">2023</span><span class="number">-04</span><span class="number">-01</span><span class="punctuation">]</span>; codes <span class="punctuation">[</span>typeMismatch.bookDTO.boughtTime<span class="punctuation">,</span>typeMismatch.boughtTime<span class="punctuation">,</span>typeMismatch.java.util.Date<span class="punctuation">,</span>typeMismatch<span class="punctuation">]</span>; arguments <span class="punctuation">[</span>org.springframework.context.support.DefaultMessageSourceResolvable<span class="punctuation">:</span> codes <span class="punctuation">[</span>bookDTO.boughtTime<span class="punctuation">,</span>boughtTime<span class="punctuation">]</span>; arguments <span class="punctuation">[</span><span class="punctuation">]</span>; default message <span class="punctuation">[</span>boughtTime<span class="punctuation">]</span><span class="punctuation">]</span>; default message <span class="punctuation">[</span>Failed to convert property value of type &#x27;java.lang.String&#x27; to required type &#x27;java.util.Date&#x27; for property &#x27;boughtTime&#x27;; Failed to convert from type <span class="punctuation">[</span>java.lang.String<span class="punctuation">]</span> to type <span class="punctuation">[</span>@com.fasterxml.jackson.annotation.JsonFormat java.util.Date<span class="punctuation">]</span> for value &#x27;<span class="number">2023</span><span class="number">-04</span><span class="number">-01</span>&#x27;<span class="punctuation">]</span> Field error in object &#x27;bookDTO&#x27; on field &#x27;publishedTime&#x27;<span class="punctuation">:</span> rejected value <span class="punctuation">[</span><span class="number">2023</span><span class="number">-04</span><span class="number">-01</span><span class="punctuation">]</span>; codes <span class="punctuation">[</span>typeMismatch.bookDTO.publishedTime<span class="punctuation">,</span>typeMismatch.publishedTime<span class="punctuation">,</span>typeMismatch.java.util.Date<span class="punctuation">,</span>typeMismatch<span class="punctuation">]</span>; arguments <span class="punctuation">[</span>org.springframework.context.support.DefaultMessageSourceResolvable<span class="punctuation">:</span> codes <span class="punctuation">[</span>bookDTO.publishedTime<span class="punctuation">,</span>publishedTime<span class="punctuation">]</span>; arguments <span class="punctuation">[</span><span class="punctuation">]</span>; default message <span class="punctuation">[</span>publishedTime<span class="punctuation">]</span><span class="punctuation">]</span>; default message <span class="punctuation">[</span>Failed to convert property value of type &#x27;java.lang.String&#x27; to required type &#x27;java.util.Date&#x27; for property &#x27;publishedTime&#x27;; Failed to convert from type <span class="punctuation">[</span>java.lang.String<span class="punctuation">]</span> to type <span class="punctuation">[</span>@com.fasterxml.jackson.annotation.JsonFormat java.util.Date<span class="punctuation">]</span> for value &#x27;<span class="number">2023</span><span class="number">-04</span><span class="number">-01</span>&#x27;<span class="punctuation">]</span></span><br></pre></td></tr></table></figure><h4 id="åŸå› -8"><a href="#åŸå› -8" class="headerlink" title="åŸå› "></a>åŸå› </h4><p>controllerå¯¹åº”å‡½æ•°ä¸­å¿˜è®°æ·»åŠ æ³¨è§£@RequestBody </p><h4 id="è§£å†³æ–¹æ¡ˆ-10"><a href="#è§£å†³æ–¹æ¡ˆ-10" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">returnBook</span><span class="params">(<span class="meta">@RequestBody</span> BookDTO bookDTO)</span> &#123;</span><br><span class="line">    bookService.returnBook(bookDTO);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="14-å€Ÿå‡ºã€å½’è¿˜Assertä»ç„¶ä¸ç¬¦åˆé€»è¾‘"><a href="#14-å€Ÿå‡ºã€å½’è¿˜Assertä»ç„¶ä¸ç¬¦åˆé€»è¾‘" class="headerlink" title="14.å€Ÿå‡ºã€å½’è¿˜Assertä»ç„¶ä¸ç¬¦åˆé€»è¾‘"></a>14.<del>å€Ÿå‡ºã€å½’è¿˜Assertä»ç„¶ä¸ç¬¦åˆé€»è¾‘</del></h3><p>å€Ÿå‡ºçš„ä¹¦æœ¬ï¼Œä»ç„¶å¯ä»¥å€Ÿå‡ºã€‚åœ¨åœ¨æ¶çš„ä¹¦æœ¬ï¼Œä»ç„¶å¯ä»¥å½’è¿˜ã€‚</p><blockquote><p>ç‚¹è¿˜ä¹¦æŒ‰é’®çš„æ—¶å€™ï¼Œå‰ç«¯æŠŠä¹¦ç±ä¿¡æ¯ä¼ é€’ç»™åç«¯ï¼Œåç«¯æ¥æ”¶åé¦–å…ˆç”¨Assertåˆ¤æ–­ä¹¦ç±çŠ¶æ€æ˜¯å¦ç¬¦åˆé€»è¾‘ï¼Œç„¶åä¿®æ”¹ä¸ºä¹¦ç±çŠ¶æ€ä¸ºâ€œåœ¨æ¶â€ã€‚ä½†æ˜¯æˆ‘å°è¯•å‘ç°ä¸ç®¡æ€ä¹ˆä¿®æ”¹Assertè¯­æ³•ï¼ˆå°è¯•è¿‡&#x3D;&#x3D;å’Œï¼&#x3D;ç­‰ï¼‰ï¼Œä½†å‘ç°éƒ½è¾¾ä¸åˆ°æƒ³è¦çš„æ•ˆæœ</p></blockquote><h4 id="åŸå› -9"><a href="#åŸå› -9" class="headerlink" title="åŸå› "></a>åŸå› </h4><p>javaæ¯”è¾ƒå­—ç¬¦ä¸²ç›¸ç­‰ï¼Œä¸èƒ½ç”¨&#x3D;&#x3D;</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Assert.isTrue(bookDTO.getStatus()!=<span class="string">&quot;å€Ÿå‡º&quot;</span>, <span class="string">&quot;ä¹¦ç±åœ¨æ¶ï¼&quot;</span>);</span><br></pre></td></tr></table></figure><h4 id="è§£å†³æ–¹æ¡ˆ-11"><a href="#è§£å†³æ–¹æ¡ˆ-11" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//åªæœ‰ä¹¦ç±çŠ¶æ€ä¸æ˜¯â€œå€Ÿå‡ºâ€ï¼Œåˆ™æŠ¥é”™</span></span><br><span class="line"><span class="comment">//å³ï¼Œå‰è¡¨è¾¾å¼ä¸æˆç«‹æ—¶æŠ¥é”™</span></span><br><span class="line">Assert.isTrue(bookDTO.getStatus().equals(<span class="string">&quot;å€Ÿå‡º&quot;</span>), <span class="string">&quot;ä¹¦ç±åœ¨æ¶&quot;</span>);</span><br></pre></td></tr></table></figure><h3 id="15-å€Ÿå‡ºæˆåŠŸåæ²¡æœ‰æç¤º"><a href="#15-å€Ÿå‡ºæˆåŠŸåæ²¡æœ‰æç¤º" class="headerlink" title="15.å€Ÿå‡ºæˆåŠŸåæ²¡æœ‰æç¤º"></a>15.<del>å€Ÿå‡ºæˆåŠŸåæ²¡æœ‰æç¤º</del></h3><h4 id="åŸå› -10"><a href="#åŸå› -10" class="headerlink" title="åŸå› "></a>åŸå› </h4><p>ç”±äºåç«¯è¿”å›å€¼ä¸ºvoidï¼Œawait lendBooks(data)çš„è¿”å›å€¼å¯èƒ½ä¸€ç›´ä¸ºundefinedï¼Œå¯¼è‡´æ— æ³•åˆ¤æ–­</p><p>å¯èƒ½åŸå› </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">æ ¹æ®æä¾›çš„ä»£ç ï¼Œä¼¼ä¹ try-catch å—åªæ•è·åœ¨ await lendBooks(data) è°ƒç”¨æœŸé—´å‘ç”Ÿçš„é”™è¯¯ã€‚ä»»ä½•åœ¨åç«¯ä»£ç ä¸­å‘ç”Ÿçš„é”™è¯¯ï¼Œä¾‹å¦‚ Assert é”™è¯¯ï¼Œéƒ½ä¸ä¼šè¢«è¿™ä¸ª try-catch å—æ•è·ã€‚</span><br><span class="line"></span><br><span class="line">å¦‚æœåç«¯ä»£ç å‘ç”Ÿé”™è¯¯å¯¼è‡´è¯·æ±‚å¤±è´¥ï¼Œé‚£ä¹ˆ await lendBooks(data) è°ƒç”¨å¯èƒ½ä¼šæ‹’ç»å¹¶æŠ›å‡ºä¸€ä¸ªé”™è¯¯ï¼Œå¯¼è‡´ catch å—æ‰§è¡Œå¹¶æ˜¾ç¤º &#x27;å€Ÿå‡ºå¤±è´¥&#x27; æ¶ˆæ¯ã€‚ä½†æ˜¯ï¼Œå¦‚æœåç«¯ä»£ç è¿”å›æˆåŠŸçš„å“åº”ï¼Œä½†æ˜¯åŒ…å«ä¸€ä¸ªé”™è¯¯æ¶ˆæ¯è¡¨ç¤ºæ“ä½œå¤±è´¥ï¼Œé‚£ä¹ˆ await lendBooks(data) è°ƒç”¨ä»å¯èƒ½æˆåŠŸè§£æï¼Œå¹¶æ˜¾ç¤º &#x27;å€Ÿå‡ºæˆåŠŸ&#x27; æ¶ˆæ¯ã€‚</span><br><span class="line"></span><br><span class="line">ä¸ºç¡®ä¿åç«¯ä»£ç ä¸­çš„é”™è¯¯å¾—åˆ°æ­£ç¡®å¤„ç†ï¼Œé‡è¦çš„æ˜¯åœ¨åç«¯ä»£ç ä¸­ä¹ŸåŒ…æ‹¬é”™è¯¯å¤„ç†ï¼Œå¹¶ç¡®ä¿å®ƒè¿”å›é€‚å½“çš„å“åº”ä»¥æŒ‡ç¤ºæˆåŠŸæˆ–å¤±è´¥ã€‚æ­¤å¤–ï¼Œå‰ç«¯ä»£ç åº”æ›´æ–°ä»¥æ­£ç¡®å¤„ç†è¿™äº›å“åº”ï¼Œå¹¶å‘ç”¨æˆ·æ˜¾ç¤ºé€‚å½“çš„æ¶ˆæ¯ã€‚</span><br></pre></td></tr></table></figure><p>åç«¯ä½¿ç”¨assertå³ä½¿successä¸ºfalseå‰ç«¯ä¹Ÿä¼šæ˜¾ç¤ºæ­£ç¡®ï¼Œå³æ— è®ºå¦‚ä½•éƒ½ä¼šæ‰§è¡Œåˆ°ï¼Œéƒ½ä¼šå¼¹å‡ºæ­¤æ¡†</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">await</span> <span class="title function_">lendBooks</span>(data);</span><br><span class="line">    message.<span class="title function_">success</span>(<span class="string">&#x27;å€Ÿå‡ºæˆåŠŸ&#x27;</span>);</span><br><span class="line">&#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    message.<span class="title function_">error</span>(<span class="string">&#x27;å€Ÿå‡ºå¤±è´¥&#x27;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="è§£å†³æ–¹æ¡ˆ-12"><a href="#è§£å†³æ–¹æ¡ˆ-12" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h4><h5 id="1-ç¬¬ä¸€ç§è§£å†³æ–¹æ¡ˆï¼ˆå®é™…é‡‡ç”¨æ­¤ç§æ–¹æ¡ˆå®ç°æ˜¾ç¤ºçš„æ•ˆæœï¼Œä½†ä¸è§„èŒƒï¼‰"><a href="#1-ç¬¬ä¸€ç§è§£å†³æ–¹æ¡ˆï¼ˆå®é™…é‡‡ç”¨æ­¤ç§æ–¹æ¡ˆå®ç°æ˜¾ç¤ºçš„æ•ˆæœï¼Œä½†ä¸è§„èŒƒï¼‰" class="headerlink" title="1.ç¬¬ä¸€ç§è§£å†³æ–¹æ¡ˆï¼ˆå®é™…é‡‡ç”¨æ­¤ç§æ–¹æ¡ˆå®ç°æ˜¾ç¤ºçš„æ•ˆæœï¼Œä½†ä¸è§„èŒƒï¼‰"></a>1.ç¬¬ä¸€ç§è§£å†³æ–¹æ¡ˆï¼ˆå®é™…é‡‡ç”¨æ­¤ç§æ–¹æ¡ˆå®ç°æ˜¾ç¤ºçš„æ•ˆæœï¼Œä½†ä¸è§„èŒƒï¼‰</h5><p>å‰ç«¯é€šè¿‡éå†å€Ÿè¿˜å¤šæœ¬ä¹¦ï¼Œå¹¶ä¸”åˆ¤æ–­ä¹¦ç±çŠ¶æ€ï¼ˆå³é€šè¿‡å‰ç«¯æ¨¡æ‹Ÿåç«¯AssertåŠŸèƒ½ï¼‰</p><p>å€Ÿä¹¦</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (props.<span class="property">detailData</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> sum = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; data.<span class="property">length</span>; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span>(data[i].<span class="property">bookDTO</span>?.<span class="property">status</span>===<span class="string">&quot;åœ¨æ¶&quot;</span>)&#123;</span><br><span class="line">            <span class="keyword">await</span> <span class="title function_">lendBooks</span>(data[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span>&#123;</span><br><span class="line">            sum = sum+<span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(sum!==<span class="number">0</span>)&#123;</span><br><span class="line">        message.<span class="title function_">error</span>(<span class="string">`å…±<span class="subst">$&#123;sum&#125;</span>æœ¬ä¹¦å€Ÿå‡ºå¤±è´¥`</span>);</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        message.<span class="title function_">success</span>(<span class="string">`å€Ÿå‡ºæˆåŠŸ`</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿˜ä¹¦</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å®šä¹‰ä¸€ä¸ªä¸€æ¬¡è¿˜å¤šæœ¬ä¹¦çš„çš„å›è°ƒå‡½æ•°</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">returnBooks</span> = <span class="keyword">async</span> (<span class="params">bookLog: <span class="built_in">any</span></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">let</span> sum = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; bookLog.<span class="property">length</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">if</span>(bookLog[i].<span class="property">status</span> ===<span class="string">&quot;å€Ÿå‡º&quot;</span>)&#123;</span><br><span class="line">      <span class="keyword">await</span> <span class="title function_">returnBook</span>(bookLog[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span>&#123;</span><br><span class="line">      sum = sum+<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span>(sum!==<span class="number">0</span>)&#123;</span><br><span class="line">    message.<span class="title function_">error</span>(<span class="string">`å…±<span class="subst">$&#123;sum&#125;</span>æœ¬ä¹¦å½’è¿˜å¤±è´¥,<span class="subst">$&#123;bookLog.length-sum&#125;</span>æœ¬ä¹¦å½’è¿˜æˆåŠŸ`</span>);</span><br><span class="line">  &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    message.<span class="title function_">success</span>(<span class="string">`å½’è¿˜æˆåŠŸ`</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">selectRow</span>([]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å®šä¹‰ä¸€ä¸ªè¿˜ä¹¦çš„å›è°ƒå‡½æ•°</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">handleReturn</span> = <span class="keyword">async</span> (<span class="params">bookLog: <span class="built_in">any</span></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span> (!selectedRowKeys?.<span class="property">length</span>) <span class="keyword">return</span>;</span><br><span class="line">  <span class="title function_">openConfirm</span>(<span class="string">`æ‚¨ç¡®å®šå½’è¿˜<span class="subst">$&#123;selectedRowKeys.length&#125;</span>æœ¬ä¹¦å—`</span>, <span class="keyword">async</span> () =&gt; &#123;</span><br><span class="line">    <span class="keyword">await</span> <span class="title function_">returnBooks</span>(bookLog);</span><br><span class="line">    refAction.<span class="property">current</span>?.<span class="title function_">reload</span>();</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h4 id="2-ç¬¬äºŒç§è§£å†³æ–¹æ¡ˆï¼ˆæ›´åŠ æ¨èï¼Œè§„èŒƒï¼Œä½†ä¸çŸ¥é“æ€ä¹ˆå®ç°æ˜¾ç¤ºæ•ˆæœï¼‰"><a href="#2-ç¬¬äºŒç§è§£å†³æ–¹æ¡ˆï¼ˆæ›´åŠ æ¨èï¼Œè§„èŒƒï¼Œä½†ä¸çŸ¥é“æ€ä¹ˆå®ç°æ˜¾ç¤ºæ•ˆæœï¼‰" class="headerlink" title="2.ç¬¬äºŒç§è§£å†³æ–¹æ¡ˆï¼ˆæ›´åŠ æ¨èï¼Œè§„èŒƒï¼Œä½†ä¸çŸ¥é“æ€ä¹ˆå®ç°æ˜¾ç¤ºæ•ˆæœï¼‰"></a>2.ç¬¬äºŒç§è§£å†³æ–¹æ¡ˆï¼ˆæ›´åŠ æ¨èï¼Œè§„èŒƒï¼Œä½†ä¸çŸ¥é“æ€ä¹ˆå®ç°æ˜¾ç¤ºæ•ˆæœï¼‰</h4><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(props.<span class="property">detailsData</span>)&#123;</span><br><span class="line">        <span class="keyword">await</span> <span class="title function_">updateDepartment</span>(date,&#123;<span class="attr">throwError</span>:<span class="literal">true</span>&#125;)</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        pass</span><br><span class="line">    &#125;<span class="keyword">catch</span>(ex)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;<span class="comment">//è¡¨ç¤ºæŠ¥é”™ä¸æ‰§è¡Œä»»ä½•æ“ä½œ</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ä»¥ä¸‹ä¸ºä¸æŠ¥é”™æ—¶é¡ºåºæ‰§è¡Œçš„ä»£ç </span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="16-å¯¹è¯æ¡†ä¼ é€’å‚æ•°ä¸åŒæ­¥çš„é—®é¢˜"><a href="#16-å¯¹è¯æ¡†ä¼ é€’å‚æ•°ä¸åŒæ­¥çš„é—®é¢˜" class="headerlink" title="16.å¯¹è¯æ¡†ä¼ é€’å‚æ•°ä¸åŒæ­¥çš„é—®é¢˜"></a>16.<del>å¯¹è¯æ¡†ä¼ é€’å‚æ•°ä¸åŒæ­¥çš„é—®é¢˜</del></h3><p>å€Ÿå‡ºï¼Œè¿˜ä¹¦çš„å¯¹è¯æ¡†æ˜¾ç¤ºçŠ¶æ€ä¸ä¸»é¡µé¢ç›¸å¯¹æœ‰å»¶æ—¶ï¼Œä¸¤è€…ä¸åŒæ­¥ï¼Œå¦‚ä½•ä¿®æ”¹ï¼Ÿ</p><p>å³é€‰ä¸­ä¸€æ ä¹‹åï¼Œé¦–æ¬¡å€Ÿå‡ºæ­£å¸¸ï¼Œè‹¥ä¸å–æ¶ˆå‹¾é€‰ï¼Œç¬¬ä¸€æ¬¡æˆåŠŸä¹‹åä»ç„¶å¯ä»¥æˆåŠŸå€Ÿä¹¦ï¼ˆçŠ¶æ€å¹¶æœªæ›´æ–°åˆ°å€Ÿä¹¦çŠ¶æ€æ¡†ä¸­ï¼‰ï¼Œåªæœ‰å–æ¶ˆå‹¾é€‰ï¼Œå†æ¬¡å‹¾é€‰ï¼Œæ‰èƒ½å¤Ÿåœ¨å€Ÿä¹¦å¯¹è¯æ¡†ä¸­åˆ·æ–°çŠ¶æ€ã€‚</p><h4 id="åŸå› -11"><a href="#åŸå› -11" class="headerlink" title="åŸå› "></a>åŸå› </h4><p>åˆæ­¥åˆ¤æ–­ä¸ºrowselectä¸­çš„åˆ—è¡¨å‚æ•°é¦–ä¸ªå…ƒç´ æ·»åŠ å‚æ•°æœªæ”¹å˜çš„é—®é¢˜</p><p><img src="E:\Files\Projects\CXCollege\software\Image\27.png" alt="27"></p><p>æµ‹è¯•å‘ç°ï¼Œä¹¦ç±çŠ¶æ€åœ¨é€‰æ‹©è¡Œæ—¶å‘å¯¹è¯æ¡†ä¼ é€’è¿‡ä¸€æ¬¡ï¼Œä½†æ˜¯åœ¨å€Ÿå‡ºå®Œä¹¦ä¹‹åï¼Œé€‰æ‹©è¡Œå¹¶æœªæ”¹å˜ï¼Œå¹¶æœªé‡æ–°å†™å…¥ï¼Œæ­¤æ—¶recordsä¸­ä¿å­˜çš„ä»ç„¶æ˜¯ä¿®æ”¹ä¹‹å‰çš„æ¶ˆæ¯</p><h4 id="è§£å†³æ–¹æ¡ˆ-13"><a href="#è§£å†³æ–¹æ¡ˆ-13" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h4><p>é€šè¿‡åœ¨å€Ÿä¹¦ã€è¿˜ä¹¦æˆåŠŸä¹‹åæ·»åŠ ï¼Œå–æ¶ˆå‹¾é€‰</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">selectRow</span>([]);</span><br></pre></td></tr></table></figure><h3 id="17-è¿˜å¤šæœ¬ä¹¦æ—¶ï¼Œlogé¡µé¢æ˜¾ç¤ºå‚æ•°ç¼ºå¤±"><a href="#17-è¿˜å¤šæœ¬ä¹¦æ—¶ï¼Œlogé¡µé¢æ˜¾ç¤ºå‚æ•°ç¼ºå¤±" class="headerlink" title="17.è¿˜å¤šæœ¬ä¹¦æ—¶ï¼Œlogé¡µé¢æ˜¾ç¤ºå‚æ•°ç¼ºå¤±"></a>17.<del>è¿˜å¤šæœ¬ä¹¦æ—¶ï¼Œlogé¡µé¢æ˜¾ç¤ºå‚æ•°ç¼ºå¤±</del></h3><h4 id="åŸå› -12"><a href="#åŸå› -12" class="headerlink" title="åŸå› "></a>åŸå› </h4><p>ä¸€å¼€å§‹ä»¥ä¸ºæ˜¯åç«¯copyæ•°æ®å‡ºç°é—®é¢˜ï¼Œé€šè¿‡F12æŸ¥çœ‹å‘ç°æ˜¯å‰ç«¯å‘åç«¯ä¼ é€’çš„æ•°æ®ç¼ºå¤±</p><h4 id="è§£å†³æ–¹æ¡ˆ-14"><a href="#è§£å†³æ–¹æ¡ˆ-14" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h4><p>valuesä¸­æ·»åŠ borrowedTimeï¼ŒreturnTimeå˜é‡ï¼ŒbookDTOArrayä¸­æ·»åŠ id: item.idï¼Œä¿®æ”¹bookLogDTOArrayä¸­çš„æœ€åä¸¤è¡Œä¸º  </p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">borrowedTime</span>:borrowedTime,</span><br><span class="line"><span class="attr">returnTime</span>: returnTime||<span class="literal">null</span></span><br></pre></td></tr></table></figure><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; readerName,borrowedTime,returnTime &#125; = values;</span><br><span class="line"></span><br><span class="line">formData.<span class="title function_">forEach</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">//å°†ä¸€ä¸ªåŒ…å«ä¹¦ç±ä¿¡æ¯çš„DTOå¯¹è±¡æ·»åŠ åˆ°bookDTOArrayæ•°ç»„</span></span><br><span class="line">    bookDTOArray.<span class="title function_">push</span>(&#123;</span><br><span class="line">        <span class="attr">id</span>: item.<span class="property">id</span>,</span><br><span class="line">        <span class="attr">name</span>: item.<span class="property">name</span>,</span><br><span class="line">        <span class="attr">isbn</span>: item.<span class="property">isbn</span>,</span><br><span class="line">        <span class="attr">author</span>: item.<span class="property">author</span>,</span><br><span class="line">        <span class="attr">publisher</span>: item.<span class="property">publisher</span>,</span><br><span class="line">        <span class="attr">price</span>: item.<span class="property">price</span>,</span><br><span class="line">        <span class="attr">category</span>: item.<span class="property">category</span>,</span><br><span class="line">        <span class="attr">boughtTime</span>: item.<span class="property">boughtTime</span>,</span><br><span class="line">        <span class="attr">publishedTime</span>: item.<span class="property">publishedTime</span>,</span><br><span class="line">        <span class="attr">status</span>: item.<span class="property">status</span>,</span><br><span class="line">        <span class="attr">classification</span>: item.<span class="property">classification</span></span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    bookLogDTOArray.<span class="title function_">push</span>(&#123;</span><br><span class="line">        readerName,</span><br><span class="line">        <span class="attr">bookId</span>: item.<span class="property">id</span>,</span><br><span class="line">        <span class="attr">bookName</span>: item.<span class="property">name</span>,</span><br><span class="line">        <span class="attr">bookIsbn</span>: item.<span class="property">isbn</span>,</span><br><span class="line">        <span class="attr">borrowedTime</span>:borrowedTime,</span><br><span class="line">        <span class="attr">returnTime</span>: returnTime||<span class="literal">null</span></span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="18-æ— æ³•å°†ä¸»é¡µé¢å‘å¯¹è¯æ¡†ä¼ é€’çš„æ•°æ®æš‚å­˜ç»™formData"><a href="#18-æ— æ³•å°†ä¸»é¡µé¢å‘å¯¹è¯æ¡†ä¼ é€’çš„æ•°æ®æš‚å­˜ç»™formData" class="headerlink" title="18.æ— æ³•å°†ä¸»é¡µé¢å‘å¯¹è¯æ¡†ä¼ é€’çš„æ•°æ®æš‚å­˜ç»™formData"></a>18.<del>æ— æ³•å°†ä¸»é¡µé¢å‘å¯¹è¯æ¡†ä¼ é€’çš„æ•°æ®æš‚å­˜ç»™formData</del></h3><h4 id="åŸå› -13"><a href="#åŸå› -13" class="headerlink" title="åŸå› "></a>åŸå› </h4><p>setFormDataå‡½æ•°è°ƒç”¨ä½ç½®é”™è¯¯</p><p>ä¹‹å‰åœ¨dataä¸‹æ–¹è°ƒç”¨æ­¤å‡½æ•°ï¼Œç½‘é¡µæ§åˆ¶å°æŸ¥çœ‹å‘ç°å…¶ä¸€ç›´ä¸ºç©º</p><h4 id="è§£å†³æ–¹æ¡ˆ-15"><a href="#è§£å†³æ–¹æ¡ˆ-15" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h4><p>åœ¨é’©å­å‡½æ•°ä¸­è°ƒç”¨setFormData(props.detailData);</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">waitTime</span>().<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (props.<span class="property">detailData</span>) &#123;</span><br><span class="line">            form?.<span class="property">current</span>?.<span class="title function_">setFieldsValue</span>(props.<span class="property">detailData</span>);</span><br><span class="line">            <span class="title function_">setFormData</span>(props.<span class="property">detailData</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            form?.<span class="property">current</span>?.<span class="title function_">resetFields</span>();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;, [props.<span class="property">detailData</span>, props.<span class="property">visible</span>]);</span><br></pre></td></tr></table></figure><h3 id="19-å›¾åƒæ˜¾ç¤ºä¸æ­£å¸¸"><a href="#19-å›¾åƒæ˜¾ç¤ºä¸æ­£å¸¸" class="headerlink" title="19.å›¾åƒæ˜¾ç¤ºä¸æ­£å¸¸"></a>19.<del>å›¾åƒæ˜¾ç¤ºä¸æ­£å¸¸</del></h3><p>bug21ä¿®æ”¹æˆåŠŸåæ­¤å¤„ä¹Ÿè§£å†³</p><h3 id="20-Navicatä¸åç«¯æ‰§è¡ŒMySQLè¯­å¥ç»“æœä¸ä¸€è‡´"><a href="#20-Navicatä¸åç«¯æ‰§è¡ŒMySQLè¯­å¥ç»“æœä¸ä¸€è‡´" class="headerlink" title="20.Navicatä¸åç«¯æ‰§è¡ŒMySQLè¯­å¥ç»“æœä¸ä¸€è‡´"></a>20.<del>Navicatä¸åç«¯æ‰§è¡ŒMySQLè¯­å¥ç»“æœä¸ä¸€è‡´</del></h3><h4 id="åŸå› -14"><a href="#åŸå› -14" class="headerlink" title="åŸå› "></a>åŸå› </h4><p>1.resultMapä¸resultTypeç”¨é”™</p><p>2.è¯­å¥æ”¾é”™xmlæ–‡ä»¶å¯¼è‡´BaseResultMapä¸åŒæ— æ³•å¯¹åº”</p><h3 id="è§£å†³æ–¹æ¡ˆ-16"><a href="#è§£å†³æ–¹æ¡ˆ-16" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h3><p>1.ä¿®æ”¹resultMapä¸ºBaseResultMap</p><p>BaseResultMapå°†å–å¾—çš„æ•°æ®åº“å­—æ®µä¸VOç±»åšæ˜ å°„</p><p>2.å°†mysqlè¯­å¥ä»ç§»åŠ¨åˆ°å€Ÿè¿˜è®°å½•çš„xmlæ–‡ä»¶ä¸­</p><h3 id="21-æ—¶é—´ä¹±åº"><a href="#21-æ—¶é—´ä¹±åº" class="headerlink" title="21.æ—¶é—´ä¹±åº"></a>21.<del>æ—¶é—´ä¹±åº</del></h3><h4 id="åŸå› -15"><a href="#åŸå› -15" class="headerlink" title="åŸå› "></a>åŸå› </h4><p>MySQLè¡¨æ ¼ä¸­æµ‹è¯•æ•°æ®å¿˜è®°åˆ é™¤ï¼Œä½¿ç”¨æ•°ç»„çš„contactå‡½æ•°å¯¼è‡´ä¹±åº</p><p>å…¶ä½™å¯èƒ½åŸå› </p><blockquote><p>å½’è¿˜æ—¶é—´ä¸ºnullçš„é—®é¢˜<br>contactçš„é—®é¢˜ï¼ˆå¯èƒ½æ€§ä¸å¤§ï¼‰</p></blockquote><h4 id="è§£å†³æ–¹æ¡ˆ-17"><a href="#è§£å†³æ–¹æ¡ˆ-17" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h4><p>åˆ é™¤å¤šä½™æµ‹è¯•æ•°æ®</p><h3 id="22-tsä¸­çš„å¼•å·"><a href="#22-tsä¸­çš„å¼•å·" class="headerlink" title="22.tsä¸­çš„å¼•å·"></a>22.<del>tsä¸­çš„å¼•å·</del></h3><p>ä»¥ä¸‹ä¸ºæ­£ç¡®ç”¨æ³•</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">message.<span class="title function_">error</span>(<span class="string">`å…±<span class="subst">$&#123;sum&#125;</span>æœ¬ä¹¦å€Ÿå‡ºå¤±è´¥`</span>);</span><br></pre></td></tr></table></figure><p>ä»¥ä¸‹ä¸ºé”™è¯¯ç”¨æ³•</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">message.<span class="title function_">error</span>(<span class="string">&#x27;å…±$&#123;sum&#125;æœ¬ä¹¦å€Ÿå‡ºå¤±è´¥&#x27;</span>);</span><br></pre></td></tr></table></figure><h3 id="23-setXXXå¼‚æ­¥æ›´æ–°é—®é¢˜"><a href="#23-setXXXå¼‚æ­¥æ›´æ–°é—®é¢˜" class="headerlink" title="23. setXXXå¼‚æ­¥æ›´æ–°é—®é¢˜"></a>23. <del>setXXXå¼‚æ­¥æ›´æ–°é—®é¢˜</del></h3><blockquote><p>å®ƒä¼šå°†æ–°çš„çŠ¶æ€å€¼åŠ å…¥åˆ°ä¸€ä¸ªé˜Ÿåˆ—ä¸­ï¼Œå¹¶åœ¨ç¨åçš„æ—¶é—´ç‚¹å¼‚æ­¥åœ°æ‰¹é‡æ›´æ–°ç»„ä»¶çš„çŠ¶æ€ã€‚è¿™æ„å‘³ç€ï¼Œè°ƒç”¨ setXXX å¹¶ä¸ä¼šç«‹å³æ›´æ–°ç»„ä»¶çš„çŠ¶æ€å€¼ï¼Œè€Œæ˜¯ç­‰å¾… React ç³»ç»Ÿåœ¨é€‚å½“çš„æ—¶æœºè¿›è¡Œæ‰¹é‡&gt;æ›´æ–°ã€‚</p></blockquote><h4 id="è§£å†³æ–¹æ¡ˆ-18"><a href="#è§£å†³æ–¹æ¡ˆ-18" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h4><p>ä½¿ç”¨useEffecté’©å­å‡½æ•°ï¼Œåœ¨æ£€æµ‹åˆ°å˜é‡è¢«ï¼Œæ›´æ–°åå†è®¾ç½®innerHTML</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">fetchJinrishici</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> jinrishici = <span class="built_in">require</span>(<span class="string">&#x27;jinrishici&#x27;</span>);</span><br><span class="line">    <span class="keyword">await</span> jinrishici.<span class="title function_">load</span>(<span class="function"><span class="params">result</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;è¯—è¯å†…å®¹&quot;</span>);</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(result.<span class="property">data</span>.<span class="property">content</span>);</span><br><span class="line">      <span class="title function_">setPoem</span>(result.<span class="property">data</span>.<span class="property">content</span>);</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;ä½¿ç”¨setPoemä¹‹å,poemå˜é‡&quot;</span>);</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(poem);</span><br><span class="line">      <span class="title function_">setInfo</span>(<span class="string">&quot;â€”â€”&quot;</span> + result.<span class="property">data</span>.<span class="property">origin</span>.<span class="property">author</span> + <span class="string">&quot;ã€Š&quot;</span> + result.<span class="property">data</span>.<span class="property">origin</span>.<span class="property">title</span> + <span class="string">&quot;ã€‹&quot;</span>);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">fetchJinrishici</span>();</span><br><span class="line">&#125;, []);</span><br><span class="line"></span><br><span class="line"><span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;poem&quot;</span>)) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;1123&quot;</span>)</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;poem&quot;</span>).<span class="property">innerHTML</span> = poem;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;info&quot;</span>)) &#123;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;info&quot;</span>).<span class="property">innerHTML</span> = info;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;, [poem, info]);</span><br></pre></td></tr></table></figure><h3 id="24-æ³¨é‡Šé—®é¢˜"><a href="#24-æ³¨é‡Šé—®é¢˜" class="headerlink" title="24.æ³¨é‡Šé—®é¢˜"></a>24.<del>æ³¨é‡Šé—®é¢˜</del></h3><p>typescriptsä¸åŒä½ç½®æ³¨é‡Šæ ¼å¼ä¸åŒçš„é—®é¢˜ï¼Œä½¿ç”¨ctrl+ï¼Ÿèƒ½æ›´æ–¹ä¾¿çš„æ³¨é‡Šï¼Œé¿å…é”™è¯¯</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;1-é€‰é¢˜ä¸è¦æ±‚&quot;&gt;&lt;a href=&quot;#1-é€‰é¢˜ä¸è¦æ±‚&quot; class=&quot;headerlink&quot; title=&quot;1.é€‰é¢˜ä¸è¦æ±‚&quot;&gt;&lt;/a&gt;1.é€‰é¢˜ä¸è¦æ±‚&lt;/h2&gt;&lt;h3 id=&quot;ä¸ªäººå›¾ä¹¦é¦†&quot;&gt;&lt;a href=&quot;#ä¸ªäººå›¾ä¹¦é¦†&quot; class=&quot;headerlink&quot; ti</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>Hello World</title>
    <link href="http://example.com/2023/05/06/hello-world/"/>
    <id>http://example.com/2023/05/06/hello-world/</id>
    <published>2023-05-06T12:11:18.042Z</published>
    <updated>2023-05-06T12:01:06.831Z</updated>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;Welcome to &lt;a href=&quot;https://hexo.io/&quot;&gt;Hexo&lt;/a&gt;! This is your very first post. Check &lt;a href=&quot;https://hexo.io/docs/&quot;&gt;documentation&lt;/a&gt; for</summary>
      
    
    
    
    
  </entry>
  
</feed>
